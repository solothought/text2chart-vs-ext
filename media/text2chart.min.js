var Text2Chart=function(t){"use strict";function e(){}function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(o)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e}function c(t,...n){if(null==t){for(const t of n)t(void 0);return e}const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function d(t){let e;return c(t,(t=>e=t))(),e}function u(t,e,n){t.$$.on_destroy.push(c(e,n))}function h(t,e,n,o){if(t){const i=p(t,e,n,o);return t[0](i)}}function p(t,e,o,i){return t[1]&&i?n(o.ctx.slice(),t[1](i(e))):o.ctx}function f(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}function g(t,e,n,o,i,r){if(i){const s=p(e,n,o,r);t.p(s,i)}}function m(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function y(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function w(t,e){const n={};e=new Set(e);for(const o in t)e.has(o)||"$"===o[0]||(n[o]=t[o]);return n}function $(t){return null==t?"":t}function v(t,e,n){return t.set(n),e}function x(t){return t&&s(t.destroy)?t.destroy:e}const b="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function k(t,e){t.appendChild(e)}function _(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function E(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function O(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function P(t){return document.createTextNode(t)}function M(){return P(" ")}function z(){return P("")}function N(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function L(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const I=["width","height"];function D(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:"__value"===o?t.value=t[o]=e[o]:n[o]&&n[o].set&&-1===I.indexOf(o)?t[o]=e[o]:L(t,o,e[o])}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}function T(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function H(t,e,n){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}let V,F;function W(){if(void 0===V){V=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){V=!0}}return V}function X(t,e,n){t.classList.toggle(e,!!n)}function Y(t,e){return new t(e)}function R(t){F=t}function Z(){if(!F)throw new Error("Function called outside component initialization");return F}function B(t){Z().$$.on_mount.push(t)}function K(t){Z().$$.on_destroy.push(t)}function G(){const t=Z();return(e,n,{cancelable:o=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}(e,n,{cancelable:o});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}function j(t,e){return Z().$$.context.set(t,e),e}function q(t){return Z().$$.context.get(t)}function Q(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const U=[],J=[];let tt=[];const et=[],nt=Promise.resolve();let ot=!1;function it(){ot||(ot=!0,nt.then(ct))}function rt(t){tt.push(t)}function st(t){et.push(t)}const at=new Set;let lt=0;function ct(){if(0!==lt)return;const t=F;do{try{for(;lt<U.length;){const t=U[lt];lt++,R(t),dt(t.$$)}}catch(t){throw U.length=0,lt=0,t}for(R(null),U.length=0,lt=0;J.length;)J.pop()();for(let t=0;t<tt.length;t+=1){const e=tt[t];at.has(e)||(at.add(e),e())}tt.length=0}while(U.length);for(;et.length;)et.pop()();ot=!1,at.clear(),R(t)}function dt(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(rt)}}const ut=new Set;let ht;function pt(){ht={r:0,c:[],p:ht}}function ft(){ht.r||r(ht.c),ht=ht.p}function gt(t,e){t&&t.i&&(ut.delete(t),t.i(e))}function mt(t,e,n,o){if(t&&t.o){if(ut.has(t))return;ut.add(t),ht.c.push((()=>{ut.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function yt(t){return void 0!==t?.length?t:Array.from(t)}function wt(t,e){mt(t,1,1,(()=>{e.delete(t.key)}))}function $t(t,e,n,o,i,s,a,l,c,d,u,h){let p=t.length,f=s.length,g=p;const m={};for(;g--;)m[t[g].key]=g;const y=[],w=new Map,$=new Map,v=[];for(g=f;g--;){const t=h(i,s,g),r=n(t);let l=a.get(r);l?o&&v.push((()=>l.p(t,e))):(l=d(r,t),l.c()),w.set(r,y[g]=l),r in m&&$.set(r,Math.abs(g-m[r]))}const x=new Set,b=new Set;function k(t){gt(t,1),t.m(l,u),a.set(t.key,t),u=t.first,f--}for(;p&&f;){const e=y[f-1],n=t[p-1],o=e.key,i=n.key;e===n?(u=e.first,p--,f--):w.has(i)?!a.has(o)||x.has(o)?k(e):b.has(i)?p--:$.get(o)>$.get(i)?(b.add(o),k(e)):(x.add(i),p--):(c(n,a),p--)}for(;p--;){const e=t[p];w.has(e.key)||c(e,a)}for(;f;)k(y[f-1]);return r(v),y}function vt(t,e){const n={},o={},i={$$scope:1};let r=t.length;for(;r--;){const s=t[r],a=e[r];if(a){for(const t in s)t in a||(o[t]=1);for(const t in a)i[t]||(n[t]=a[t],i[t]=1);t[r]=a}else for(const t in s)i[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function xt(t){return"object"==typeof t&&null!==t?t:{}}function bt(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function kt(t){t&&t.c()}function _t(t,e,n){const{fragment:i,after_update:a}=t.$$;i&&i.m(e,n),rt((()=>{const e=t.$$.on_mount.map(o).filter(s);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(rt)}function St(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];tt.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),tt=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Et(t,n,o,s,a,l,c=null,d=[-1]){const u=F;R(t);const h=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:i(),dirty:d,skip_bound:!1,root:n.target||u.$$.root};c&&c(h.root);let p=!1;if(h.ctx=o?o(t,n.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),p&&function(t,e){-1===t.$$.dirty[0]&&(U.push(t),it(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],h.update(),p=!0,r(h.before_update),h.fragment=!!s&&s(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(S)}else h.fragment&&h.fragment.c();n.intro&&gt(t.$$.fragment),_t(t,n.target,n.anchor),ct()}R(u)}class Ct{$$=void 0;$$set=void 0;$destroy(){St(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const Ot=(()=>{let t=0;return()=>(t+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${t}`)})();function Pt(t){const e=[];for(let n=0,o=t.length;n<o;n++)e.push(t[n]);return e}function Mt(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function zt(t,e={}){return{width:e.width||function(t){const e=Mt(t,"border-left-width"),n=Mt(t,"border-right-width");return t.clientWidth+e+n}(t),height:e.height||function(t){const e=Mt(t,"border-top-width"),n=Mt(t,"border-bottom-width");return t.clientHeight+e+n}(t)}}const Nt=16384;function Lt(t){return new Promise(((e,n)=>{const o=new Image;o.decode=()=>e(o),o.onload=()=>e(o),o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=t}))}async function It(t,e,n){const o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),r=document.createElementNS(o,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("externalResourcesRequired","true"),i.appendChild(r),r.appendChild(t),async function(t){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(t))).then(encodeURIComponent).then((t=>`data:image/svg+xml;charset=utf-8,${t}`))}(i)}const Dt=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||Dt(n,e))};function At(t,e,n){const o=`.${t}:${e}`,i=n.cssText?function(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}(n):function(t){return Pt(t).map((e=>`${e}: ${t.getPropertyValue(e)}${t.getPropertyPriority(e)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${o}{${i}}`)}function Tt(t,e,n){const o=window.getComputedStyle(t,n),i=o.getPropertyValue("content");if(""===i||"none"===i)return;const r=Ot();try{e.className=`${e.className} ${r}`}catch(t){return}const s=document.createElement("style");s.appendChild(At(r,n,o)),e.appendChild(s)}const Ht="application/font-woff",Vt="image/jpeg",Ft={woff:Ht,woff2:Ht,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Vt,jpeg:Vt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Wt(t){const e=function(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}(t).toLowerCase();return Ft[e]||""}function Xt(t){return-1!==t.search(/^(data:)/)}function Yt(t,e){return`data:${e};base64,${t}`}async function Rt(t,e,n){const o=await fetch(t,e);if(404===o.status)throw new Error(`Resource "${o.url}" not found`);const i=await o.blob();return new Promise(((t,e)=>{const r=new FileReader;r.onerror=e,r.onloadend=()=>{try{t(n({res:o,result:r.result}))}catch(t){e(t)}},r.readAsDataURL(i)}))}const Zt={};async function Bt(t,e,n){const o=function(t,e,n){let o=t.replace(/\?.*/,"");return n&&(o=t),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),e?`[${e}]${o}`:o}(t,e,n.includeQueryParams);if(null!=Zt[o])return Zt[o];let i;n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());try{const o=await Rt(t,n.fetchRequestInit,(({res:t,result:n})=>(e||(e=t.headers.get("Content-Type")||""),function(t){return t.split(/,/)[1]}(n))));i=Yt(o,e)}catch(e){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;e&&(o="string"==typeof e?e:e.message),o&&console.warn(o)}return Zt[o]=i,i}async function Kt(t,e){return Dt(t,HTMLCanvasElement)?async function(t){const e=t.toDataURL();return"data:,"===e?t.cloneNode(!1):Lt(e)}(t):Dt(t,HTMLVideoElement)?async function(t,e){if(t.currentSrc){const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.clientWidth,e.height=t.clientHeight,null==n||n.drawImage(t,0,0,e.width,e.height),Lt(e.toDataURL())}const n=t.poster,o=Wt(n);return Lt(await Bt(n,o,e))}(t,e):Dt(t,HTMLIFrameElement)?async function(t){var e;try{if(null===(e=null==t?void 0:t.contentDocument)||void 0===e?void 0:e.body)return await qt(t.contentDocument.body,{},!0)}catch(t){}return t.cloneNode(!1)}(t):t.cloneNode(!1)}const Gt=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function jt(t,e){return Dt(e,Element)&&(function(t,e){const n=e.style;if(!n)return;const o=window.getComputedStyle(t);o.cssText?(n.cssText=o.cssText,n.transformOrigin=o.transformOrigin):Pt(o).forEach((i=>{let r=o.getPropertyValue(i);if("font-size"===i&&r.endsWith("px")){const t=Math.floor(parseFloat(r.substring(0,r.length-2)))-.1;r=`${t}px`}Dt(t,HTMLIFrameElement)&&"display"===i&&"inline"===r&&(r="block"),"d"===i&&e.getAttribute("d")&&(r=`path(${e.getAttribute("d")})`),n.setProperty(i,r,o.getPropertyPriority(i))}))}(t,e),function(t,e){Tt(t,e,":before"),Tt(t,e,":after")}(t,e),function(t,e){Dt(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Dt(t,HTMLInputElement)&&e.setAttribute("value",t.value)}(t,e),function(t,e){if(Dt(t,HTMLSelectElement)){const n=e,o=Array.from(n.children).find((e=>t.value===e.getAttribute("value")));o&&o.setAttribute("selected","")}}(t,e)),e}async function qt(t,e,n){return n||!e.filter||e.filter(t)?Promise.resolve(t).then((t=>Kt(t,e))).then((n=>async function(t,e,n){var o,i;let r=[];return r=Gt(t)&&t.assignedNodes?Pt(t.assignedNodes()):Dt(t,HTMLIFrameElement)&&(null===(o=t.contentDocument)||void 0===o?void 0:o.body)?Pt(t.contentDocument.body.childNodes):Pt((null!==(i=t.shadowRoot)&&void 0!==i?i:t).childNodes),0===r.length||Dt(t,HTMLVideoElement)||await r.reduce(((t,o)=>t.then((()=>qt(o,n))).then((t=>{t&&e.appendChild(t)}))),Promise.resolve()),e}(t,n,e))).then((e=>jt(t,e))).then((t=>async function(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(0===n.length)return t;const o={};for(let i=0;i<n.length;i++){const r=n[i].getAttribute("xlink:href");if(r){const n=t.querySelector(r),i=document.querySelector(r);n||!i||o[r]||(o[r]=await qt(i,e,!0))}}const i=Object.values(o);if(i.length){const e="http://www.w3.org/1999/xhtml",n=document.createElementNS(e,"svg");n.setAttribute("xmlns",e),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const o=document.createElementNS(e,"defs");n.appendChild(o);for(let t=0;t<i.length;t++)o.appendChild(i[t]);t.appendChild(n)}return t}(t,e))):null}const Qt=/url\((['"]?)([^'"]+?)\1\)/g,Ut=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Jt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function te(t,e,n,o,i){try{const r=n?function(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(i),e&&(o.href=e),i.href=t,i.href}(e,n):e,s=Wt(e);let a;if(i){a=Yt(await i(r),s)}else a=await Bt(r,s,o);return t.replace(function(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}(e),`$1${a}$3`)}catch(t){}return t}function ee(t){return-1!==t.search(Qt)}async function ne(t,e,n){if(!ee(t))return t;const o=function(t,{preferredFontFormat:e}){return e?t.replace(Jt,(t=>{for(;;){const[n,,o]=Ut.exec(t)||[];if(!o)return"";if(o===e)return`src: ${n};`}})):t}(t,n),i=function(t){const e=[];return t.replace(Qt,((t,n,o)=>(e.push(o),t))),e.filter((t=>!Xt(t)))}(o);return i.reduce(((t,o)=>t.then((t=>te(t,o,e,n)))),Promise.resolve(o))}async function oe(t,e,n){var o;const i=null===(o=e.style)||void 0===o?void 0:o.getPropertyValue(t);if(i){const o=await ne(i,null,n);return e.style.setProperty(t,o,e.style.getPropertyPriority(t)),!0}return!1}async function ie(t,e){Dt(t,Element)&&(await async function(t,e){await oe("background",t,e)||await oe("background-image",t,e),await oe("mask",t,e)||await oe("mask-image",t,e)}(t,e),await async function(t,e){const n=Dt(t,HTMLImageElement);if((!n||Xt(t.src))&&(!Dt(t,SVGImageElement)||Xt(t.href.baseVal)))return;const o=n?t.src:t.href.baseVal,i=await Bt(o,Wt(o),e);await new Promise(((e,o)=>{t.onload=e,t.onerror=o;const r=t;r.decode&&(r.decode=e),"lazy"===r.loading&&(r.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i}))}(t,e),await async function(t,e){const n=Pt(t.childNodes).map((t=>ie(t,e)));await Promise.all(n).then((()=>t))}(t,e))}const re={};async function se(t){let e=re[t];if(null!=e)return e;const n=await fetch(t);return e={url:t,cssText:await n.text()},re[t]=e,e}async function ae(t,e){let n=t.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map((async i=>{let r=i.replace(o,"$1");return r.startsWith("https://")||(r=new URL(r,t.url).href),Rt(r,e.fetchRequestInit,(({result:t})=>(n=n.replace(i,`url(${t})`),[i,t])))}));return Promise.all(i).then((()=>n))}function le(t){if(null==t)return[];const e=[];let n=t.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const t=o.exec(n);if(null===t)break;e.push(t[0])}n=n.replace(o,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,r=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let t=i.exec(n);if(null===t){if(t=r.exec(n),null===t)break;i.lastIndex=r.lastIndex}else r.lastIndex=i.lastIndex;e.push(t[0])}return e}async function ce(t,e){if(null==t.ownerDocument)throw new Error("Provided element is not within a Document");const n=Pt(t.ownerDocument.styleSheets),o=await async function(t,e){const n=[],o=[];return t.forEach((n=>{if("cssRules"in n)try{Pt(n.cssRules||[]).forEach(((t,i)=>{if(t.type===CSSRule.IMPORT_RULE){let r=i+1;const s=se(t.href).then((t=>ae(t,e))).then((t=>le(t).forEach((t=>{try{n.insertRule(t,t.startsWith("@import")?r+=1:n.cssRules.length)}catch(e){console.error("Error inserting rule from remote css",{rule:t,error:e})}})))).catch((t=>{console.error("Error loading remote css",t.toString())}));o.push(s)}}))}catch(i){const r=t.find((t=>null==t.href))||document.styleSheets[0];null!=n.href&&o.push(se(n.href).then((t=>ae(t,e))).then((t=>le(t).forEach((t=>{r.insertRule(t,n.cssRules.length)})))).catch((t=>{console.error("Error loading remote stylesheet",t)}))),console.error("Error inlining remote css file",i)}})),Promise.all(o).then((()=>(t.forEach((t=>{if("cssRules"in t)try{Pt(t.cssRules||[]).forEach((t=>{n.push(t)}))}catch(e){console.error(`Error while reading CSS rules from ${t.href}`,e)}})),n)))}(n,e);return function(t){return t.filter((t=>t.type===CSSRule.FONT_FACE_RULE)).filter((t=>ee(t.style.getPropertyValue("src"))))}(o)}async function de(t,e){const n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:await async function(t,e){const n=await ce(t,e);return(await Promise.all(n.map((t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return ne(t.cssText,n,e)})))).join("\n")}(t,e);if(n){const e=document.createElement("style"),o=document.createTextNode(n);e.appendChild(o),t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}}async function ue(t,e={}){const{width:n,height:o}=zt(t,e),i=await qt(t,e,!0);await de(i,e),await ie(i,e),function(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const o=e.style;null!=o&&Object.keys(o).forEach((t=>{n[t]=o[t]}))}(i,e);return await It(i,n,o)}async function he(t,e={}){const{width:n,height:o}=zt(t,e),i=await ue(t,e),r=await Lt(i),s=document.createElement("canvas"),a=s.getContext("2d"),l=e.pixelRatio||function(){let t,e;try{e=process}catch(t){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}(),c=e.canvasWidth||n,d=e.canvasHeight||o;return s.width=c*l,s.height=d*l,e.skipAutoScale||function(t){(t.width>Nt||t.height>Nt)&&(t.width>Nt&&t.height>Nt?t.width>t.height?(t.height*=Nt/t.width,t.width=Nt):(t.width*=Nt/t.height,t.height=Nt):t.width>Nt?(t.height*=Nt/t.width,t.width=Nt):(t.width*=Nt/t.height,t.height=Nt))}(s),s.style.width=`${c}`,s.style.height=`${d}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,s.width,s.height)),a.drawImage(r,0,0,s.width,s.height),s}const pe=[];function fe(t,e){return{subscribe:ge(t,e).subscribe}}function ge(t,n=e){let o;const i=new Set;function r(e){if(a(t,e)&&(t=e,o)){const e=!pe.length;for(const e of i)e[1](),pe.push(e,t);if(e){for(let t=0;t<pe.length;t+=2)pe[t][0](pe[t+1]);pe.length=0}}}function s(e){r(e(t))}return{set:r,update:s,subscribe:function(a,l=e){const c=[a,l];return i.add(c),1===i.size&&(o=n(r,s)||e),a(t),()=>{i.delete(c),0===i.size&&o&&(o(),o=null)}}}}function me(t,n,o){const i=!Array.isArray(t),a=i?[t]:t;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=n.length<2;return fe(o,((t,o)=>{let d=!1;const u=[];let h=0,p=e;const f=()=>{if(h)return;p();const r=n(i?u[0]:u,t,o);l?t(r):p=s(r)?r:e},g=a.map(((t,e)=>c(t,(t=>{u[e]=t,h&=~(1<<e),d&&f()}),(()=>{h|=1<<e}))));return d=!0,f(),function(){r(g),p(),d=!1}}))}function ye(t){if("string"==typeof t||"number"==typeof t)return""+t;let e="";if(Array.isArray(t))for(let n,o=0;o<t.length;o++)""!==(n=ye(t[o]))&&(e+=(e&&" ")+n);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var we={value:()=>{}};function $e(){for(var t,e=0,n=arguments.length,o={};e<n;++e){if(!(t=arguments[e]+"")||t in o||/[\s.]/.test(t))throw new Error("illegal type: "+t);o[t]=[]}return new ve(o)}function ve(t){this._=t}function xe(t,e){for(var n,o=0,i=t.length;o<i;++o)if((n=t[o]).name===e)return n.value}function be(t,e,n){for(var o=0,i=t.length;o<i;++o)if(t[o].name===e){t[o]=we,t=t.slice(0,o).concat(t.slice(o+1));break}return null!=n&&t.push({name:e,value:n}),t}ve.prototype=$e.prototype={constructor:ve,on:function(t,e){var n,o,i=this._,r=(o=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!o.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),s=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=r[s]).type)i[n]=be(i[n],t.name,e);else if(null==e)for(n in i)i[n]=be(i[n],t.name,null);return this}for(;++s<a;)if((n=(t=r[s]).type)&&(n=xe(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ve(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,o,i=new Array(n),r=0;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,n=(o=this._[t]).length;r<n;++r)o[r].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)}};var ke="http://www.w3.org/1999/xhtml",_e={svg:"http://www.w3.org/2000/svg",xhtml:ke,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Se(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),_e.hasOwnProperty(e)?{space:_e[e],local:t}:t}function Ee(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ke&&e.documentElement.namespaceURI===ke?e.createElement(t):e.createElementNS(n,t)}}function Ce(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Oe(t){var e=Se(t);return(e.local?Ce:Ee)(e)}function Pe(){}function Me(t){return null==t?Pe:function(){return this.querySelector(t)}}function ze(){return[]}function Ne(t){return null==t?ze:function(){return this.querySelectorAll(t)}}function Le(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}function Ie(t){return function(){return this.matches(t)}}function De(t){return function(e){return e.matches(t)}}var Ae=Array.prototype.find;function Te(){return this.firstElementChild}var He=Array.prototype.filter;function Ve(){return Array.from(this.children)}function Fe(t){return new Array(t.length)}function We(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Xe(t,e,n,o,i,r){for(var s,a=0,l=e.length,c=r.length;a<c;++a)(s=e[a])?(s.__data__=r[a],o[a]=s):n[a]=new We(t,r[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function Ye(t,e,n,o,i,r,s){var a,l,c,d=new Map,u=e.length,h=r.length,p=new Array(u);for(a=0;a<u;++a)(l=e[a])&&(p[a]=c=s.call(l,l.__data__,a,e)+"",d.has(c)?i[a]=l:d.set(c,l));for(a=0;a<h;++a)c=s.call(t,r[a],a,r)+"",(l=d.get(c))?(o[a]=l,l.__data__=r[a],d.delete(c)):n[a]=new We(t,r[a]);for(a=0;a<u;++a)(l=e[a])&&d.get(p[a])===l&&(i[a]=l)}function Re(t){return t.__data__}function Ze(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Be(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ke(t){return function(){this.removeAttribute(t)}}function Ge(t){return function(){this.removeAttributeNS(t.space,t.local)}}function je(t,e){return function(){this.setAttribute(t,e)}}function qe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Qe(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ue(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Je(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function tn(t){return function(){this.style.removeProperty(t)}}function en(t,e,n){return function(){this.style.setProperty(t,e,n)}}function nn(t,e,n){return function(){var o=e.apply(this,arguments);null==o?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function on(t,e){return t.style.getPropertyValue(e)||Je(t).getComputedStyle(t,null).getPropertyValue(e)}function rn(t){return function(){delete this[t]}}function sn(t,e){return function(){this[t]=e}}function an(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ln(t){return t.trim().split(/^|\s+/)}function cn(t){return t.classList||new dn(t)}function dn(t){this._node=t,this._names=ln(t.getAttribute("class")||"")}function un(t,e){for(var n=cn(t),o=-1,i=e.length;++o<i;)n.add(e[o])}function hn(t,e){for(var n=cn(t),o=-1,i=e.length;++o<i;)n.remove(e[o])}function pn(t){return function(){un(this,t)}}function fn(t){return function(){hn(this,t)}}function gn(t,e){return function(){(e.apply(this,arguments)?un:hn)(this,t)}}function mn(){this.textContent=""}function yn(t){return function(){this.textContent=t}}function wn(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function $n(){this.innerHTML=""}function vn(t){return function(){this.innerHTML=t}}function xn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function bn(){this.nextSibling&&this.parentNode.appendChild(this)}function kn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _n(){return null}function Sn(){var t=this.parentNode;t&&t.removeChild(this)}function En(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Cn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function On(t){return function(){var e=this.__on;if(e){for(var n,o=0,i=-1,r=e.length;o<r;++o)n=e[o],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Pn(t,e,n){return function(){var o,i=this.__on,r=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var s=0,a=i.length;s<a;++s)if((o=i[s]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),void(o.value=e);this.addEventListener(t.type,r,n),o={type:t.type,name:t.name,value:e,listener:r,options:n},i?i.push(o):this.__on=[o]}}function Mn(t,e,n){var o=Je(t),i=o.CustomEvent;"function"==typeof i?i=new i(e,n):(i=o.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function zn(t,e){return function(){return Mn(this,t,e)}}function Nn(t,e){return function(){return Mn(this,t,e.apply(this,arguments))}}We.prototype={constructor:We,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},dn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Ln=[null];function In(t,e){this._groups=t,this._parents=e}function Dn(){return new In([[document.documentElement]],Ln)}function An(t){return"string"==typeof t?new In([[document.querySelector(t)]],[document.documentElement]):new In([[t]],Ln)}function Tn(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,[(o=o.matrixTransform(e.getScreenCTM().inverse())).x,o.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}In.prototype=Dn.prototype={constructor:In,select:function(t){"function"!=typeof t&&(t=Me(t));for(var e=this._groups,n=e.length,o=new Array(n),i=0;i<n;++i)for(var r,s,a=e[i],l=a.length,c=o[i]=new Array(l),d=0;d<l;++d)(r=a[d])&&(s=t.call(r,r.__data__,d,a))&&("__data__"in r&&(s.__data__=r.__data__),c[d]=s);return new In(o,this._parents)},selectAll:function(t){t="function"==typeof t?Le(t):Ne(t);for(var e=this._groups,n=e.length,o=[],i=[],r=0;r<n;++r)for(var s,a=e[r],l=a.length,c=0;c<l;++c)(s=a[c])&&(o.push(t.call(s,s.__data__,c,a)),i.push(s));return new In(o,i)},selectChild:function(t){return this.select(null==t?Te:function(t){return function(){return Ae.call(this.children,t)}}("function"==typeof t?t:De(t)))},selectChildren:function(t){return this.selectAll(null==t?Ve:function(t){return function(){return He.call(this.children,t)}}("function"==typeof t?t:De(t)))},filter:function(t){"function"!=typeof t&&(t=Ie(t));for(var e=this._groups,n=e.length,o=new Array(n),i=0;i<n;++i)for(var r,s=e[i],a=s.length,l=o[i]=[],c=0;c<a;++c)(r=s[c])&&t.call(r,r.__data__,c,s)&&l.push(r);return new In(o,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Re);var n,o=e?Ye:Xe,i=this._parents,r=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=r.length,a=new Array(s),l=new Array(s),c=new Array(s),d=0;d<s;++d){var u=i[d],h=r[d],p=h.length,f=Ze(t.call(u,u&&u.__data__,d,i)),g=f.length,m=l[d]=new Array(g),y=a[d]=new Array(g);o(u,h,m,y,c[d]=new Array(p),f,e);for(var w,$,v=0,x=0;v<g;++v)if(w=m[v]){for(v>=x&&(x=v+1);!($=y[x])&&++x<g;);w._next=$||null}}return(a=new In(a,i))._enter=l,a._exit=c,a},enter:function(){return new In(this._enter||this._groups.map(Fe),this._parents)},exit:function(){return new In(this._exit||this._groups.map(Fe),this._parents)},join:function(t,e,n){var o=this.enter(),i=this,r=this.exit();return"function"==typeof t?(o=t(o))&&(o=o.selection()):o=o.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?r.remove():n(r),o&&i?o.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,o=e._groups,i=n.length,r=o.length,s=Math.min(i,r),a=new Array(i),l=0;l<s;++l)for(var c,d=n[l],u=o[l],h=d.length,p=a[l]=new Array(h),f=0;f<h;++f)(c=d[f]||u[f])&&(p[f]=c);for(;l<i;++l)a[l]=n[l];return new In(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var o,i=t[e],r=i.length-1,s=i[r];--r>=0;)(o=i[r])&&(s&&4^o.compareDocumentPosition(s)&&s.parentNode.insertBefore(o,s),s=o);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Be);for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var s,a=n[r],l=a.length,c=i[r]=new Array(l),d=0;d<l;++d)(s=a[d])&&(c[d]=s);c.sort(e)}return new In(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],i=0,r=o.length;i<r;++i){var s=o[i];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,o=e.length;n<o;++n)for(var i,r=e[n],s=0,a=r.length;s<a;++s)(i=r[s])&&t.call(i,i.__data__,s,r);return this},attr:function(t,e){var n=Se(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==e?n.local?Ge:Ke:"function"==typeof e?n.local?Ue:Qe:n.local?qe:je)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?tn:"function"==typeof e?nn:en)(t,e,null==n?"":n)):on(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?rn:"function"==typeof e?an:sn)(t,e)):this.node()[t]},classed:function(t,e){var n=ln(t+"");if(arguments.length<2){for(var o=cn(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?gn:e?pn:fn)(n,e))},text:function(t){return arguments.length?this.each(null==t?mn:("function"==typeof t?wn:yn)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?$n:("function"==typeof t?xn:vn)(t)):this.node().innerHTML},raise:function(){return this.each(bn)},lower:function(){return this.each(kn)},append:function(t){var e="function"==typeof t?t:Oe(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Oe(t),o=null==e?_n:"function"==typeof e?e:Me(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Sn)},clone:function(t){return this.select(t?Cn:En)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var o,i,r=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=r.length;if(!(arguments.length<2)){for(a=e?Pn:On,o=0;o<s;++o)this.each(a(r[o],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,d=a.length;c<d;++c)for(o=0,l=a[c];o<s;++o)if((i=r[o]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Nn:zn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o,i=t[e],r=0,s=i.length;r<s;++r)(o=i[r])&&(yield o)}};const Hn={passive:!1},Vn={capture:!0,passive:!1};function Fn(t){t.stopImmediatePropagation()}function Wn(t){t.preventDefault(),t.stopImmediatePropagation()}function Xn(t){var e=t.document.documentElement,n=An(t).on("dragstart.drag",Wn,Vn);"onselectstart"in e?n.on("selectstart.drag",Wn,Vn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Yn(t,e){var n=t.document.documentElement,o=An(t).on("dragstart.drag",null);e&&(o.on("click.drag",Wn,Vn),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Rn=t=>()=>t;function Zn(t,{sourceEvent:e,subject:n,target:o,identifier:i,active:r,x:s,y:a,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function Bn(t){return!t.ctrlKey&&!t.button}function Kn(){return this.parentNode}function Gn(t,e){return null==e?{x:t.x,y:t.y}:e}function jn(){return navigator.maxTouchPoints||"ontouchstart"in this}function qn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Qn(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function Un(){}Zn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Jn=.7,to=1/Jn,eo="\\s*([+-]?\\d+)\\s*",no="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",io=/^#([0-9a-f]{3,8})$/,ro=new RegExp(`^rgb\\(${eo},${eo},${eo}\\)$`),so=new RegExp(`^rgb\\(${oo},${oo},${oo}\\)$`),ao=new RegExp(`^rgba\\(${eo},${eo},${eo},${no}\\)$`),lo=new RegExp(`^rgba\\(${oo},${oo},${oo},${no}\\)$`),co=new RegExp(`^hsl\\(${no},${oo},${oo}\\)$`),uo=new RegExp(`^hsla\\(${no},${oo},${oo},${no}\\)$`),ho={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function po(){return this.rgb().formatHex()}function fo(){return this.rgb().formatRgb()}function go(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=io.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?mo(e):3===n?new $o(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?yo(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?yo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ro.exec(t))?new $o(e[1],e[2],e[3],1):(e=so.exec(t))?new $o(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ao.exec(t))?yo(e[1],e[2],e[3],e[4]):(e=lo.exec(t))?yo(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=co.exec(t))?So(e[1],e[2]/100,e[3]/100,1):(e=uo.exec(t))?So(e[1],e[2]/100,e[3]/100,e[4]):ho.hasOwnProperty(t)?mo(ho[t]):"transparent"===t?new $o(NaN,NaN,NaN,0):null}function mo(t){return new $o(t>>16&255,t>>8&255,255&t,1)}function yo(t,e,n,o){return o<=0&&(t=e=n=NaN),new $o(t,e,n,o)}function wo(t,e,n,o){return 1===arguments.length?((i=t)instanceof Un||(i=go(i)),i?new $o((i=i.rgb()).r,i.g,i.b,i.opacity):new $o):new $o(t,e,n,null==o?1:o);var i}function $o(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function vo(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}`}function xo(){const t=bo(this.opacity);return`${1===t?"rgb(":"rgba("}${ko(this.r)}, ${ko(this.g)}, ${ko(this.b)}${1===t?")":`, ${t})`}`}function bo(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ko(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _o(t){return((t=ko(t))<16?"0":"")+t.toString(16)}function So(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Co(t,e,n,o)}function Eo(t){if(t instanceof Co)return new Co(t.h,t.s,t.l,t.opacity);if(t instanceof Un||(t=go(t)),!t)return new Co;if(t instanceof Co)return t;var e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,i=Math.min(e,n,o),r=Math.max(e,n,o),s=NaN,a=r-i,l=(r+i)/2;return a?(s=e===r?(n-o)/a+6*(n<o):n===r?(o-e)/a+2:(e-n)/a+4,a/=l<.5?r+i:2-r-i,s*=60):a=l>0&&l<1?0:s,new Co(s,a,l,t.opacity)}function Co(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function Oo(t){return(t=(t||0)%360)<0?t+360:t}function Po(t){return Math.max(0,Math.min(1,t||0))}function Mo(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}qn(Un,go,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:po,formatHex:po,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Eo(this).formatHsl()},formatRgb:fo,toString:fo}),qn($o,wo,Qn(Un,{brighter(t){return t=null==t?to:Math.pow(to,t),new $o(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Jn:Math.pow(Jn,t),new $o(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $o(ko(this.r),ko(this.g),ko(this.b),bo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vo,formatHex:vo,formatHex8:function(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}${_o(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:xo,toString:xo})),qn(Co,(function(t,e,n,o){return 1===arguments.length?Eo(t):new Co(t,e,n,null==o?1:o)}),Qn(Un,{brighter(t){return t=null==t?to:Math.pow(to,t),new Co(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Jn:Math.pow(Jn,t),new Co(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,i=2*n-o;return new $o(Mo(t>=240?t-240:t+120,i,o),Mo(t,i,o),Mo(t<120?t+240:t-120,i,o),this.opacity)},clamp(){return new Co(Oo(this.h),Po(this.s),Po(this.l),bo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bo(this.opacity);return`${1===t?"hsl(":"hsla("}${Oo(this.h)}, ${100*Po(this.s)}%, ${100*Po(this.l)}%${1===t?")":`, ${t})`}`}}));var zo=t=>()=>t;function No(t){return 1==(t=+t)?Lo:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):zo(isNaN(e)?n:e)}}function Lo(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):zo(isNaN(t)?e:t)}var Io=function t(e){var n=No(e);function o(t,e){var o=n((t=wo(t)).r,(e=wo(e)).r),i=n(t.g,e.g),r=n(t.b,e.b),s=Lo(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=i(e),t.b=r(e),t.opacity=s(e),t+""}}return o.gamma=t,o}(1);function Do(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Ao=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,To=new RegExp(Ao.source,"g");function Ho(t,e){var n,o,i,r=Ao.lastIndex=To.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=Ao.exec(t))&&(o=To.exec(e));)(i=o.index)>r&&(i=e.slice(r,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,l.push({i:s,x:Do(n,o)})),r=To.lastIndex;return r<e.length&&(i=e.slice(r),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,o=0;o<e;++o)a[(n=l[o]).i]=n.x(t);return a.join("")})}var Vo,Fo=180/Math.PI,Wo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xo(t,e,n,o,i,r){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*o)&&(n-=t*l,o-=e*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),t*o<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:r,rotate:Math.atan2(e,t)*Fo,skewX:Math.atan(l)*Fo,scaleX:s,scaleY:a}}function Yo(t,e,n,o){function i(t){return t.length?t.pop()+" ":""}return function(r,s){var a=[],l=[];return r=t(r),s=t(s),function(t,o,i,r,s,a){if(t!==i||o!==r){var l=s.push("translate(",null,e,null,n);a.push({i:l-4,x:Do(t,i)},{i:l-2,x:Do(o,r)})}else(i||r)&&s.push("translate("+i+e+r+n)}(r.translateX,r.translateY,s.translateX,s.translateY,a,l),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(i(n)+"rotate(",null,o)-2,x:Do(t,e)})):e&&n.push(i(n)+"rotate("+e+o)}(r.rotate,s.rotate,a,l),function(t,e,n,r){t!==e?r.push({i:n.push(i(n)+"skewX(",null,o)-2,x:Do(t,e)}):e&&n.push(i(n)+"skewX("+e+o)}(r.skewX,s.skewX,a,l),function(t,e,n,o,r,s){if(t!==n||e!==o){var a=r.push(i(r)+"scale(",null,",",null,")");s.push({i:a-4,x:Do(t,n)},{i:a-2,x:Do(e,o)})}else 1===n&&1===o||r.push(i(r)+"scale("+n+","+o+")")}(r.scaleX,r.scaleY,s.scaleX,s.scaleY,a,l),r=s=null,function(t){for(var e,n=-1,o=l.length;++n<o;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var Ro=Yo((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Wo:Xo(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Zo=Yo((function(t){return null==t?Wo:(Vo||(Vo=document.createElementNS("http://www.w3.org/2000/svg","g")),Vo.setAttribute("transform",t),(t=Vo.transform.baseVal.consolidate())?Xo((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Wo)}),", ",")",")");function Bo(t){return((t=Math.exp(t))+1/t)/2}var Ko,Go,jo=function t(e,n,o){function i(t,i){var r,s,a=t[0],l=t[1],c=t[2],d=i[0],u=i[1],h=i[2],p=d-a,f=u-l,g=p*p+f*f;if(g<1e-12)s=Math.log(h/c)/e,r=function(t){return[a+t*p,l+t*f,c*Math.exp(e*t*s)]};else{var m=Math.sqrt(g),y=(h*h-c*c+o*g)/(2*c*n*m),w=(h*h-c*c-o*g)/(2*h*n*m),$=Math.log(Math.sqrt(y*y+1)-y),v=Math.log(Math.sqrt(w*w+1)-w);s=(v-$)/e,r=function(t){var o,i=t*s,r=Bo($),d=c/(n*m)*(r*(o=e*i+$,((o=Math.exp(2*o))-1)/(o+1))-function(t){return((t=Math.exp(t))-1/t)/2}($));return[a+d*p,l+d*f,c*r/Bo(e*i+$)]}}return r.duration=1e3*s*e/Math.SQRT2,r}return i.rho=function(e){var n=Math.max(.001,+e),o=n*n;return t(n,o,o*o)},i}(Math.SQRT2,2,4),qo=0,Qo=0,Uo=0,Jo=0,ti=0,ei=0,ni="object"==typeof performance&&performance.now?performance:Date,oi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ii(){return ti||(oi(ri),ti=ni.now()+ei)}function ri(){ti=0}function si(){this._call=this._time=this._next=null}function ai(t,e,n){var o=new si;return o.restart(t,e,n),o}function li(){ti=(Jo=ni.now())+ei,qo=Qo=0;try{!function(){ii(),++qo;for(var t,e=Ko;e;)(t=ti-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qo}()}finally{qo=0,function(){var t,e,n=Ko,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ko=e);Go=t,di(o)}(),ti=0}}function ci(){var t=ni.now(),e=t-Jo;e>1e3&&(ei-=e,Jo=t)}function di(t){qo||(Qo&&(Qo=clearTimeout(Qo)),t-ti>24?(t<1/0&&(Qo=setTimeout(li,t-ni.now()-ei)),Uo&&(Uo=clearInterval(Uo))):(Uo||(Jo=ni.now(),Uo=setInterval(ci,1e3)),qo=1,oi(li)))}function ui(t,e,n){var o=new si;return e=null==e?0:+e,o.restart((n=>{o.stop(),t(n+e)}),e,n),o}si.prototype=ai.prototype={constructor:si,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ii():+n)+(null==e?0:+e),this._next||Go===this||(Go?Go._next=this:Ko=this,Go=this),this._call=t,this._time=n,di()},stop:function(){this._call&&(this._call=null,this._time=1/0,di())}};var hi=$e("start","end","cancel","interrupt"),pi=[];function fi(t,e,n,o,i,r){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var o,i=t.__transition;function r(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}function s(r){var c,d,u,h;if(1!==n.state)return l();for(c in i)if((h=i[c]).name===n.name){if(3===h.state)return ui(s);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[c]):+c<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[c])}if(ui((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(r))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(u=n.tween.length),c=0,d=-1;c<u;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),r=-1,s=o.length;++r<s;)o[r].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var o in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=ai(r,0,n.time)}(t,n,{name:e,index:o,group:i,on:hi,tween:pi,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:0})}function gi(t,e){var n=yi(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function mi(t,e){var n=yi(t,e);if(n.state>3)throw new Error("too late; already running");return n}function yi(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function wi(t,e){var n,o,i,r=t.__transition,s=!0;if(r){for(i in e=null==e?null:e+"",r)(n=r[i]).name===e?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]):s=!1;s&&delete t.__transition}}function $i(t,e){var n,o;return function(){var i=mi(this,t),r=i.tween;if(r!==n)for(var s=0,a=(o=n=r).length;s<a;++s)if(o[s].name===e){(o=o.slice()).splice(s,1);break}i.tween=o}}function vi(t,e,n){var o,i;if("function"!=typeof n)throw new Error;return function(){var r=mi(this,t),s=r.tween;if(s!==o){i=(o=s).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}r.tween=i}}function xi(t,e,n){var o=t._id;return t.each((function(){var t=mi(this,o);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return yi(t,o).value[e]}}function bi(t,e){var n;return("number"==typeof e?Do:e instanceof go?Io:(n=go(e))?(e=n,Io):Ho)(t,e)}function ki(t){return function(){this.removeAttribute(t)}}function _i(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Si(t,e,n){var o,i,r=n+"";return function(){var s=this.getAttribute(t);return s===r?null:s===o?i:i=e(o=s,n)}}function Ei(t,e,n){var o,i,r=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===o?i:i=e(o=s,n)}}function Ci(t,e,n){var o,i,r;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(t))===(a=l+"")?null:s===o&&a===i?r:(i=a,r=e(o=s,l));this.removeAttribute(t)}}function Oi(t,e,n){var o,i,r;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:s===o&&a===i?r:(i=a,r=e(o=s,l));this.removeAttributeNS(t.space,t.local)}}function Pi(t,e){var n,o;function i(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Mi(t,e){var n,o;function i(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function zi(t,e){return function(){gi(this,t).delay=+e.apply(this,arguments)}}function Ni(t,e){return e=+e,function(){gi(this,t).delay=e}}function Li(t,e){return function(){mi(this,t).duration=+e.apply(this,arguments)}}function Ii(t,e){return e=+e,function(){mi(this,t).duration=e}}var Di=Dn.prototype.constructor;function Ai(t){return function(){this.style.removeProperty(t)}}var Ti=0;function Hi(t,e,n,o){this._groups=t,this._parents=e,this._name=n,this._id=o}function Vi(){return++Ti}var Fi=Dn.prototype;Hi.prototype={constructor:Hi,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Me(t));for(var o=this._groups,i=o.length,r=new Array(i),s=0;s<i;++s)for(var a,l,c=o[s],d=c.length,u=r[s]=new Array(d),h=0;h<d;++h)(a=c[h])&&(l=t.call(a,a.__data__,h,c))&&("__data__"in a&&(l.__data__=a.__data__),u[h]=l,fi(u[h],e,n,h,u,yi(a,n)));return new Hi(r,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ne(t));for(var o=this._groups,i=o.length,r=[],s=[],a=0;a<i;++a)for(var l,c=o[a],d=c.length,u=0;u<d;++u)if(l=c[u]){for(var h,p=t.call(l,l.__data__,u,c),f=yi(l,n),g=0,m=p.length;g<m;++g)(h=p[g])&&fi(h,e,n,g,p,f);r.push(p),s.push(l)}return new Hi(r,s,e,n)},selectChild:Fi.selectChild,selectChildren:Fi.selectChildren,filter:function(t){"function"!=typeof t&&(t=Ie(t));for(var e=this._groups,n=e.length,o=new Array(n),i=0;i<n;++i)for(var r,s=e[i],a=s.length,l=o[i]=[],c=0;c<a;++c)(r=s[c])&&t.call(r,r.__data__,c,s)&&l.push(r);return new Hi(o,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,o=e.length,i=n.length,r=Math.min(o,i),s=new Array(o),a=0;a<r;++a)for(var l,c=e[a],d=n[a],u=c.length,h=s[a]=new Array(u),p=0;p<u;++p)(l=c[p]||d[p])&&(h[p]=l);for(;a<o;++a)s[a]=e[a];return new Hi(s,this._parents,this._name,this._id)},selection:function(){return new Di(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Vi(),o=this._groups,i=o.length,r=0;r<i;++r)for(var s,a=o[r],l=a.length,c=0;c<l;++c)if(s=a[c]){var d=yi(s,e);fi(s,t,n,c,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Hi(o,this._parents,t,n)},call:Fi.call,nodes:Fi.nodes,node:Fi.node,size:Fi.size,empty:Fi.empty,each:Fi.each,on:function(t,e){var n=this._id;return arguments.length<2?yi(this.node(),n).on.on(t):this.each(function(t,e,n){var o,i,r=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?gi:mi;return function(){var s=r(this,t),a=s.on;a!==o&&(i=(o=a).copy()).on(e,n),s.on=i}}(n,t,e))},attr:function(t,e){var n=Se(t),o="transform"===n?Zo:bi;return this.attrTween(t,"function"==typeof e?(n.local?Oi:Ci)(n,o,xi(this,"attr."+t,e)):null==e?(n.local?_i:ki)(n):(n.local?Ei:Si)(n,o,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var o=Se(t);return this.tween(n,(o.local?Pi:Mi)(o,e))},style:function(t,e,n){var o="transform"==(t+="")?Ro:bi;return null==e?this.styleTween(t,function(t,e){var n,o,i;return function(){var r=on(this,t),s=(this.style.removeProperty(t),on(this,t));return r===s?null:r===n&&s===o?i:i=e(n=r,o=s)}}(t,o)).on("end.style."+t,Ai(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var o,i,r;return function(){var s=on(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=on(this,t)),s===l?null:s===o&&l===i?r:(i=l,r=e(o=s,a))}}(t,o,xi(this,"style."+t,e))).each(function(t,e){var n,o,i,r,s="style."+e,a="end."+s;return function(){var l=mi(this,t),c=l.on,d=null==l.value[s]?r||(r=Ai(e)):void 0;c===n&&i===d||(o=(n=c).copy()).on(a,i=d),l.on=o}}(this._id,t)):this.styleTween(t,function(t,e,n){var o,i,r=n+"";return function(){var s=on(this,t);return s===r?null:s===o?i:i=e(o=s,n)}}(t,o,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==e)return this.tween(o,null);if("function"!=typeof e)throw new Error;return this.tween(o,function(t,e,n){var o,i;function r(){var r=e.apply(this,arguments);return r!==i&&(o=(i=r)&&function(t,e,n){return function(o){this.style.setProperty(t,e.call(this,o),n)}}(t,r,n)),o}return r._value=e,r}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(xi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function o(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&function(t){return function(e){this.textContent=t.call(this,e)}}(o)),e}return o._value=t,o}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o,i=yi(this.node(),n).tween,r=0,s=i.length;r<s;++r)if((o=i[r]).name===t)return o.value;return null}return this.each((null==e?$i:vi)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?zi:Ni)(e,t)):yi(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Li:Ii)(e,t)):yi(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){mi(this,t).ease=e}}(e,t)):yi(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;mi(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,o=n._id,i=n.size();return new Promise((function(r,s){var a={value:s},l={value:function(){0==--i&&r()}};n.each((function(){var n=mi(this,o),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})),0===i&&r()}))},[Symbol.iterator]:Fi[Symbol.iterator]};var Wi={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Xi(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Dn.prototype.interrupt=function(t){return this.each((function(){wi(this,t)}))},Dn.prototype.transition=function(t){var e,n;t instanceof Hi?(e=t._id,t=t._name):(e=Vi(),(n=Wi).time=ii(),t=null==t?null:t+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var s,a=o[r],l=a.length,c=0;c<l;++c)(s=a[c])&&fi(s,t,e,c,a,n||Xi(s,e));return new Hi(o,this._parents,t,e)};var Yi=t=>()=>t;function Ri(t,{sourceEvent:e,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Zi(t,e,n){this.k=t,this.x=e,this.y=n}Zi.prototype={constructor:Zi,scale:function(t){return 1===t?this:new Zi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Zi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bi=new Zi(1,0,0);function Ki(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Bi;return t.__zoom}function Gi(t){t.stopImmediatePropagation()}function ji(t){t.preventDefault(),t.stopImmediatePropagation()}function qi(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Qi(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Ui(){return this.__zoom||Bi}function Ji(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function tr(){return navigator.maxTouchPoints||"ontouchstart"in this}function er(t,e,n){var o=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],r=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function nr(){var t,e,n,o=qi,i=Qi,r=er,s=Ji,a=tr,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=jo,h=$e("start","zoom","end"),p=0,f=10;function g(t){t.property("__zoom",Ui).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",_).filter(a).on("touchstart.zoom",S).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new Zi(e,t.x,t.y)}function y(t,e,n){var o=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return o===t.x&&i===t.y?t:new Zi(t.k,o,i)}function w(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function $(t,e,n,o){t.on("start.zoom",(function(){v(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){v(this,arguments).event(o).end()})).tween("zoom",(function(){var t=this,r=arguments,s=v(t,r).event(o),a=i.apply(t,r),l=null==n?w(a):"function"==typeof n?n.apply(t,r):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),d=t.__zoom,h="function"==typeof e?e.apply(t,r):e,p=u(d.invert(l).concat(c/d.k),h.invert(l).concat(c/h.k));return function(t){if(1===t)t=h;else{var e=p(t),n=c/e[2];t=new Zi(n,l[0]-e[0]*n,l[1]-e[1]*n)}s.zoom(null,t)}}))}function v(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function b(t,...e){if(o.apply(this,arguments)){var n=v(this,e).event(t),i=this.__zoom,a=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,s.apply(this,arguments)))),d=Tn(t);if(n.wheel)n.mouse[0][0]===d[0]&&n.mouse[0][1]===d[1]||(n.mouse[1]=i.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(i.k===a)return;n.mouse=[d,i.invert(d)],wi(this),n.start()}ji(t),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",r(y(m(i,a),n.mouse[0],n.mouse[1]),n.extent,c))}}function k(t,...e){if(!n&&o.apply(this,arguments)){var i=t.currentTarget,s=v(this,e,!0).event(t),a=An(t.view).on("mousemove.zoom",(function(t){if(ji(t),!s.moved){var e=t.clientX-d,n=t.clientY-u;s.moved=e*e+n*n>p}s.event(t).zoom("mouse",r(y(s.that.__zoom,s.mouse[0]=Tn(t,i),s.mouse[1]),s.extent,c))}),!0).on("mouseup.zoom",(function(t){a.on("mousemove.zoom mouseup.zoom",null),Yn(t.view,s.moved),ji(t),s.event(t).end()}),!0),l=Tn(t,i),d=t.clientX,u=t.clientY;Xn(t.view),Gi(t),s.mouse=[l,this.__zoom.invert(l)],wi(this),s.start()}}function _(t,...e){if(o.apply(this,arguments)){var n=this.__zoom,s=Tn(t.changedTouches?t.changedTouches[0]:t,this),a=n.invert(s),l=n.k*(t.shiftKey?.5:2),u=r(y(m(n,l),s,a),i.apply(this,e),c);ji(t),d>0?An(this).transition().duration(d).call($,u,s,t):An(this).call(g.transform,u,s,t)}}function S(n,...i){if(o.apply(this,arguments)){var r,s,a,l,c=n.touches,d=c.length,u=v(this,i,n.changedTouches.length===d).event(n);for(Gi(n),s=0;s<d;++s)l=[l=Tn(a=c[s],this),this.__zoom.invert(l),a.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,r=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),r&&(u.taps<2&&(e=l[0],t=setTimeout((function(){t=null}),500)),wi(this),u.start())}}function E(t,...e){if(this.__zooming){var n,o,i,s,a=v(this,e).event(t),l=t.changedTouches,d=l.length;for(ji(t),n=0;n<d;++n)i=Tn(o=l[n],this),a.touch0&&a.touch0[2]===o.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===o.identifier&&(a.touch1[0]=i);if(o=a.that.__zoom,a.touch1){var u=a.touch0[0],h=a.touch0[1],p=a.touch1[0],f=a.touch1[1],g=(g=p[0]-u[0])*g+(g=p[1]-u[1])*g,w=(w=f[0]-h[0])*w+(w=f[1]-h[1])*w;o=m(o,Math.sqrt(g/w)),i=[(u[0]+p[0])/2,(u[1]+p[1])/2],s=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],s=a.touch0[1]}a.zoom("touch",r(y(o,i,s),a.extent,c))}}function C(t,...o){if(this.__zooming){var i,r,s=v(this,o).event(t),a=t.changedTouches,l=a.length;for(Gi(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),i=0;i<l;++i)r=a[i],s.touch0&&s.touch0[2]===r.identifier?delete s.touch0:s.touch1&&s.touch1[2]===r.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(r=Tn(r,this),Math.hypot(e[0]-r[0],e[1]-r[1])<f)){var c=An(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(t,e,n,o){var i=t.selection?t.selection():t;i.property("__zoom",Ui),t!==i?$(t,e,n,o):i.interrupt().each((function(){v(this,arguments).event(o).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},g.scaleBy=function(t,e,n,o){g.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,o)},g.scaleTo=function(t,e,n,o){g.transform(t,(function(){var t=i.apply(this,arguments),o=this.__zoom,s=null==n?w(t):"function"==typeof n?n.apply(this,arguments):n,a=o.invert(s),l="function"==typeof e?e.apply(this,arguments):e;return r(y(m(o,l),s,a),t,c)}),n,o)},g.translateBy=function(t,e,n,o){g.transform(t,(function(){return r(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,o)},g.translateTo=function(t,e,n,o,s){g.transform(t,(function(){var t=i.apply(this,arguments),s=this.__zoom,a=null==o?w(t):"function"==typeof o?o.apply(this,arguments):o;return r(Bi.translate(a[0],a[1]).scale(s.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}),o,s)},x.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=An(this.that).datum();h.call(t,this.that,new Ri(t,{sourceEvent:this.sourceEvent,target:g,type:t,transform:this.that.__zoom,dispatch:h}),e)}},g.wheelDelta=function(t){return arguments.length?(s="function"==typeof t?t:Yi(+t),g):s},g.filter=function(t){return arguments.length?(o="function"==typeof t?t:Yi(!!t),g):o},g.touchable=function(t){return arguments.length?(a="function"==typeof t?t:Yi(!!t),g):a},g.extent=function(t){return arguments.length?(i="function"==typeof t?t:Yi([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):i},g.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],g):[l[0],l[1]]},g.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(t){return arguments.length?(r=t,g):r},g.duration=function(t){return arguments.length?(d=+t,g):d},g.interpolate=function(t){return arguments.length?(u=t,g):u},g.on=function(){var t=h.on.apply(h,arguments);return t===h?g:t},g.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,g):Math.sqrt(p)},g.tapDistance=function(t){return arguments.length?(f=+t,g):f},g}Ki.prototype=Zi.prototype;const or=t=>`Node type "${t}" not found. Using fallback type "default".`,ir=()=>"Only child nodes can use a parent extent.",rr=(t,{id:e,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${t} handle id: "${"source"===t?n:o}", edge id: ${e}.`,sr=t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,ar=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var lr,cr,dr;!function(t){t.Strict="strict",t.Loose="loose"}(lr||(lr={})),function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"}(cr||(cr={})),function(t){t.Partial="partial",t.Full="full"}(dr||(dr={}));const ur={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var hr,pr,fr;!function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"}(hr||(hr={})),function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"}(pr||(pr={})),function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"}(fr||(fr={}));const gr={[fr.Left]:fr.Right,[fr.Right]:fr.Left,[fr.Top]:fr.Bottom,[fr.Bottom]:fr.Top};function mr(t,e,n){if(!n)return;const o=[];t.forEach(((t,n)=>{e?.has(n)||o.push(t)})),o.length&&n(o)}function yr(t){return null===t?null:t?"valid":"invalid"}const wr=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),$r=(t,e=[0,0])=>{const{width:n,height:o}=jr(t),i=t.origin??e,r=n*i[0],s=o*i[1];return{x:t.position.x-r,y:t.position.y-s}},vr=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(0===t.length)return{x:0,y:0,width:0,height:0};const n=t.reduce(((t,n)=>{const o="string"==typeof n;let i=e.nodeLookup||o?void 0:n;e.nodeLookup&&(i=o?e.nodeLookup.get(n):wr(n)?n:e.nodeLookup.get(n.id));const r=i?Tr(i,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Lr(t,r)}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Dr(n)},xr=(t,e={})=>{if(0===t.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach((t=>{if(void 0===e.filter||e.filter(t)){const e=Tr(t);n=Lr(n,e)}})),Dr(n)},br=(t,e,[n,o,i]=[0,0,1],r=!1,s=!1)=>{const a={...Rr(e,[n,o,i]),width:e.width/i,height:e.height/i},l=[];for(const e of t.values()){const{measured:t,selectable:n=!0,hidden:o=!1}=e;if(s&&!n||o)continue;const i=t.width??e.width??e.initialWidth??null,c=t.height??e.height??e.initialHeight??null,d=Vr(a,Ar(e)),u=(i??0)*(c??0),h=r&&d>0;(!e.internals.handleBounds||h||d>=u||e.dragging)&&l.push(e)}return l},kr=(t,e)=>{const n=new Set;return t.forEach((t=>{n.add(t.id)})),e.filter((t=>n.has(t.source)||n.has(t.target)))};function _r(t,e){const n=new Map,o=e?.nodes?new Set(e.nodes.map((t=>t.id))):null;return t.forEach((t=>{!(t.measured.width&&t.measured.height&&(e?.includeHiddenNodes||!t.hidden))||o&&!o.has(t.id)||n.set(t.id,t)})),n}async function Sr({nodes:t,width:e,height:n,panZoom:o,minZoom:i,maxZoom:r},s){if(0===t.size)return Promise.resolve(!1);const a=xr(t),l=Br(a,e,n,s?.minZoom??i,s?.maxZoom??r,s?.padding??.1);return await o.setViewport(l,{duration:s?.duration}),Promise.resolve(!0)}function Er({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:i,onError:r}){const s=n.get(t),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??o;let u=i;if("parent"!==s.extent||s.expandParent)a&&Gr(s.extent)&&(u=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);else if(a){const t=a.measured.width,e=a.measured.height;t&&e&&(u=[[l,c],[l+t,c+e]])}else r?.("005",ir());const h=Gr(u)?Pr(e,u,s.measured):e;return{position:{x:h.x-l+s.measured.width*d[0],y:h.y-c+s.measured.height*d[1]},positionAbsolute:h}}async function Cr({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:o,onBeforeDelete:i}){const r=new Set(t.map((t=>t.id))),s=[];for(const t of n){if(!1===t.deletable)continue;const e=r.has(t.id),n=!e&&t.parentId&&s.find((e=>e.id===t.parentId));(e||n)&&s.push(t)}const a=new Set(e.map((t=>t.id))),l=o.filter((t=>!1!==t.deletable)),c=kr(s,l);for(const t of l){a.has(t.id)&&!c.find((e=>e.id===t.id))&&c.push(t)}if(!i)return{edges:c,nodes:s};const d=await i({nodes:s,edges:c});return"boolean"==typeof d?d?{edges:c,nodes:s}:{edges:[],nodes:[]}:d}const Or=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Pr=(t={x:0,y:0},e,n)=>({x:Or(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Or(t.y,e[0][1],e[1][1]-(n?.height??0))});function Mr(t,e,n){const{width:o,height:i}=jr(n),{x:r,y:s}=n.internals.positionAbsolute;return Pr(t,[[r,s],[r+o,s+i]],e)}const zr=(t,e,n)=>t<e?Or(Math.abs(t-e),1,e)/e:t>n?-Or(Math.abs(t-n),1,e)/e:0,Nr=(t,e,n=15,o=40)=>[zr(t.x,o,e.width-o)*n,zr(t.y,o,e.height-o)*n],Lr=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Ir=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),Dr=({x:t,y:e,x2:n,y2:o})=>({x:t,y:e,width:n-t,height:o-e}),Ar=(t,e=[0,0])=>{const{x:n,y:o}=wr(t)?t.internals.positionAbsolute:$r(t,e);return{x:n,y:o,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Tr=(t,e=[0,0])=>{const{x:n,y:o}=wr(t)?t.internals.positionAbsolute:$r(t,e);return{x:n,y:o,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:o+(t.measured?.height??t.height??t.initialHeight??0)}},Hr=(t,e)=>Dr(Lr(Ir(t),Ir(e))),Vr=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),o=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*o)},Fr=t=>Wr(t.width)&&Wr(t.height)&&Wr(t.x)&&Wr(t.y),Wr=t=>!isNaN(t)&&isFinite(t),Xr=(t,e)=>{},Yr=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Rr=({x:t,y:e},[n,o,i],r=!1,s=[1,1])=>{const a={x:(t-n)/i,y:(e-o)/i};return r?Yr(a,s):a},Zr=({x:t,y:e},[n,o,i])=>({x:t*i+n,y:e*i+o}),Br=(t,e,n,o,i,r)=>{const s=e/(t.width*(1+r)),a=n/(t.height*(1+r)),l=Math.min(s,a),c=Or(l,o,i);return{x:e/2-(t.x+t.width/2)*c,y:n/2-(t.y+t.height/2)*c,zoom:c}},Kr=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function Gr(t){return void 0!==t&&"parent"!==t}function jr(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function qr(t){return void 0!==(t.measured?.width??t.width??t.initialWidth)&&void 0!==(t.measured?.height??t.height??t.initialHeight)}function Qr(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:o}){const{x:i,y:r}=es(t),s=Rr({x:i,y:r},o),{x:a,y:l}=n?Yr(s,e):s;return{xSnapped:a,ySnapped:l,...s}}const Ur=t=>({width:t.offsetWidth,height:t.offsetHeight}),Jr=["INPUT","SELECT","TEXTAREA"];const ts=t=>"clientX"in t,es=(t,e)=>{const n=ts(t),o=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:o-(e?.left??0),y:i-(e?.top??0)}},ns=(t,e,n,o,i)=>{const r=e.querySelectorAll(`.${t}`);return r&&r.length?Array.from(r).map((e=>{const r=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),type:t,nodeId:i,position:e.getAttribute("data-handlepos"),x:(r.left-n.left)/o,y:(r.top-n.top)/o,...Ur(e)}})):null};function os(t,e){return t>=0?.5*t:25*e*Math.sqrt(-t)}function is({pos:t,x1:e,y1:n,x2:o,y2:i,c:r}){switch(t){case fr.Left:return[e-os(e-o,r),n];case fr.Right:return[e+os(o-e,r),n];case fr.Top:return[e,n-os(n-i,r)];case fr.Bottom:return[e,n+os(i-n,r)]}}function rs({sourceX:t,sourceY:e,sourcePosition:n=fr.Bottom,targetX:o,targetY:i,targetPosition:r=fr.Top,curvature:s=.25}){const[a,l]=is({pos:n,x1:t,y1:e,x2:o,y2:i,c:s}),[c,d]=is({pos:r,x1:o,y1:i,x2:t,y2:e,c:s}),[u,h,p,f]=function({sourceX:t,sourceY:e,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:s,targetControlY:a}){const l=.125*t+.375*i+.375*s+.125*n,c=.125*e+.375*r+.375*a+.125*o;return[l,c,Math.abs(l-t),Math.abs(c-e)]}({sourceX:t,sourceY:e,targetX:o,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${t},${e} C${a},${l} ${c},${d} ${o},${i}`,u,h,p,f]}function ss({sourceX:t,sourceY:e,targetX:n,targetY:o}){const i=Math.abs(n-t)/2,r=n<t?n+i:n-i,s=Math.abs(o-e)/2;return[r,o<e?o+s:o-s,i,s]}function as({sourceNode:t,targetNode:e,selected:n=!1,zIndex:o=0,elevateOnSelect:i=!1}){if(!i)return o;const r=n||e.selected||t.selected,s=Math.max(t.internals.z||0,e.internals.z||0,1e3);return o+(r?s:0)}const ls=({source:t,sourceHandle:e,target:n,targetHandle:o})=>`xy-edge__${t}${e||""}-${n}${o||""}`;function cs({sourceX:t,sourceY:e,targetX:n,targetY:o}){const[i,r,s,a]=ss({sourceX:t,sourceY:e,targetX:n,targetY:o});return[`M ${t},${e}L ${n},${o}`,i,r,s,a]}const ds={[fr.Left]:{x:-1,y:0},[fr.Right]:{x:1,y:0},[fr.Top]:{x:0,y:-1},[fr.Bottom]:{x:0,y:1}},us=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function hs({source:t,sourcePosition:e=fr.Bottom,target:n,targetPosition:o=fr.Top,center:i,offset:r}){const s=ds[e],a=ds[o],l={x:t.x+s.x*r,y:t.y+s.y*r},c={x:n.x+a.x*r,y:n.y+a.y*r},d=(({source:t,sourcePosition:e=fr.Bottom,target:n})=>e===fr.Left||e===fr.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:l,sourcePosition:e,target:c}),u=0!==d.x?"x":"y",h=d[u];let p,f,g=[];const m={x:0,y:0},y={x:0,y:0},[w,$,v,x]=ss({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[u]*a[u]==-1){p=i.x??w,f=i.y??$;const t=[{x:p,y:l.y},{x:p,y:c.y}],e=[{x:l.x,y:f},{x:c.x,y:f}];g=s[u]===h?"x"===u?t:e:"x"===u?e:t}else{const i=[{x:l.x,y:c.y}],d=[{x:c.x,y:l.y}];if(g="x"===u?s.x===h?d:i:s.y===h?i:d,e===o){const e=Math.abs(t[u]-n[u]);if(e<=r){const o=Math.min(r-1,r-e);s[u]===h?m[u]=(l[u]>t[u]?-1:1)*o:y[u]=(c[u]>n[u]?-1:1)*o}}if(e!==o){const t="x"===u?"y":"x",e=s[u]===a[t],n=l[t]>c[t],o=l[t]<c[t];(1===s[u]&&(!e&&n||e&&o)||1!==s[u]&&(!e&&o||e&&n))&&(g="x"===u?i:d)}const w={x:l.x+m.x,y:l.y+m.y},$={x:c.x+y.x,y:c.y+y.y};Math.max(Math.abs(w.x-g[0].x),Math.abs($.x-g[0].x))>=Math.max(Math.abs(w.y-g[0].y),Math.abs($.y-g[0].y))?(p=(w.x+$.x)/2,f=g[0].y):(p=g[0].x,f=(w.y+$.y)/2)}return[[t,{x:l.x+m.x,y:l.y+m.y},...g,{x:c.x+y.x,y:c.y+y.y},n],p,f,v,x]}function ps({sourceX:t,sourceY:e,sourcePosition:n=fr.Bottom,targetX:o,targetY:i,targetPosition:r=fr.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20}){const[d,u,h,p,f]=hs({source:{x:t,y:e},sourcePosition:n,target:{x:o,y:i},targetPosition:r,center:{x:a,y:l},offset:c});return[d.reduce(((t,e,n)=>{let o="";return o=n>0&&n<d.length-1?function(t,e,n,o){const i=Math.min(us(t,e)/2,us(e,n)/2,o),{x:r,y:s}=e;if(t.x===r&&r===n.x||t.y===s&&s===n.y)return`L${r} ${s}`;if(t.y===s)return`L ${r+i*(t.x<n.x?-1:1)},${s}Q ${r},${s} ${r},${s+i*(t.y<n.y?1:-1)}`;const a=t.x<n.x?1:-1;return`L ${r},${s+i*(t.y<n.y?-1:1)}Q ${r},${s} ${r+i*a},${s}`}(d[n-1],e,d[n+1],s):`${0===n?"M":"L"}${e.x} ${e.y}`,t+=o}),""),u,h,p,f]}function fs(t){return t&&!(!t.internals.handleBounds&&!t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function gs(t){if(!t)return null;const e=[],n=[];for(const o of t)o.width=o.width??1,o.height=o.height??1,"source"===o.type?e.push(o):"target"===o.type&&n.push(o);return{source:e,target:n}}function ms(t,e,n=fr.Left,o=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,r=(e?.y??0)+t.internals.positionAbsolute.y,{width:s,height:a}=e??jr(t);if(o)return{x:i+s/2,y:r+a/2};switch(e?.position??n){case fr.Top:return{x:i+s/2,y:r};case fr.Right:return{x:i+s,y:r+a/2};case fr.Bottom:return{x:i+s/2,y:r+a};case fr.Left:return{x:i,y:r+a/2}}}function ys(t,e){return t&&(e?t.find((t=>t.id===e)):t[0])||null}function ws(t,e){if(!t)return"";if("string"==typeof t)return t;return`${e?`${e}__`:""}${Object.keys(t).sort().map((e=>`${e}=${t[e]}`)).join("&")}`}const $s={nodeOrigin:[0,0],nodeExtent:ar,elevateNodesOnSelect:!0,defaults:{}},vs={...$s,checkEquality:!0};function xs(t,e){const n={...t};for(const t in e)void 0!==e[t]&&(n[t]=e[t]);return n}function bs(t,e,n,o){const i=xs(vs,o),r=new Map(e),s=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const a of t){let t=r.get(a.id);if(i.checkEquality&&a===t?.internals.userNode)e.set(a.id,t);else{const n=$r(a,i.nodeOrigin),o=Gr(a.extent)?a.extent:i.nodeExtent,r=Pr(n,o,jr(a));t={...i.defaults,...a,measured:{width:a.measured?.width,height:a.measured?.height},internals:{positionAbsolute:r,handleBounds:a.measured?t?.internals.handleBounds:void 0,z:_s(a,s),userNode:a}},e.set(a.id,t)}a.parentId&&ks(t,e,n,o)}}function ks(t,e,n,o){const{elevateNodesOnSelect:i,nodeOrigin:r,nodeExtent:s}=xs($s,o),a=t.parentId,l=e.get(a);if(!l)return void console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}(t,n);const c=i?1e3:0,{x:d,y:u,z:h}=function(t,e,n,o,i){const{x:r,y:s}=e.internals.positionAbsolute,a=jr(t),l=$r(t,n),c=Gr(t.extent)?Pr(l,t.extent,a):l;let d=Pr({x:r+c.x,y:s+c.y},o,a);"parent"===t.extent&&(d=Mr(d,a,e));const u=_s(t,i),h=e.internals.z??0;return{x:d.x,y:d.y,z:h>u?h:u}}(t,l,r,s,c),{positionAbsolute:p}=t.internals,f=d!==p.x||u!==p.y;(f||h!==t.internals.z)&&(t.internals={...t.internals,positionAbsolute:f?{x:d,y:u}:p,z:h})}function _s(t,e){return(Wr(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function Ss(t,e,n,o,i,r){const s=o?.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const o of t.values()){const t=e.get(o.id);if(t)if(t.hidden)t.internals={...t.internals,handleBounds:void 0},a=!0;else{const s=Ur(o.nodeElement),c=t.measured.width!==s.width||t.measured.height!==s.height;if(!(!s.width||!s.height||!c&&t.internals.handleBounds&&!o.force)){const h=o.nodeElement.getBoundingClientRect(),p=Gr(t.extent)?t.extent:r;let{positionAbsolute:f}=t.internals;t.parentId&&"parent"===t.extent?f=Mr(f,s,e.get(t.parentId)):p&&(f=Pr(f,p,s)),t.measured=s,t.internals={...t.internals,positionAbsolute:f,handleBounds:{source:ns("source",o.nodeElement,h,d,t.id),target:ns("target",o.nodeElement,h,d,t.id)}},t.parentId&&ks(t,e,n,{nodeOrigin:i}),a=!0,c&&(l.push({id:t.id,type:"dimensions",dimensions:s}),t.expandParent&&t.parentId&&u.push({id:t.id,parentId:t.parentId,rect:Ar(t,i)}))}}}if(u.length>0){const t=function(t,e,n,o=[0,0]){const i=[],r=new Map;for(const n of t){const t=e.get(n.parentId);if(!t)continue;const o=r.get(n.parentId)?.expandedRect??Ar(t),i=Hr(o,n.rect);r.set(n.parentId,{expandedRect:i,parent:t})}return r.size>0&&r.forEach((({expandedRect:e,parent:r},s)=>{const a=r.internals.positionAbsolute,l=jr(r),c=r.origin??o,d=e.x<a.x?Math.round(Math.abs(a.x-e.x)):0,u=e.y<a.y?Math.round(Math.abs(a.y-e.y)):0,h=Math.max(l.width,Math.round(e.width)),p=Math.max(l.height,Math.round(e.height)),f=(h-l.width)*c[0],g=(p-l.height)*c[1];(d>0||u>0||f||g)&&(i.push({id:s,type:"position",position:{x:r.position.x-d+f,y:r.position.y-u+g}}),n.get(s)?.forEach((e=>{t.some((t=>t.id===e.id))||i.push({id:e.id,type:"position",position:{x:e.position.x+d,y:e.position.y+u}})}))),(l.width<e.width||l.height<e.height||d||u)&&i.push({id:s,type:"dimensions",setAttributes:!0,dimensions:{width:h+(d?c[0]*d-f:0),height:p+(u?c[1]*u-g:0)}})})),i}(u,e,n,i);l.push(...t)}return{changes:l,updatedInternals:a}}function Es(t,e,n){t.clear(),e.clear();for(const o of n){const{source:n,target:i,sourceHandle:r=null,targetHandle:s=null}=o,a=`${n}-source-${r}`,l=`${i}-target-${s}`,c=t.get(a)||new Map,d=t.get(l)||new Map,u={edgeId:o.id,source:n,target:i,sourceHandle:r,targetHandle:s};e.set(o.id,o),t.set(a,c.set(`${i}-${s}`,u)),t.set(l,d.set(`${n}-${r}`,u))}}function Cs(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return!!n&&(!!n.selected||Cs(n,e))}function Os(t,e,n){let o=t;do{if(o?.matches(e))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Ps({nodeId:t,dragItems:e,nodeLookup:n,dragging:o=!0}){const i=[];for(const[t,r]of e){const e=n.get(t)?.internals.userNode;e&&i.push({...e,position:r.position,dragging:o})}if(!t)return[i[0],i];const r=n.get(t)?.internals.userNode;return[r?{...r,position:e.get(t)?.position||r.position,dragging:o}:i[0],i]}function Ms({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:o,onDragStop:i}){let r={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},d=null,u=!1,h=null,p=!1;return{update:function({noDragClassName:f,handleSelector:g,domNode:m,isSelectable:y,nodeId:w,nodeClickDistance:$=0}){function v({x:t,y:n},i){const{nodeLookup:s,nodeExtent:l,snapGrid:c,snapToGrid:d,nodeOrigin:u,onNodeDrag:h,onSelectionDrag:p,onError:f,updateNodePositions:g}=e();r={x:t,y:n};let m=!1,y={x:0,y:0,x2:0,y2:0};if(a.size>1&&l){const t=xr(a);y=Ir(t)}for(const[e,o]of a){if(!s.has(e))continue;let i={x:t-o.distance.x,y:n-o.distance.y};d&&(i=Yr(i,c));let r=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];if(a.size>1&&l&&!o.extent){const{positionAbsolute:t}=o.internals,e=t.x-y.x+l[0][0],n=t.x+o.measured.width-y.x2+l[1][0];r=[[e,t.y-y.y+l[0][1]],[n,t.y+o.measured.height-y.y2+l[1][1]]]}const{position:h,positionAbsolute:p}=Er({nodeId:e,nextPosition:i,nodeLookup:s,nodeExtent:r,nodeOrigin:u,onError:f});m=m||o.position.x!==h.x||o.position.y!==h.y,o.position=h,o.internals.positionAbsolute=p}if(m&&(g(a,!0),i&&(o||h||!w&&p))){const[t,e]=Ps({nodeId:w,dragItems:a,nodeLookup:s});o?.(i,a,t,e),h?.(i,t,e),w||p?.(i,e)}}async function x(){if(!d)return;const{transform:t,panBy:n,autoPanSpeed:o}=e(),[i,a]=Nr(c,d,o);0===i&&0===a||(r.x=(r.x??0)-i/t[2],r.y=(r.y??0)-a/t[2],await n({x:i,y:a})&&v(r,null)),s=requestAnimationFrame(x)}function b(o){const{nodeLookup:i,multiSelectionActive:s,nodesDraggable:l,transform:c,snapGrid:d,snapToGrid:h,selectNodesOnDrag:p,onNodeDragStart:f,onSelectionDragStart:g,unselectNodesAndEdges:m}=e();u=!0,p&&y||s||!w||i.get(w)?.selected||m(),y&&p&&w&&t?.(w);const $=Qr(o.sourceEvent,{transform:c,snapGrid:d,snapToGrid:h});if(r=$,a=function(t,e,n,o){const i=new Map;for(const[r,s]of t)if((s.selected||s.id===o)&&(!s.parentId||!Cs(s,t))&&(s.draggable||e&&void 0===s.draggable)){const e=t.get(r);e&&i.set(r,{id:r,position:e.position||{x:0,y:0},distance:{x:n.x-e.internals.positionAbsolute.x,y:n.y-e.internals.positionAbsolute.y},extent:e.extent,parentId:e.parentId,origin:e.origin,expandParent:e.expandParent,internals:{positionAbsolute:e.internals.positionAbsolute||{x:0,y:0}},measured:{width:e.measured.width??0,height:e.measured.height??0}})}return i}(i,l,$,w),a.size>0&&(n||f||!w&&g)){const[t,e]=Ps({nodeId:w,dragItems:a,nodeLookup:i});n?.(o.sourceEvent,a,t,e),f?.(o.sourceEvent,t,e),w||g?.(o.sourceEvent,e)}}h=An(m);const k=function(){var t,e,n,o,i=Bn,r=Kn,s=Gn,a=jn,l={},c=$e("start","drag","end"),d=0,u=0;function h(t){t.on("mousedown.drag",p).filter(a).on("touchstart.drag",m).on("touchmove.drag",y,Hn).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(s,a){if(!o&&i.call(this,s,a)){var l=$(this,r.call(this,s,a),s,a,"mouse");l&&(An(s.view).on("mousemove.drag",f,Vn).on("mouseup.drag",g,Vn),Xn(s.view),Fn(s),n=!1,t=s.clientX,e=s.clientY,l("start",s))}}function f(o){if(Wn(o),!n){var i=o.clientX-t,r=o.clientY-e;n=i*i+r*r>u}l.mouse("drag",o)}function g(t){An(t.view).on("mousemove.drag mouseup.drag",null),Yn(t.view,n),Wn(t),l.mouse("end",t)}function m(t,e){if(i.call(this,t,e)){var n,o,s=t.changedTouches,a=r.call(this,t,e),l=s.length;for(n=0;n<l;++n)(o=$(this,a,t,e,s[n].identifier,s[n]))&&(Fn(t),o("start",t,s[n]))}}function y(t){var e,n,o=t.changedTouches,i=o.length;for(e=0;e<i;++e)(n=l[o[e].identifier])&&(Wn(t),n("drag",t,o[e]))}function w(t){var e,n,i=t.changedTouches,r=i.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),e=0;e<r;++e)(n=l[i[e].identifier])&&(Fn(t),n("end",t,i[e]))}function $(t,e,n,o,i,r){var a,u,p,f=c.copy(),g=Tn(r||n,e);if(null!=(p=s.call(t,new Zn("beforestart",{sourceEvent:n,target:h,identifier:i,active:d,x:g[0],y:g[1],dx:0,dy:0,dispatch:f}),o)))return a=p.x-g[0]||0,u=p.y-g[1]||0,function n(r,s,c){var m,y=g;switch(r){case"start":l[i]=n,m=d++;break;case"end":delete l[i],--d;case"drag":g=Tn(c||s,e),m=d}f.call(r,t,new Zn(r,{sourceEvent:s,subject:p,target:h,identifier:i,active:m,x:g[0]+a,y:g[1]+u,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:f}),o)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:Rn(!!t),h):i},h.container=function(t){return arguments.length?(r="function"==typeof t?t:Rn(t),h):r},h.subject=function(t){return arguments.length?(s="function"==typeof t?t:Rn(t),h):s},h.touchable=function(t){return arguments.length?(a="function"==typeof t?t:Rn(!!t),h):a},h.on=function(){var t=c.on.apply(c,arguments);return t===c?h:t},h.clickDistance=function(t){return arguments.length?(u=(t=+t)*t,h):Math.sqrt(u)},h}().clickDistance($).on("start",(t=>{const{domNode:n,nodeDragThreshold:o,transform:i,snapGrid:s,snapToGrid:a}=e();p=!1,0===o&&b(t);const l=Qr(t.sourceEvent,{transform:i,snapGrid:s,snapToGrid:a});r=l,d=n?.getBoundingClientRect()||null,c=es(t.sourceEvent,d)})).on("drag",(t=>{const{autoPanOnNodeDrag:n,transform:o,snapGrid:i,snapToGrid:s,nodeDragThreshold:h,nodeLookup:f}=e(),g=Qr(t.sourceEvent,{transform:o,snapGrid:i,snapToGrid:s});if(("touchmove"===t.sourceEvent.type&&t.sourceEvent.touches.length>1||w&&!f.has(w))&&(p=!0),!p){if(!l&&n&&u&&(l=!0,x()),!u){const e=g.xSnapped-(r.x??0),n=g.ySnapped-(r.y??0);Math.sqrt(e*e+n*n)>h&&b(t)}(r.x!==g.xSnapped||r.y!==g.ySnapped)&&a&&u&&(c=es(t.sourceEvent,d),v(g,t.sourceEvent))}})).on("end",(t=>{if(u&&!p&&(l=!1,u=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:n,updateNodePositions:o,onNodeDragStop:r,onSelectionDragStop:s}=e();if(o(a,!1),i||r||!w&&s){const[e,o]=Ps({nodeId:w,dragItems:a,nodeLookup:n,dragging:!1});i?.(t.sourceEvent,a,e,o),r?.(t.sourceEvent,e,o),w||s?.(t.sourceEvent,o)}}})).filter((t=>{const e=t.target;return!t.button&&(!f||!Os(e,`.${f}`,m))&&(!g||Os(e,g,m))}));h.call(k)},destroy:function(){h?.on(".drag",null)}}}function zs(t,e,n,o){let i=[],r=1/0;const s=function(t,e,n){const o=[],i={x:t.x-n,y:t.y-n,width:2*n,height:2*n};for(const t of e.values())Vr(i,Ar(t))>0&&o.push(t);return o}(t,n,e+250);for(const n of s){const s=[...n.internals.handleBounds?.source??[],...n.internals.handleBounds?.target??[]];for(const a of s){if(o.nodeId===a.nodeId&&o.type===a.type&&o.id===a.id)continue;const{x:s,y:l}=ms(n,a,a.position,!0),c=Math.sqrt(Math.pow(s-t.x,2)+Math.pow(l-t.y,2));c>e||(c<r?(i=[{...a,x:s,y:l}],r=c):c===r&&i.push({...a,x:s,y:l}))}}if(!i.length)return null;if(i.length>1){const t="source"===o.type?"target":"source";return i.find((e=>e.type===t))??i[0]}return i[0]}function Ns(t,e,n,o,i,r=!1){const s=o.get(t);if(!s)return null;const a="strict"===i?s.internals.handleBounds?.[e]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],l=(n?a?.find((t=>t.id===n)):a?.[0])??null;return l&&r?{...l,...ms(s,l,l.position,!0)}:l}function Ls(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}const Is=()=>!0;function Ds(t,{handle:e,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:r,doc:s,lib:a,flowId:l,isValidConnection:c=Is,nodeLookup:d}){const u="target"===r,h=e?s.querySelector(`.${a}-flow__handle[data-id="${l}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:p,y:f}=es(t),g=s.elementFromPoint(p,f),m=g?.classList.contains(`${a}-flow__handle`)?g:h,y={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){const t=Ls(void 0,m),e=m.getAttribute("data-nodeid"),r=m.getAttribute("data-handleid"),s=m.classList.contains("connectable"),a=m.classList.contains("connectableend");if(!e||!t)return y;const l={source:u?e:o,sourceHandle:u?r:i,target:u?o:e,targetHandle:u?i:r};y.connection=l;const h=s&&a&&(n===lr.Strict?u&&"source"===t||!u&&"target"===t:e!==o||r!==i);y.isValid=h&&c(l),y.toHandle=Ns(e,t,r,d,n,!1)}return y}const As={onPointerDown:function(t,{connectionMode:e,connectionRadius:n,handleId:o,nodeId:i,edgeUpdaterType:r,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:u,panBy:h,cancelConnection:p,onConnectStart:f,onConnect:g,onConnectEnd:m,isValidConnection:y=Is,onReconnectEnd:w,updateConnection:$,getTransform:v,getFromHandle:x,autoPanSpeed:b}){const k=(t=>t.getRootNode?.()||window?.document)(t.target);let _,S=0;const{x:E,y:C}=es(t),O=k?.elementFromPoint(E,C),P=Ls(r,O),M=a?.getBoundingClientRect();if(!M||!P)return;const z=Ns(i,P,o,l,e);if(!z)return;let N=es(t,M),L=!1,I=null,D=!1,A=null;function T(){if(!d||!M)return;const[t,e]=Nr(N,M,b);h({x:t,y:e}),S=requestAnimationFrame(T)}const H={...z,nodeId:i,type:P,position:z.position},V=l.get(i),F={inProgress:!0,isValid:null,from:ms(V,H,fr.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:V,to:N,toHandle:null,toPosition:gr[H.position],toNode:null};$(F);let W=F;function X(t){if(!x()||!H)return void Y(t);const r=v();N=es(t,M),_=zs(Rr(N,r,!1,[1,1]),n,l,H),L||(T(),L=!0);const a=Ds(t,{handle:_,connectionMode:e,fromNodeId:i,fromHandleId:o,fromType:s?"target":"source",isValidConnection:y,doc:k,lib:c,flowId:u,nodeLookup:l});A=a.handleDomNode,I=a.connection,D=function(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}(!!_,a.isValid);const d={...W,isValid:D,to:_&&D?Zr({x:_.x,y:_.y},r):N,toHandle:a.toHandle,toPosition:D&&a.toHandle?a.toHandle.position:gr[H.position],toNode:a.toHandle?l.get(a.toHandle.nodeId):null};D&&_&&W.toHandle&&d.toHandle&&W.toHandle.type===d.toHandle.type&&W.toHandle.nodeId===d.toHandle.nodeId&&W.toHandle.id===d.toHandle.id&&W.to.x===d.to.x&&W.to.y===d.to.y||($(d),W=d)}function Y(t){(_||A)&&I&&D&&g?.(I);const{inProgress:e,...n}=W,o={...n,toPosition:W.toHandle?W.toPosition:null};m?.(t,o),r&&w?.(t,o),p(),cancelAnimationFrame(S),L=!1,D=!1,I=null,A=null,k.removeEventListener("mousemove",X),k.removeEventListener("mouseup",Y),k.removeEventListener("touchmove",X),k.removeEventListener("touchend",Y)}f?.(t,{nodeId:i,handleId:o,handleType:P}),k.addEventListener("mousemove",X),k.addEventListener("mouseup",Y),k.addEventListener("touchmove",X),k.addEventListener("touchend",Y)},isValid:Ds};const Ts=t=>({x:t.x,y:t.y,zoom:t.k}),Hs=({x:t,y:e,zoom:n})=>Bi.translate(t,e).scale(n),Vs=(t,e)=>t.target.closest(`.${e}`),Fs=(t,e)=>2===e&&Array.isArray(t)&&t.includes(2),Ws=(t,e=0,n=()=>{})=>{const o="number"==typeof e&&e>0;return o||n(),o?t.transition().duration(e).on("end",n):t},Xs=t=>{const e=t.ctrlKey&&Kr()?10:1;return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*e};function Ys({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:o,translateExtent:i,viewport:r,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=t.getBoundingClientRect(),h=nr().clickDistance(!Wr(o)||o<0?0:o).scaleExtent([e,n]).translateExtent(i),p=An(t).call(h);w({x:r.x,y:r.y,zoom:Or(r.zoom,e,n)},[[0,0],[u.width,u.height]],i);const f=p.on("wheel.zoom"),g=p.on("dblclick.zoom");function m(t,e){return p?new Promise((n=>{h?.transform(Ws(p,e?.duration,(()=>n(!0))),t)})):Promise.resolve(!1)}function y(){h.on("zoom",null)}async function w(t,e,n){const o=Hs(t),i=h?.constrain()(o,e,n);return i&&await m(i),new Promise((t=>t(i)))}return h.wheelDelta(Xs),{update:function({noWheelClassName:t,noPanClassName:e,onPaneContextMenu:n,userSelectionActive:o,panOnScroll:i,panOnDrag:r,panOnScrollMode:u,panOnScrollSpeed:m,preventScrolling:w,zoomOnPinch:$,zoomOnScroll:v,zoomOnDoubleClick:x,zoomActivationKeyPressed:b,lib:k,onTransformChange:_}){o&&!d.isZoomingOrPanning&&y();const S=i&&!b&&!o?function({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:o,panOnScrollMode:i,panOnScrollSpeed:r,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(Vs(d,e))return!1;d.preventDefault(),d.stopImmediatePropagation();const u=n.property("__zoom").k||1;if(d.ctrlKey&&s){const t=Tn(d),e=Xs(d),i=u*Math.pow(2,e);return void o.scaleTo(n,i,t,d)}const h=1===d.deltaMode?20:1;let p=i===cr.Vertical?0:d.deltaX*h,f=i===cr.Horizontal?0:d.deltaY*h;!Kr()&&d.shiftKey&&i!==cr.Vertical&&(p=d.deltaY*h,f=0),o.translateBy(n,-p/u*r,-f/u*r,{internal:!0});const g=Ts(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,a?.(d,g)),t.isPanScrolling&&(l?.(d,g),t.panScrollTimeout=setTimeout((()=>{c?.(d,g),t.isPanScrolling=!1}),150))}}({zoomPanValues:d,noWheelClassName:t,d3Selection:p,d3Zoom:h,panOnScrollMode:u,panOnScrollSpeed:m,zoomOnPinch:$,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):function({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(o,i){if(!e&&"wheel"===o.type&&!o.ctrlKey||Vs(o,t))return null;o.preventDefault(),n.call(this,o,i)}}({noWheelClassName:t,preventScrolling:w,d3ZoomHandler:f});if(p.on("wheel.zoom",S,{passive:!1}),!o){const t=function({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const i=Ts(o.transform);t.mouseButton=o.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,"mousedown"===o.sourceEvent?.type&&e(!0),n&&n?.(o.sourceEvent,i)}}({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:a});h.on("start",t);const e=function({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:o,onPanZoom:i}){return r=>{t.usedRightMouseButton=!(!n||!Fs(e,t.mouseButton??0)),r.sourceEvent?.sync||o([r.transform.x,r.transform.y,r.transform.k]),i&&!r.sourceEvent?.internal&&i?.(r.sourceEvent,Ts(r.transform))}}({zoomPanValues:d,panOnDrag:r,onPaneContextMenu:!!n,onPanZoom:s,onTransformChange:_});h.on("zoom",e);const o=function({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:i,onPaneContextMenu:r}){return s=>{var a,l;if(!s.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,r&&Fs(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&r(s.sourceEvent),t.usedRightMouseButton=!1,o(!1),i&&(a=t.prevViewport,l=s.transform,a.x!==l.x||a.y!==l.y||a.zoom!==l.k))){const e=Ts(s.transform);t.prevViewport=e,clearTimeout(t.timerId),t.timerId=setTimeout((()=>{i?.(s.sourceEvent,e)}),n?150:0)}}}({zoomPanValues:d,panOnDrag:r,panOnScroll:i,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:c});h.on("end",o)}const E=function({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:o,panOnScroll:i,zoomOnDoubleClick:r,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c}){return d=>{const u=t||e,h=n&&d.ctrlKey;if(1===d.button&&"mousedown"===d.type&&(Vs(d,`${c}-flow__node`)||Vs(d,`${c}-flow__edge`)))return!0;if(!(o||u||i||r||n))return!1;if(s)return!1;if(Vs(d,a)&&"wheel"===d.type)return!1;if(Vs(d,l)&&("wheel"!==d.type||i&&"wheel"===d.type&&!t))return!1;if(!n&&d.ctrlKey&&"wheel"===d.type)return!1;if(!n&&"touchstart"===d.type&&d.touches?.length>1)return d.preventDefault(),!1;if(!u&&!i&&!h&&"wheel"===d.type)return!1;if(!o&&("mousedown"===d.type||"touchstart"===d.type))return!1;if(Array.isArray(o)&&!o.includes(d.button)&&"mousedown"===d.type)return!1;const p=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||"wheel"===d.type)&&p}}({zoomActivationKeyPressed:b,panOnDrag:r,zoomOnScroll:v,panOnScroll:i,zoomOnDoubleClick:x,zoomOnPinch:$,userSelectionActive:o,noPanClassName:e,noWheelClassName:t,lib:k});h.filter(E),x?p.on("dblclick.zoom",g):p.on("dblclick.zoom",null)},destroy:y,setViewport:async function(t,e){const n=Hs(t);return await m(n,e),new Promise((t=>t(n)))},setViewportConstrained:w,getViewport:function(){const t=p?Ki(p.node()):{x:0,y:0,k:1};return{x:t.x,y:t.y,zoom:t.k}},scaleTo:function(t,e){return p?new Promise((n=>{h?.scaleTo(Ws(p,e?.duration,(()=>n(!0))),t)})):Promise.resolve(!1)},scaleBy:function(t,e){return p?new Promise((n=>{h?.scaleBy(Ws(p,e?.duration,(()=>n(!0))),t)})):Promise.resolve(!1)},setScaleExtent:function(t){h?.scaleExtent(t)},setTranslateExtent:function(t){h?.translateExtent(t)},syncViewport:function(t){if(p){const e=Hs(t),n=p.property("__zoom");n.k===t.zoom&&n.x===t.x&&n.y===t.y||h?.transform(p,e,null,{sync:!0})}},setClickDistance:function(t){const e=!Wr(t)||t<0?0:t;h?.clickDistance(e)}}}var Rs;function Zs(t){let e,n,o,i,s,a;const l=t[45].default,c=h(l,t,t[44],null);return{c(){e=C("div"),c&&c.c(),L(e,"data-handleid",t[6]),L(e,"data-nodeid",t[14]),L(e,"data-handlepos",t[2]),L(e,"data-id",n=t[13]+"-"+t[14]+"-"+(t[0]||null)+"-"+t[1]),L(e,"class",o=ye(["svelte-flow__handle",`svelte-flow__handle-${t[2]}`,"nodrag","nopan",t[2],t[4]])),L(e,"style",t[3]),L(e,"role","button"),L(e,"tabindex","-1"),X(e,"valid",t[7]),X(e,"connectingto",t[5]),X(e,"connectingfrom",t[9]),X(e,"source",!t[11]),X(e,"target",t[11]),X(e,"connectablestart",t[12]),X(e,"connectableend",t[12]),X(e,"connectable",t[12]),X(e,"connectionindicator",t[12]&&(!t[10]||t[8]))},m(n,o){_(n,e,o),c&&c.m(e,null),i=!0,s||(a=[N(e,"mousedown",t[32]),N(e,"touchstart",t[32])],s=!0)},p(t,r){c&&c.p&&(!i||8192&r[1])&&g(c,l,t,t[44],i?f(l,t[44],r,null):m(t[44]),null),(!i||64&r[0])&&L(e,"data-handleid",t[6]),(!i||4&r[0])&&L(e,"data-handlepos",t[2]),(!i||8195&r[0]&&n!==(n=t[13]+"-"+t[14]+"-"+(t[0]||null)+"-"+t[1]))&&L(e,"data-id",n),(!i||20&r[0]&&o!==(o=ye(["svelte-flow__handle",`svelte-flow__handle-${t[2]}`,"nodrag","nopan",t[2],t[4]])))&&L(e,"class",o),(!i||8&r[0])&&L(e,"style",t[3]),(!i||148&r[0])&&X(e,"valid",t[7]),(!i||52&r[0])&&X(e,"connectingto",t[5]),(!i||532&r[0])&&X(e,"connectingfrom",t[9]),(!i||2068&r[0])&&X(e,"source",!t[11]),(!i||2068&r[0])&&X(e,"target",t[11]),(!i||4116&r[0])&&X(e,"connectablestart",t[12]),(!i||4116&r[0])&&X(e,"connectableend",t[12]),(!i||4116&r[0])&&X(e,"connectable",t[12]),(!i||5396&r[0])&&X(e,"connectionindicator",t[12]&&(!t[10]||t[8]))},i(t){i||(gt(c,t),i=!0)},o(t){mt(c,t),i=!1},d(t){t&&S(e),c&&c.d(t),s=!1,r(a)}}}function Bs(t,e,n){let o,i,r,s,a,l,c,d,h,p,f,g,m,y,w,$,v,x,b,k,_,S,E,C,O,{$$slots:P={},$$scope:M}=e,{id:z}=e,{type:N="source"}=e,{position:L=fr.Top}=e,{style:I}=e,{isValidConnection:D}=e,{onconnect:A}=e,{ondisconnect:T}=e,{isConnectable:H}=e,{class:V}=e;const F=q("svelteflow__node_id"),W=q("svelteflow__node_connectable");u(t,W,(t=>n(43,O=t)));const X=Fa(),{connectionMode:Y,domNode:R,nodeLookup:Z,connectionRadius:B,viewport:K,isValidConnection:G,lib:j,addEdge:Q,onedgecreate:U,panBy:J,cancelConnection:tt,updateConnection:et,autoPanOnConnect:nt,edges:ot,connectionLookup:it,onconnect:rt,onconnectstart:st,onconnectend:at,flowId:lt,connection:ct}=X;u(t,Y,(t=>n(40,p=t))),u(t,R,(t=>n(55,E=t))),u(t,Z,(t=>n(54,S=t))),u(t,B,(t=>n(56,C=t))),u(t,K,(t=>n(46,m=t))),u(t,G,(t=>n(51,x=t))),u(t,j,(t=>n(53,_=t))),u(t,U,(t=>n(50,v=t))),u(t,nt,(t=>n(52,k=t))),u(t,ot,(t=>n(42,g=t))),u(t,it,(t=>n(41,f=t))),u(t,rt,(t=>n(49,$=t))),u(t,st,(t=>n(48,w=t))),u(t,at,(t=>n(47,y=t))),u(t,lt,(t=>n(13,b=t))),u(t,ct,(t=>n(39,h=t)));let dt,ut=null;return t.$$set=t=>{"id"in t&&n(0,z=t.id),"type"in t&&n(1,N=t.type),"position"in t&&n(2,L=t.position),"style"in t&&n(3,I=t.style),"isValidConnection"in t&&n(33,D=t.isValidConnection),"onconnect"in t&&n(34,A=t.onconnect),"ondisconnect"in t&&n(35,T=t.ondisconnect),"isConnectable"in t&&n(36,H=t.isConnectable),"class"in t&&n(4,V=t.class),"$$scope"in t&&n(44,M=t.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&n(11,o="target"===N),4128&t.$$.dirty[1]&&n(12,i=void 0!==H?H:O),1&t.$$.dirty[0]&&n(6,r=z||null),3&t.$$.dirty[0]|3096&t.$$.dirty[1]&&(A||T)&&n(38,dt=f.get(`${F}-${N}-${z||null}`)),216&t.$$.dirty[1]){if(ut&&!function(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}(dt,ut)){const t=dt??new Map;mr(ut,t,T),mr(t,ut,A)}n(37,ut=dt??new Map)}256&t.$$.dirty[1]&&n(10,s=!!h.fromHandle),66&t.$$.dirty[0]|256&t.$$.dirty[1]&&n(9,a=h.fromHandle?.nodeId===F&&h.fromHandle?.type===N&&h.fromHandle?.id===r),66&t.$$.dirty[0]|256&t.$$.dirty[1]&&n(5,l=h.toHandle?.nodeId===F&&h.toHandle?.type===N&&h.toHandle?.id===r),66&t.$$.dirty[0]|768&t.$$.dirty[1]&&n(8,c=p===lr.Strict?h.fromHandle?.type!==N:F!==h.fromHandle?.nodeId||r!==h.fromHandle?.id),32&t.$$.dirty[0]|256&t.$$.dirty[1]&&n(7,d=l&&h.isValid)},[z,N,L,I,V,l,r,d,c,a,s,o,i,b,F,W,Y,R,Z,B,K,G,j,U,nt,ot,it,rt,st,at,lt,ct,function(t){const e=ts(t);(e&&0===t.button||!e)&&As.onPointerDown(t,{handleId:r,nodeId:F,isTarget:o,connectionRadius:C,domNode:E,nodeLookup:S,connectionMode:p,lib:_,autoPanOnConnect:k,flowId:b,isValidConnection:D??x,updateConnection:et,cancelConnection:tt,panBy:J,onConnect:t=>{const e=v?v(t):t;e&&(Q(e),$?.(t))},onConnectStart:(t,e)=>{w?.(t,{nodeId:e.nodeId,handleId:e.handleId,handleType:e.handleType})},onConnectEnd:(t,e)=>{y?.(t,e)},getTransform:()=>[m.x,m.y,m.zoom],getFromHandle:()=>h.fromHandle})},D,A,T,H,ut,dt,h,p,f,g,O,M,P]}!function(t){t.Line="line",t.Handle="handle"}(Rs||(Rs={}));var Ks=class extends Ct{constructor(t){super(),Et(this,t,Bs,Zs,a,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}};function Gs(t){let e,n,o,i,r,s,a=t[0]?.label+"";return e=new Ks({props:{type:"target",position:t[1]??fr.Top}}),r=new Ks({props:{type:"source",position:t[2]??fr.Bottom}}),{c(){kt(e.$$.fragment),n=M(),o=P(a),i=M(),kt(r.$$.fragment)},m(t,a){_t(e,t,a),_(t,n,a),_(t,o,a),_(t,i,a),_t(r,t,a),s=!0},p(t,[n]){const i={};2&n&&(i.position=t[1]??fr.Top),e.$set(i),(!s||1&n)&&a!==(a=t[0]?.label+"")&&A(o,a);const l={};4&n&&(l.position=t[2]??fr.Bottom),r.$set(l)},i(t){s||(gt(e.$$.fragment,t),gt(r.$$.fragment,t),s=!0)},o(t){mt(e.$$.fragment,t),mt(r.$$.fragment,t),s=!1},d(t){t&&(S(n),S(o),S(i)),St(e,t),St(r,t)}}}function js(t,e,o){const i=["data","targetPosition","sourcePosition"];w(e,i);let{data:r={label:"Node"}}=e,{targetPosition:s}=e,{sourcePosition:a}=e;return t.$$set=t=>{e=n(n({},e),y(t)),o(3,w(e,i)),"data"in t&&o(0,r=t.data),"targetPosition"in t&&o(1,s=t.targetPosition),"sourcePosition"in t&&o(2,a=t.sourcePosition)},[r,s,a]}var qs=class extends Ct{constructor(t){super(),Et(this,t,js,Gs,a,{data:0,targetPosition:1,sourcePosition:2})}};function Qs(t){let e,n,o,i,r=t[0]?.label+"";return o=new Ks({props:{type:"source",position:t[1]??fr.Bottom}}),{c(){e=P(r),n=M(),kt(o.$$.fragment)},m(t,r){_(t,e,r),_(t,n,r),_t(o,t,r),i=!0},p(t,[n]){(!i||1&n)&&r!==(r=t[0]?.label+"")&&A(e,r);const s={};2&n&&(s.position=t[1]??fr.Bottom),o.$set(s)},i(t){i||(gt(o.$$.fragment,t),i=!0)},o(t){mt(o.$$.fragment,t),i=!1},d(t){t&&(S(e),S(n)),St(o,t)}}}function Us(t,e,o){const i=["data","sourcePosition"];w(e,i);let{data:r={label:"Node"}}=e,{sourcePosition:s}=e;return t.$$set=t=>{e=n(n({},e),y(t)),o(2,w(e,i)),"data"in t&&o(0,r=t.data),"sourcePosition"in t&&o(1,s=t.sourcePosition)},[r,s]}var Js=class extends Ct{constructor(t){super(),Et(this,t,Us,Qs,a,{data:0,sourcePosition:1})}};function ta(t){let e,n,o,i,r=t[0]?.label+"";return o=new Ks({props:{type:"target",position:t[1]??fr.Top}}),{c(){e=P(r),n=M(),kt(o.$$.fragment)},m(t,r){_(t,e,r),_(t,n,r),_t(o,t,r),i=!0},p(t,[n]){(!i||1&n)&&r!==(r=t[0]?.label+"")&&A(e,r);const s={};2&n&&(s.position=t[1]??fr.Top),o.$set(s)},i(t){i||(gt(o.$$.fragment,t),i=!0)},o(t){mt(o.$$.fragment,t),i=!1},d(t){t&&(S(e),S(n)),St(o,t)}}}function ea(t,e,o){const i=["data","targetPosition"];w(e,i);let{data:r={label:"Node"}}=e,{targetPosition:s}=e;return t.$$set=t=>{e=n(n({},e),y(t)),o(2,w(e,i)),"data"in t&&o(0,r=t.data),"targetPosition"in t&&o(1,s=t.targetPosition)},[r,s]}var na=class extends Ct{constructor(t){super(),Et(this,t,ea,ta,a,{data:0,targetPosition:1})}};function oa(t,e,o){const i=[];return w(e,i),t.$$set=t=>{e=n(n({},e),y(t)),o(0,w(e,i))},[]}var ia=class extends Ct{constructor(t){super(),Et(this,t,oa,null,a,{})}};function ra(t,e,n){if(!e)return;const o=n?e.querySelector(n):e;o&&o.appendChild(t)}function sa(t,{target:e,domNode:n}){return ra(t,n,e),{async update({target:e,domNode:n}){ra(t,n,e)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function aa(t){let e,n,o,i,r;const a=t[3].default,l=h(a,t,t[2],null);return{c(){e=C("div"),l&&l.c()},m(s,a){_(s,e,a),l&&l.m(e,null),o=!0,i||(r=x(n=sa.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})),i=!0)},p(t,[e]){l&&l.p&&(!o||4&e)&&g(l,a,t,t[2],o?f(a,t[2],e,null):m(t[2]),null),n&&s(n.update)&&1&e&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})},i(t){o||(gt(l,t),o=!0)},o(t){mt(l,t),o=!1},d(t){t&&S(e),l&&l.d(t),i=!1,r()}}}function la(t,e,n){let o,{$$slots:i={},$$scope:r}=e;const{domNode:s}=Fa();return u(t,s,(t=>n(0,o=t))),t.$$set=t=>{"$$scope"in t&&n(2,r=t.$$scope)},[o,s,r,i]}var ca=class extends Ct{constructor(t){super(),Et(this,t,la,aa,a,{})}};function da(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:o,addSelectedEdges:i,unselectNodesAndEdges:r,elementsSelectable:s}=Fa();return a=>{const l=d(t).get(a);if(!l)return void console.warn("012",sr(a));(l.selectable||d(s)&&void 0===l.selectable)&&(e.set(null),n.set(null),l.selected?l.selected&&d(o)&&r({nodes:[],edges:[l]}):i([a]))}}function ua(t){let e,n,o,i,s,a=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`;const l=t[5].default,c=h(l,t,t[7],null);return{c(){e=C("div"),c&&c.c(),L(e,"class","svelte-flow__edge-label"),L(e,"style",n="pointer-events: all;"+t[0]),L(e,"role","button"),L(e,"tabindex","-1"),T(e,"transform",a)},m(n,r){_(n,e,r),c&&c.m(e,null),o=!0,i||(s=[N(e,"keyup",pa),N(e,"click",t[6])],i=!0)},p(t,i){c&&c.p&&(!o||128&i)&&g(c,l,t,t[7],o?f(l,t[7],i,null):m(t[7]),null),(!o||1&i&&n!==(n="pointer-events: all;"+t[0]))&&L(e,"style",n);const r=1&i;(7&i&&a!==(a=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`)||r)&&T(e,"transform",a)},i(t){o||(gt(c,t),o=!0)},o(t){mt(c,t),o=!1},d(t){t&&S(e),c&&c.d(t),i=!1,r(s)}}}function ha(t){let e,n;return e=new ca({props:{$$slots:{default:[ua]},$$scope:{ctx:t}}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,[n]){const o={};135&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}const pa=()=>{};function fa(t,e,n){let{$$slots:o={},$$scope:i}=e,{style:r}=e,{x:s}=e,{y:a}=e;const l=da(),c=q("svelteflow__edge_id");return t.$$set=t=>{"style"in t&&n(0,r=t.style),"x"in t&&n(1,s=t.x),"y"in t&&n(2,a=t.y),"$$scope"in t&&n(7,i=t.$$scope)},[r,s,a,l,c,o,()=>{c&&l(c)},i]}var ga=class extends Ct{constructor(t){super(),Et(this,t,fa,ha,a,{style:0,x:1,y:2})}};function ma(t){let e,n;return e=new ga({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[ya]},$$scope:{ctx:t}}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};8&n&&(o.x=t[3]),16&n&&(o.y=t[4]),32&n&&(o.style=t[5]),4100&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function ya(t){let e;return{c(){e=P(t[2])},m(t,n){_(t,e,n)},p(t,n){4&n&&A(e,t[2])},d(t){t&&S(e)}}}function wa(t){let e,n,o,i,r,s,a=t[10]&&function(t){let e;return{c(){e=O("path"),L(e,"d",t[1]),L(e,"stroke-opacity",0),L(e,"stroke-width",t[10]),L(e,"fill","none"),L(e,"class","svelte-flow__edge-interaction")},m(t,n){_(t,e,n)},p(t,n){2&n&&L(e,"d",t[1])},d(t){t&&S(e)}}}(t),l=t[2]&&ma(t);return{c(){e=O("path"),o=M(),a&&a.c(),i=M(),l&&l.c(),r=z(),L(e,"id",t[0]),L(e,"d",t[1]),L(e,"class",n=ye(["svelte-flow__edge-path",t[9]])),L(e,"marker-start",t[6]),L(e,"marker-end",t[7]),L(e,"fill","none"),L(e,"style",t[8])},m(t,n){_(t,e,n),_(t,o,n),a&&a.m(t,n),_(t,i,n),l&&l.m(t,n),_(t,r,n),s=!0},p(t,[o]){(!s||1&o)&&L(e,"id",t[0]),(!s||2&o)&&L(e,"d",t[1]),(!s||512&o&&n!==(n=ye(["svelte-flow__edge-path",t[9]])))&&L(e,"class",n),(!s||64&o)&&L(e,"marker-start",t[6]),(!s||128&o)&&L(e,"marker-end",t[7]),(!s||256&o)&&L(e,"style",t[8]),t[10]&&a.p(t,o),t[2]?l?(l.p(t,o),4&o&&gt(l,1)):(l=ma(t),l.c(),gt(l,1),l.m(r.parentNode,r)):l&&(pt(),mt(l,1,1,(()=>{l=null})),ft())},i(t){s||(gt(l),s=!0)},o(t){mt(l),s=!1},d(t){t&&(S(e),S(o),S(i),S(r)),a&&a.d(t),l&&l.d(t)}}}function $a(t,e,n){let{id:o}=e,{path:i}=e,{label:r}=e,{labelX:s}=e,{labelY:a}=e,{labelStyle:l}=e,{markerStart:c}=e,{markerEnd:d}=e,{style:u}=e,{interactionWidth:h=20}=e,{class:p}=e,f=void 0===h?20:h;return t.$$set=t=>{"id"in t&&n(0,o=t.id),"path"in t&&n(1,i=t.path),"label"in t&&n(2,r=t.label),"labelX"in t&&n(3,s=t.labelX),"labelY"in t&&n(4,a=t.labelY),"labelStyle"in t&&n(5,l=t.labelStyle),"markerStart"in t&&n(6,c=t.markerStart),"markerEnd"in t&&n(7,d=t.markerEnd),"style"in t&&n(8,u=t.style),"interactionWidth"in t&&n(11,h=t.interactionWidth),"class"in t&&n(9,p=t.class)},[o,i,r,s,a,l,c,d,u,p,f,h]}var va=class extends Ct{constructor(t){super(),Et(this,t,$a,wa,a,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}};function xa(t){let e,n;return e=new va({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,[n]){const o={};256&n&&(o.path=t[8]),128&n&&(o.labelX=t[7]),64&n&&(o.labelY=t[6]),1&n&&(o.label=t[0]),2&n&&(o.labelStyle=t[1]),8&n&&(o.markerStart=t[3]),16&n&&(o.markerEnd=t[4]),32&n&&(o.interactionWidth=t[5]),4&n&&(o.style=t[2]),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function ba(t,e,o){let i,r,s;const a=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];w(e,a);let{label:l}=e,{labelStyle:c}=e,{style:d}=e,{markerStart:u}=e,{markerEnd:h}=e,{interactionWidth:p}=e,{sourceX:f}=e,{sourceY:g}=e,{sourcePosition:m}=e,{targetX:$}=e,{targetY:v}=e,{targetPosition:x}=e;return t.$$set=t=>{e=n(n({},e),y(t)),o(15,w(e,a)),"label"in t&&o(0,l=t.label),"labelStyle"in t&&o(1,c=t.labelStyle),"style"in t&&o(2,d=t.style),"markerStart"in t&&o(3,u=t.markerStart),"markerEnd"in t&&o(4,h=t.markerEnd),"interactionWidth"in t&&o(5,p=t.interactionWidth),"sourceX"in t&&o(9,f=t.sourceX),"sourceY"in t&&o(10,g=t.sourceY),"sourcePosition"in t&&o(11,m=t.sourcePosition),"targetX"in t&&o(12,$=t.targetX),"targetY"in t&&o(13,v=t.targetY),"targetPosition"in t&&o(14,x=t.targetPosition)},t.$$.update=()=>{32256&t.$$.dirty&&o(8,[i,r,s]=rs({sourceX:f,sourceY:g,targetX:$,targetY:v,sourcePosition:m,targetPosition:x}),i,(o(7,r),o(9,f),o(10,g),o(12,$),o(13,v),o(11,m),o(14,x)),(o(6,s),o(9,f),o(10,g),o(12,$),o(13,v),o(11,m),o(14,x)))},[l,c,d,u,h,p,s,r,i,f,g,m,$,v,x]}var ka=class extends Ct{constructor(t){super(),Et(this,t,ba,xa,a,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}};function _a(t){let e,n;return e=new va({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,[n]){const o={};256&n&&(o.path=t[8]),128&n&&(o.labelX=t[7]),64&n&&(o.labelY=t[6]),1&n&&(o.label=t[0]),2&n&&(o.labelStyle=t[1]),8&n&&(o.markerStart=t[3]),16&n&&(o.markerEnd=t[4]),32&n&&(o.interactionWidth=t[5]),4&n&&(o.style=t[2]),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Sa(t,e,o){let i,r,s;const a=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];w(e,a);let{label:l}=e,{labelStyle:c}=e,{style:d}=e,{markerStart:u}=e,{markerEnd:h}=e,{interactionWidth:p}=e,{sourceX:f}=e,{sourceY:g}=e,{sourcePosition:m}=e,{targetX:$}=e,{targetY:v}=e,{targetPosition:x}=e;return t.$$set=t=>{e=n(n({},e),y(t)),o(15,w(e,a)),"label"in t&&o(0,l=t.label),"labelStyle"in t&&o(1,c=t.labelStyle),"style"in t&&o(2,d=t.style),"markerStart"in t&&o(3,u=t.markerStart),"markerEnd"in t&&o(4,h=t.markerEnd),"interactionWidth"in t&&o(5,p=t.interactionWidth),"sourceX"in t&&o(9,f=t.sourceX),"sourceY"in t&&o(10,g=t.sourceY),"sourcePosition"in t&&o(11,m=t.sourcePosition),"targetX"in t&&o(12,$=t.targetX),"targetY"in t&&o(13,v=t.targetY),"targetPosition"in t&&o(14,x=t.targetPosition)},t.$$.update=()=>{32256&t.$$.dirty&&o(8,[i,r,s]=ps({sourceX:f,sourceY:g,targetX:$,targetY:v,sourcePosition:m,targetPosition:x}),i,(o(7,r),o(9,f),o(10,g),o(12,$),o(13,v),o(11,m),o(14,x)),(o(6,s),o(9,f),o(10,g),o(12,$),o(13,v),o(11,m),o(14,x)))},[l,c,d,u,h,p,s,r,i,f,g,m,$,v,x]}var Ea=class extends Ct{constructor(t){super(),Et(this,t,Sa,_a,a,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}};function Ca(t){let e,n;return e=new va({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,[n]){const o={};256&n&&(o.path=t[8]),128&n&&(o.labelX=t[7]),64&n&&(o.labelY=t[6]),1&n&&(o.label=t[0]),2&n&&(o.labelStyle=t[1]),8&n&&(o.markerStart=t[3]),16&n&&(o.markerEnd=t[4]),32&n&&(o.interactionWidth=t[5]),4&n&&(o.style=t[2]),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Oa(t,e,o){let i,r,s;const a=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];w(e,a);let{label:l}=e,{labelStyle:c}=e,{style:d}=e,{markerStart:u}=e,{markerEnd:h}=e,{interactionWidth:p}=e,{sourceX:f}=e,{sourceY:g}=e,{targetX:m}=e,{targetY:$}=e;return t.$$set=t=>{e=n(n({},e),y(t)),o(13,w(e,a)),"label"in t&&o(0,l=t.label),"labelStyle"in t&&o(1,c=t.labelStyle),"style"in t&&o(2,d=t.style),"markerStart"in t&&o(3,u=t.markerStart),"markerEnd"in t&&o(4,h=t.markerEnd),"interactionWidth"in t&&o(5,p=t.interactionWidth),"sourceX"in t&&o(9,f=t.sourceX),"sourceY"in t&&o(10,g=t.sourceY),"targetX"in t&&o(11,m=t.targetX),"targetY"in t&&o(12,$=t.targetY)},t.$$.update=()=>{7680&t.$$.dirty&&o(8,[i,r,s]=cs({sourceX:f,sourceY:g,targetX:m,targetY:$}),i,(o(7,r),o(9,f),o(10,g),o(11,m),o(12,$)),(o(6,s),o(9,f),o(10,g),o(11,m),o(12,$)))},[l,c,d,u,h,p,s,r,i,f,g,m,$]}var Pa=class extends Ct{constructor(t){super(),Et(this,t,Oa,Ca,a,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}};function Ma(t){let e,n;return e=new va({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,[n]){const o={};256&n&&(o.path=t[8]),128&n&&(o.labelX=t[7]),64&n&&(o.labelY=t[6]),1&n&&(o.label=t[0]),2&n&&(o.labelStyle=t[1]),8&n&&(o.markerStart=t[3]),16&n&&(o.markerEnd=t[4]),32&n&&(o.interactionWidth=t[5]),4&n&&(o.style=t[2]),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function za(t,e,o){let i,r,s;const a=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];w(e,a);let{label:l}=e,{labelStyle:c}=e,{style:d}=e,{markerStart:u}=e,{markerEnd:h}=e,{interactionWidth:p}=e,{sourceX:f}=e,{sourceY:g}=e,{sourcePosition:m}=e,{targetX:$}=e,{targetY:v}=e,{targetPosition:x}=e;return t.$$set=t=>{e=n(n({},e),y(t)),o(15,w(e,a)),"label"in t&&o(0,l=t.label),"labelStyle"in t&&o(1,c=t.labelStyle),"style"in t&&o(2,d=t.style),"markerStart"in t&&o(3,u=t.markerStart),"markerEnd"in t&&o(4,h=t.markerEnd),"interactionWidth"in t&&o(5,p=t.interactionWidth),"sourceX"in t&&o(9,f=t.sourceX),"sourceY"in t&&o(10,g=t.sourceY),"sourcePosition"in t&&o(11,m=t.sourcePosition),"targetX"in t&&o(12,$=t.targetX),"targetY"in t&&o(13,v=t.targetY),"targetPosition"in t&&o(14,x=t.targetPosition)},t.$$.update=()=>{32256&t.$$.dirty&&o(8,[i,r,s]=ps({sourceX:f,sourceY:g,targetX:$,targetY:v,sourcePosition:m,targetPosition:x,borderRadius:0}),i,(o(7,r),o(9,f),o(10,g),o(12,$),o(13,v),o(11,m),o(14,x)),(o(6,s),o(9,f),o(10,g),o(12,$),o(13,v),o(11,m),o(14,x)))},[l,c,d,u,h,p,s,r,i,f,g,m,$,v,x]}const Na=(t,e,n,o=[0,0],i=ar)=>{const{subscribe:r,set:s,update:a}=ge([]);let l=t,c={},d=!0;const u=t=>(bs(t,e,n,{elevateNodesOnSelect:d,nodeOrigin:o,nodeExtent:i,defaults:c,checkEquality:!1}),l=t,s(l),l);return u(l),{subscribe:r,set:u,update:t=>u(t(l)),setDefaultOptions:t=>{c=t},setOptions:t=>{d=t.elevateNodesOnSelect??d}}},La=(t,e,n,o)=>{const{subscribe:i,set:r,update:s}=ge([]);let a=t,l=o||{};const c=t=>{const o=l?t.map((t=>({...l,...t}))):t;Es(e,n,o),a=o,r(a)};return c(a),{subscribe:i,set:c,update:t=>c(t(a)),setDefaultOptions:t=>{l=t}}},Ia={input:Js,output:na,default:qs,group:ia},Da={straight:Pa,smoothstep:Ea,default:ka,step:class extends Ct{constructor(t){super(),Et(this,t,za,Ma,a,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}};function Aa(t){const e=me([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],(([t,,e,n,o,i,r])=>{const s=n&&i&&r?t.filter((t=>{const n=e.get(t.source),s=e.get(t.target);return n&&s&&function({sourceNode:t,targetNode:e,width:n,height:o,transform:i}){const r=Lr(Tr(t),Tr(e));r.x===r.x2&&(r.x2+=1),r.y===r.y2&&(r.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:o/i[2]};return Vr(s,Dr(r))>0}({sourceNode:n,targetNode:s,width:i,height:r,transform:[o.x,o.y,o.zoom]})})):t;return s}));return me([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],(([t,,e,n,o])=>t.reduce(((t,i)=>{const r=e.get(i.source),s=e.get(i.target);if(!r||!s)return t;const a=function(t){const{sourceNode:e,targetNode:n}=t;if(!fs(e)||!fs(n))return null;const o=e.internals.handleBounds||gs(e.handles),i=n.internals.handleBounds||gs(n.handles),r=ys(o?.source??[],t.sourceHandle),s=ys(t.connectionMode===lr.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!r||!s)return t.onError?.("008",rr(r?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const a=r?.position||fr.Bottom,l=s?.position||fr.Top,c=ms(e,r,a),d=ms(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:l}}({id:i.id,sourceNode:r,targetNode:s,sourceHandle:i.sourceHandle||null,targetHandle:i.targetHandle||null,connectionMode:n,onError:o});return a&&t.push({...i,zIndex:as({selected:i.selected,zIndex:i.zIndex,sourceNode:r,targetNode:s,elevateOnSelect:!1}),...a}),t}),[])))}function Ta(t){return me([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],(([t,e,n,o,i])=>{const r=[i.x,i.y,i.zoom];return e?br(t,{x:0,y:0,width:n,height:o},r,!0):Array.from(t.values())}))}const Ha=Symbol();function Va({nodes:t,edges:e,width:n,height:o,fitView:i,nodeOrigin:r,nodeExtent:s}){const a=(({nodes:t=[],edges:e=[],width:n,height:o,fitView:i,nodeOrigin:r,nodeExtent:s})=>{const a=new Map,l=new Map,c=new Map,d=new Map,u=r??[0,0],h=s??ar;bs(t,a,l,{nodeExtent:h,nodeOrigin:u,elevateNodesOnSelect:!1,checkEquality:!1}),Es(c,d,e);let p={x:0,y:0,zoom:1};if(i&&n&&o){const t=xr(a,{filter:t=>!(!t.width&&!t.initialWidth||!t.height&&!t.initialHeight)});p=Br(t,n,o,.5,2,.1)}return{flowId:ge(null),nodes:Na(t,a,l,u,h),nodeLookup:fe(a),parentLookup:fe(l),edgeLookup:fe(d),visibleNodes:fe([]),edges:La(e,c,d),visibleEdges:fe([]),connectionLookup:fe(c),height:ge(500),width:ge(500),minZoom:ge(.5),maxZoom:ge(2),nodeOrigin:ge(u),nodeDragThreshold:ge(1),nodeExtent:ge(h),translateExtent:ge(ar),autoPanOnNodeDrag:ge(!0),autoPanOnConnect:ge(!0),fitViewOnInit:ge(!1),fitViewOnInitDone:ge(!1),fitViewOptions:ge(void 0),panZoom:ge(null),snapGrid:ge(null),dragging:ge(!1),selectionRect:ge(null),selectionKeyPressed:ge(!1),multiselectionKeyPressed:ge(!1),deleteKeyPressed:ge(!1),panActivationKeyPressed:ge(!1),zoomActivationKeyPressed:ge(!1),selectionRectMode:ge(null),selectionMode:ge(dr.Partial),nodeTypes:ge(Ia),edgeTypes:ge(Da),viewport:ge(p),connectionMode:ge(lr.Strict),domNode:ge(null),connection:fe(ur),connectionLineType:ge(hr.Bezier),connectionRadius:ge(20),isValidConnection:ge((()=>!0)),nodesDraggable:ge(!0),nodesConnectable:ge(!0),elementsSelectable:ge(!0),selectNodesOnDrag:ge(!0),markers:fe([]),defaultMarkerColor:ge("#b1b1b7"),lib:fe("svelte"),onlyRenderVisibleElements:ge(!1),onerror:ge(Xr),ondelete:ge(void 0),onedgecreate:ge(void 0),onconnect:ge(void 0),onconnectstart:ge(void 0),onconnectend:ge(void 0),onbeforedelete:ge(void 0),nodesInitialized:ge(!1),edgesInitialized:ge(!1),viewportInitialized:ge(!1),initialized:fe(!1)}})({nodes:t,edges:e,width:n,height:o,fitView:i,nodeOrigin:r,nodeExtent:s});function l(t,e){const n=d(a.panZoom);return n?n.scaleBy(t,e):Promise.resolve(!1)}function c(t){let e=!1;return t.forEach((t=>{t.selected&&(t.selected=!1,e=!0)})),e}function u(t){c(t?.nodes||d(a.nodes))&&a.nodes.set(d(a.nodes));c(t?.edges||d(a.edges))&&a.edges.set(d(a.edges))}function h(t){const e=d(a.multiselectionKeyPressed);a.nodes.update((n=>n.map((n=>{const o=t.includes(n.id),i=e&&n.selected||o;return n.selected=i,n})))),e||a.edges.update((t=>t.map((t=>(t.selected=!1,t)))))}a.deleteKeyPressed.subscribe((async t=>{if(t){const t=d(a.nodes),e=d(a.edges),n=t.filter((t=>t.selected)),o=e.filter((t=>t.selected)),{nodes:i,edges:r}=await Cr({nodesToRemove:n,edgesToRemove:o,nodes:t,edges:e,onBeforeDelete:d(a.onbeforedelete)});(i.length||r.length)&&(a.nodes.update((t=>t.filter((t=>!i.some((e=>e.id===t.id)))))),a.edges.update((t=>t.filter((t=>!r.some((e=>e.id===t.id)))))),d(a.ondelete)?.({nodes:i,edges:r}))}}));const p=ge(ur);function f(){p.set(ur)}return{...a,visibleEdges:Aa(a),visibleNodes:Ta(a),connection:me([p,a.viewport],(([t,e])=>t.inProgress?{...t,to:Rr(t.to,[e.x,e.y,e.zoom])}:{...t})),markers:me([a.edges,a.defaultMarkerColor,a.flowId],(([t,e,n])=>function(t,{id:e,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:i}){const r=new Set;return t.reduce(((t,s)=>([s.markerStart||o,s.markerEnd||i].forEach((o=>{if(o&&"object"==typeof o){const i=ws(o,e);r.has(i)||(t.push({id:i,color:o.color||n,...o}),r.add(i))}})),t)),[]).sort(((t,e)=>t.id.localeCompare(e.id)))}(t,{defaultColor:e,id:n}))),initialized:(()=>{let t=!1;const e=d(a.nodes).length,n=d(a.edges).length;return me([a.nodesInitialized,a.edgesInitialized,a.viewportInitialized],(([o,i,r])=>t||(t=0===e?r:0===n?r&&o:r&&o&&i,t)))})(),syncNodeStores:t=>function(t,e){const n=t.set,o=e.set,i=d(t),r=d(e);let s=0===i.length&&r.length>0?r:i;t.set(s);const a=t=>{const e=n(t);return s=e,o(s),e};t.set=e.set=a,t.update=e.update=t=>a(t(s))}(a.nodes,t),syncEdgeStores:t=>function(t,e){const n=t.set,o=e.set;let i=d(e);t.set(i);const r=t=>{n(t),o(t),i=t};t.set=e.set=r,t.update=e.update=t=>r(t(i))}(a.edges,t),syncViewport:t=>((t,e,n)=>{if(!n)return;const o=d(t),i=e.set,r=n.set;let s=n?d(n):{x:0,y:0,zoom:1};e.set(s),e.set=t=>(i(t),r(t),s=t,t),n.set=t=>(o?.syncViewport(t),i(t),r(t),s=t,t),e.update=t=>{e.set(t(s))},n.update=t=>{n.set(t(s))}})(a.panZoom,a.viewport,t),setNodeTypes:function(t){a.nodeTypes.set({...Ia,...t})},setEdgeTypes:function(t){a.edgeTypes.set({...Da,...t})},addEdge:function(t){const e=d(a.edges);a.edges.set(((t,e)=>{if(!t.source||!t.target)return e;let n;return n=(t=>"id"in t&&"source"in t&&"target"in t)(t)?{...t}:{...t,id:ls(t)},((t,e)=>e.some((e=>!(e.source!==t.source||e.target!==t.target||e.sourceHandle!==t.sourceHandle&&(e.sourceHandle||t.sourceHandle)||e.targetHandle!==t.targetHandle&&(e.targetHandle||t.targetHandle)))))(n,e)?e:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,e.concat(n))})(t,e))},updateNodePositions:(t,e=!1)=>{const n=d(a.nodeLookup);for(const[o,i]of t){const t=n.get(o)?.internals.userNode;t&&(t.position=i.position,t.dragging=e)}a.nodes.update((t=>t))},updateNodeInternals:function(t){const e=d(a.nodeLookup),n=d(a.parentLookup),{changes:o,updatedInternals:i}=Ss(t,e,d(a.parentLookup),d(a.domNode),d(a.nodeOrigin));if(i){if(function(t,e,n){const o=xs($s,n);for(const n of t.values())if(n.parentId)ks(n,t,e,o);else{const t=$r(n,o.nodeOrigin),e=Gr(n.extent)?n.extent:o.nodeExtent,i=Pr(t,e,jr(n));n.internals.positionAbsolute=i}}(e,n,{nodeOrigin:r,nodeExtent:s}),!d(a.fitViewOnInitDone)&&d(a.fitViewOnInit)){const t=d(a.fitViewOptions),e=function(t){const e=d(a.panZoom);if(!e)return!1;const n=_r(d(a.nodeLookup),t);return Sr({nodes:n,width:d(a.width),height:d(a.height),minZoom:d(a.minZoom),maxZoom:d(a.maxZoom),panZoom:e},t),n.size>0}({...t,nodes:t?.nodes});a.fitViewOnInitDone.set(e)}for(const t of o){const n=e.get(t.id)?.internals.userNode;if(n)switch(t.type){case"dimensions":{const e={...n.measured,...t.dimensions};t.setAttributes&&(n.width=t.dimensions?.width??n.width,n.height=t.dimensions?.height??n.height),n.measured=e;break}case"position":n.position=t.position??n.position}}a.nodes.update((t=>t)),d(a.nodesInitialized)||a.nodesInitialized.set(!0)}},zoomIn:function(t){return l(1.2,t)},zoomOut:function(t){return l(1/1.2,t)},fitView:t=>function(t){const e=d(a.panZoom),n=d(a.domNode);if(!e||!n)return Promise.resolve(!1);const{width:o,height:i}=Ur(n);return Sr({nodes:_r(d(a.nodeLookup),t),width:o,height:i,minZoom:d(a.minZoom),maxZoom:d(a.maxZoom),panZoom:e},t)}(t),setMinZoom:function(t){const e=d(a.panZoom);e&&(e.setScaleExtent([t,d(a.maxZoom)]),a.minZoom.set(t))},setMaxZoom:function(t){const e=d(a.panZoom);e&&(e.setScaleExtent([d(a.minZoom),t]),a.maxZoom.set(t))},setTranslateExtent:function(t){const e=d(a.panZoom);e&&(e.setTranslateExtent(t),a.translateExtent.set(t))},setPaneClickDistance:function(t){d(a.panZoom)?.setClickDistance(t)},unselectNodesAndEdges:u,addSelectedNodes:h,addSelectedEdges:function(t){const e=d(a.multiselectionKeyPressed);a.edges.update((n=>n.map((n=>{const o=t.includes(n.id),i=e&&n.selected||o;return n.selected=i,n})))),e||a.nodes.update((t=>t.map((t=>(t.selected=!1,t)))))},handleNodeSelection:function(t){const e=d(a.nodes)?.find((e=>e.id===t));e?(a.selectionRect.set(null),a.selectionRectMode.set(null),e.selected?e.selected&&d(a.multiselectionKeyPressed)&&u({nodes:[e],edges:[]}):h([t])):console.warn("012",sr(t))},panBy:function(t){const e=d(a.viewport);return async function({delta:t,panZoom:e,transform:n,translateExtent:o,width:i,height:r}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const s=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,r]],o),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}({delta:t,panZoom:d(a.panZoom),transform:[e.x,e.y,e.zoom],translateExtent:d(a.translateExtent),width:d(a.width),height:d(a.height)})},updateConnection:t=>{p.set({...t})},cancelConnection:f,reset:function(){a.fitViewOnInitDone.set(!1),a.selectionRect.set(null),a.selectionRectMode.set(null),a.snapGrid.set(null),a.isValidConnection.set((()=>!0)),u(),f()}}}function Fa(){const t=q(Ha);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function Wa(t,e){const{panZoom:n,minZoom:o,maxZoom:i,initialViewport:r,viewport:s,dragging:a,translateExtent:l,paneClickDistance:c}=e,d=Ys({domNode:t,minZoom:o,maxZoom:i,translateExtent:l,viewport:r,paneClickDistance:c,onDraggingChange:a.set}),u=d.getViewport();return s.set(u),n.set(d),d.update(e),{update(t){d.update(t)}}}function Xa(t){let e,n,o,i,r;const a=t[35].default,l=h(a,t,t[34],null);return{c(){e=C("div"),l&&l.c(),L(e,"class","svelte-flow__zoom svelte-4xkw84")},m(s,a){_(s,e,a),l&&l.m(e,null),o=!0,i||(r=x(n=Wa.call(null,e,{viewport:t[18],minZoom:t[12],maxZoom:t[13],initialViewport:t[11],dragging:t[23],panZoom:t[19],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[9],panOnDrag:t[10],panOnScrollSpeed:.5,panOnScrollMode:t[3]||cr.Free,zoomActivationKeyPressed:t[14],preventScrolling:"boolean"!=typeof t[4]||t[4],noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!t[15],translateExtent:t[16],lib:t[17],paneClickDistance:t[8],onTransformChange:t[29]})),i=!0)},p(t,e){l&&l.p&&(!o||8&e[1])&&g(l,a,t,t[34],o?f(a,t[34],e,null):m(t[34]),null),n&&s(n.update)&&262143&e[0]&&n.update.call(null,{viewport:t[18],minZoom:t[12],maxZoom:t[13],initialViewport:t[11],dragging:t[23],panZoom:t[19],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[9],panOnDrag:t[10],panOnScrollSpeed:.5,panOnScrollMode:t[3]||cr.Free,zoomActivationKeyPressed:t[14],preventScrolling:"boolean"!=typeof t[4]||t[4],noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!t[15],translateExtent:t[16],lib:t[17],paneClickDistance:t[8],onTransformChange:t[29]})},i(t){o||(gt(l,t),o=!0)},o(t){mt(l,t),o=!1},d(t){t&&S(e),l&&l.d(t),i=!1,r()}}}function Ya(t,e,n){let o,i,r,s,a,l,c,d,h,p,f,{$$slots:g={},$$scope:m}=e,{initialViewport:y}=e,{onMoveStart:w}=e,{onMove:$}=e,{onMoveEnd:x}=e,{panOnScrollMode:b}=e,{preventScrolling:k}=e,{zoomOnScroll:_}=e,{zoomOnDoubleClick:S}=e,{zoomOnPinch:E}=e,{panOnDrag:C}=e,{panOnScroll:O}=e,{paneClickDistance:P}=e;const{viewport:M,panZoom:z,selectionRect:N,minZoom:L,maxZoom:I,dragging:D,translateExtent:A,lib:T,panActivationKeyPressed:H,zoomActivationKeyPressed:V,viewportInitialized:F}=Fa();u(t,N,(t=>n(15,h=t))),u(t,L,(t=>n(12,l=t))),u(t,I,(t=>n(13,c=t))),u(t,A,(t=>n(16,p=t))),u(t,T,(t=>n(17,f=t))),u(t,H,(t=>n(33,a=t))),u(t,V,(t=>n(14,d=t))),u(t,F,(t=>n(36,s=t)));return B((()=>{v(F,s=!0,s)})),t.$$set=t=>{"initialViewport"in t&&n(30,y=t.initialViewport),"onMoveStart"in t&&n(0,w=t.onMoveStart),"onMove"in t&&n(1,$=t.onMove),"onMoveEnd"in t&&n(2,x=t.onMoveEnd),"panOnScrollMode"in t&&n(3,b=t.panOnScrollMode),"preventScrolling"in t&&n(4,k=t.preventScrolling),"zoomOnScroll"in t&&n(5,_=t.zoomOnScroll),"zoomOnDoubleClick"in t&&n(6,S=t.zoomOnDoubleClick),"zoomOnPinch"in t&&n(7,E=t.zoomOnPinch),"panOnDrag"in t&&n(31,C=t.panOnDrag),"panOnScroll"in t&&n(32,O=t.panOnScroll),"paneClickDistance"in t&&n(8,P=t.paneClickDistance),"$$scope"in t&&n(34,m=t.$$scope)},t.$$.update=()=>{1073741824&t.$$.dirty[0]&&n(11,o=y||{x:0,y:0,zoom:1}),5&t.$$.dirty[1]&&n(10,i=a||C),6&t.$$.dirty[1]&&n(9,r=a||O)},[w,$,x,b,k,_,S,E,P,r,i,o,l,c,d,h,p,f,M,z,N,L,I,D,A,T,H,V,F,t=>M.set({x:t[0],y:t[1],zoom:t[2]}),y,C,O,a,m,g]}var Ra=class extends Ct{constructor(t){super(),Et(this,t,Ya,Xa,a,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}};function Za(t){let e,n,o,i;const a=t[28].default,l=h(a,t,t[27],null);return{c(){e=C("div"),l&&l.c(),L(e,"class","svelte-flow__pane svelte-1esy7hx"),X(e,"draggable",!0===t[0]||Array.isArray(t[0])&&t[0].includes(0)),X(e,"dragging",t[4]),X(e,"selection",t[1])},m(r,a){_(r,e,a),l&&l.m(e,null),t[29](e),n=!0,o||(i=[N(e,"click",(function(){s(t[3]?void 0:Ba(t[15],t[2]))&&(t[3]?void 0:Ba(t[15],t[2])).apply(this,arguments)})),N(e,"pointerdown",(function(){s(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)})),N(e,"pointermove",(function(){s(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)})),N(e,"pointerup",(function(){s(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)})),N(e,"contextmenu",(function(){s(Ba(t[19],t[2]))&&Ba(t[19],t[2]).apply(this,arguments)}))],o=!0)},p(o,i){t=o,l&&l.p&&(!n||134217728&i[0])&&g(l,a,t,t[27],n?f(a,t[27],i,null):m(t[27]),null),(!n||1&i[0])&&X(e,"draggable",!0===t[0]||Array.isArray(t[0])&&t[0].includes(0)),(!n||16&i[0])&&X(e,"dragging",t[4]),(!n||2&i[0])&&X(e,"selection",t[1])},i(t){n||(gt(l,t),n=!0)},o(t){mt(l,t),n=!1},d(n){n&&S(e),l&&l.d(n),t[29](null),o=!1,r(i)}}}function Ba(t,e){return n=>{n.target===e&&t?.(n)}}function Ka(t){return e=>{const n=t.includes(e.id);return e.selected!==n&&(e.selected=n),e}}function Ga(t,e,n){let o,i,r,s,a,l,c,d,h,p,f,g,m,{$$slots:y={},$$scope:w}=e,{panOnDrag:$}=e,{selectionOnDrag:x}=e;const b=G(),{nodes:k,nodeLookup:_,edges:S,viewport:E,dragging:C,elementsSelectable:O,selectionRect:P,selectionRectMode:M,selectionKeyPressed:z,selectionMode:N,panActivationKeyPressed:L,unselectNodesAndEdges:I}=Fa();let D;u(t,_,(t=>n(36,h=t))),u(t,S,(t=>n(33,l=t))),u(t,E,(t=>n(35,d=t))),u(t,C,(t=>n(4,m=t))),u(t,O,(t=>n(25,f=t))),u(t,P,(t=>n(24,p=t))),u(t,M,(t=>n(23,a=t))),u(t,z,(t=>n(22,s=t))),u(t,N,(t=>n(34,c=t))),u(t,L,(t=>n(26,g=t)));let A=null,T=[],H=!1;function V(t){H?H=!1:(b("paneclick",{event:t}),I(),M.set(null))}return t.$$set=t=>{"panOnDrag"in t&&n(0,$=t.panOnDrag),"selectionOnDrag"in t&&n(20,x=t.selectionOnDrag),"$$scope"in t&&n(27,w=t.$$scope)},t.$$.update=()=>{67108865&t.$$.dirty[0]&&n(21,o=g||$),24117248&t.$$.dirty[0]&&n(1,i=s||p||x&&!0!==o),41943042&t.$$.dirty[0]&&n(3,r=f&&(i||"user"===a))},[$,i,D,r,m,_,S,E,C,O,P,M,z,N,L,V,function(t){if(A=D.getBoundingClientRect(),!O||!i||0!==t.button||t.target!==D||!A)return;t.target?.setPointerCapture?.(t.pointerId);const{x:e,y:n}=es(t,A);I(),P.set({width:0,height:0,startX:e,startY:n,x:e,y:n})},function(t){if(!i||!A||!p)return;H=!0;const e=es(t,A),n=p.startX??0,o=p.startY??0,r={...p,x:e.x<n?e.x:n,y:e.y<o?e.y:o,width:Math.abs(e.x-n),height:Math.abs(e.y-o)},s=T.map((t=>t.id)),a=kr(T,l).map((t=>t.id));T=br(h,r,[d.x,d.y,d.zoom],c===dr.Partial,!0);const u=kr(T,l).map((t=>t.id)),f=T.map((t=>t.id));(s.length!==f.length||f.some((t=>!s.includes(t))))&&k.update((t=>t.map(Ka(f)))),(a.length!==u.length||u.some((t=>!a.includes(t))))&&S.update((t=>t.map(Ka(u)))),M.set("user"),P.set(r)},function(t){0===t.button&&(t.target?.releasePointerCapture?.(t.pointerId),i||"user"!==a||t.target!==D||V?.(t),P.set(null),T.length>0&&v(M,a="nodes",a),s&&(H=!1))},t=>{Array.isArray(o)&&o?.includes(2)?t.preventDefault():b("panecontextmenu",{event:t})},x,o,s,a,p,f,g,w,y,function(t){J[t?"unshift":"push"]((()=>{D=t,n(2,D)}))}]}var ja=class extends Ct{constructor(t){super(),Et(this,t,Ga,Za,a,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}};function qa(t){let e,n;const o=t[3].default,i=h(o,t,t[2],null);return{c(){e=C("div"),i&&i.c(),L(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),T(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},m(t,o){_(t,e,o),i&&i.m(e,null),n=!0},p(t,[r]){i&&i.p&&(!n||4&r)&&g(i,o,t,t[2],n?f(o,t[2],r,null):m(t[2]),null),(!n||1&r)&&T(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},i(t){n||(gt(i,t),n=!0)},o(t){mt(i,t),n=!1},d(t){t&&S(e),i&&i.d(t)}}}function Qa(t,e,n){let o,{$$slots:i={},$$scope:r}=e;const{viewport:s}=Fa();return u(t,s,(t=>n(0,o=t))),t.$$set=t=>{"$$scope"in t&&n(2,r=t.$$scope)},[o,s,r,i]}var Ua=class extends Ct{constructor(t){super(),Et(this,t,Qa,qa,a,{})}};function Ja(t,e){const{store:n,onDrag:o,onDragStart:i,onDragStop:r,onNodeMouseDown:s}=e,a=Ms({onDrag:o,onDragStart:i,onDragStop:r,onNodeMouseDown:s,getStoreItems:()=>{const t=d(n.snapGrid),e=d(n.viewport);return{nodes:d(n.nodes),nodeLookup:d(n.nodeLookup),edges:d(n.edges),nodeExtent:d(n.nodeExtent),snapGrid:t||[0,0],snapToGrid:!!t,nodeOrigin:d(n.nodeOrigin),multiSelectionActive:d(n.multiselectionKeyPressed),domNode:d(n.domNode),transform:[e.x,e.y,e.zoom],autoPanOnNodeDrag:d(n.autoPanOnNodeDrag),nodesDraggable:d(n.nodesDraggable),selectNodesOnDrag:d(n.selectNodesOnDrag),nodeDragThreshold:d(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function l(t,e){e.disabled?a.destroy():a.update({domNode:t,noDragClassName:e.noDragClass,handleSelector:e.handleSelector,nodeId:e.nodeId,isSelectable:e.isSelectable,nodeClickDistance:e.nodeClickDistance})}return l(t,e),{update(e){l(t,e)},destroy(){a.destroy()}}}function tl(t){let e,n,o,i,a,l,c,d,u=`translate(${t[12]}px, ${t[13]}px)`;var h=t[27];function p(t,e){return{props:{data:t[2],id:t[1],selected:t[3],selectable:t[5],deletable:t[7],sourcePosition:t[14],targetPosition:t[15],zIndex:t[16],dragging:t[9],draggable:t[4],dragHandle:t[19],parentId:t[21],type:t[25],isConnectable:t[28],positionAbsoluteX:t[12],positionAbsoluteY:t[13],width:t[17],height:t[18]}}}return h&&(n=Y(h,p(t))),{c(){e=C("div"),n&&kt(n.$$.fragment),L(e,"data-id",t[1]),L(e,"class",o=ye(["svelte-flow__node",`svelte-flow__node-${t[25]}`,t[23]])),L(e,"style",i=(t[10]??"")+";"+t[26].width+t[26].height),X(e,"dragging",t[9]),X(e,"selected",t[3]),X(e,"draggable",t[4]),X(e,"connectable",t[6]),X(e,"selectable",t[5]),X(e,"nopan",t[4]),X(e,"parent",t[11]),T(e,"z-index",t[16]),T(e,"transform",u),T(e,"visibility",t[20]?"visible":"hidden")},m(o,i){_(o,e,i),n&&_t(n,e,null),t[50](e),l=!0,c||(d=[x(a=Ja.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[19],noDragClass:"nodrag",nodeClickDistance:t[22],onNodeMouseDown:t[31],onDrag:t[47],onDragStart:t[48],onDragStop:t[49],store:t[29]})),N(e,"click",t[34]),N(e,"mouseenter",t[51]),N(e,"mouseleave",t[52]),N(e,"mousemove",t[53]),N(e,"contextmenu",t[54])],c=!0)},p(t,r){if(134217728&r[0]&&h!==(h=t[27])){if(n){pt();const t=n;mt(t.$$.fragment,1,0,(()=>{St(t,1)})),ft()}h?(n=Y(h,p(t)),kt(n.$$.fragment),gt(n.$$.fragment,1),_t(n,e,null)):n=null}else if(h){const e={};4&r[0]&&(e.data=t[2]),2&r[0]&&(e.id=t[1]),8&r[0]&&(e.selected=t[3]),32&r[0]&&(e.selectable=t[5]),128&r[0]&&(e.deletable=t[7]),16384&r[0]&&(e.sourcePosition=t[14]),32768&r[0]&&(e.targetPosition=t[15]),65536&r[0]&&(e.zIndex=t[16]),512&r[0]&&(e.dragging=t[9]),16&r[0]&&(e.draggable=t[4]),524288&r[0]&&(e.dragHandle=t[19]),2097152&r[0]&&(e.parentId=t[21]),33554432&r[0]&&(e.type=t[25]),268435456&r[0]&&(e.isConnectable=t[28]),4096&r[0]&&(e.positionAbsoluteX=t[12]),8192&r[0]&&(e.positionAbsoluteY=t[13]),131072&r[0]&&(e.width=t[17]),262144&r[0]&&(e.height=t[18]),n.$set(e)}(!l||2&r[0])&&L(e,"data-id",t[1]),(!l||41943040&r[0]&&o!==(o=ye(["svelte-flow__node",`svelte-flow__node-${t[25]}`,t[23]])))&&L(e,"class",o),(!l||67109888&r[0]&&i!==(i=(t[10]??"")+";"+t[26].width+t[26].height))&&L(e,"style",i),a&&s(a.update)&&4718626&r[0]&&a.update.call(null,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[19],noDragClass:"nodrag",nodeClickDistance:t[22],onNodeMouseDown:t[31],onDrag:t[47],onDragStart:t[48],onDragStop:t[49],store:t[29]}),(!l||41943552&r[0])&&X(e,"dragging",t[9]),(!l||41943048&r[0])&&X(e,"selected",t[3]),(!l||41943056&r[0])&&X(e,"draggable",t[4]),(!l||41943104&r[0])&&X(e,"connectable",t[6]),(!l||41943072&r[0])&&X(e,"selectable",t[5]),(!l||41943056&r[0])&&X(e,"nopan",t[4]),(!l||41945088&r[0])&&X(e,"parent",t[11]);const c=67109888&r[0];(67175424&r[0]||c)&&T(e,"z-index",t[16]),(67122176&r[0]&&u!==(u=`translate(${t[12]}px, ${t[13]}px)`)||c)&&T(e,"transform",u),(68158464&r[0]||c)&&T(e,"visibility",t[20]?"visible":"hidden")},i(t){l||(n&&gt(n.$$.fragment,t),l=!0)},o(t){n&&mt(n.$$.fragment,t),l=!1},d(o){o&&S(e),n&&St(n),t[50](null),c=!1,r(d)}}}function el(t){let e,n,o=!t[8]&&tl(t);return{c(){o&&o.c(),e=z()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,n){t[8]?o&&(pt(),mt(o,1,1,(()=>{o=null})),ft()):o?(o.p(t,n),256&n[0]&&gt(o,1)):(o=tl(t),o.c(),gt(o,1),o.m(e.parentNode,e))},i(t){n||(gt(o),n=!0)},o(t){mt(o),n=!1},d(t){t&&S(e),o&&o.d(t)}}}function nl(t,e,n){let o,i,r,s,a,l,{node:c}=e,{id:h}=e,{data:p={}}=e,{selected:f=!1}=e,{draggable:g}=e,{selectable:m}=e,{connectable:y=!0}=e,{deletable:w=!0}=e,{hidden:$=!1}=e,{dragging:v=!1}=e,{resizeObserver:x=null}=e,{style:b}=e,{type:k="default"}=e,{isParent:_=!1}=e,{positionX:S}=e,{positionY:E}=e,{sourcePosition:C}=e,{targetPosition:O}=e,{zIndex:P}=e,{measuredWidth:M}=e,{measuredHeight:z}=e,{initialWidth:N}=e,{initialHeight:L}=e,{width:I}=e,{height:D}=e,{dragHandle:A}=e,{initialized:T=!1}=e,{parentId:H}=e,{nodeClickDistance:V}=e,{class:F=""}=e;const W=Fa(),{nodeTypes:X,nodeDragThreshold:Y,selectNodesOnDrag:R,handleNodeSelection:Z,updateNodeInternals:B}=W;let q;u(t,X,(t=>n(46,a=t)));let Q=null;const U=G(),tt=ge(y);let et,nt,ot;u(t,tt,(t=>n(28,l=t))),j("svelteflow__node_id",h),j("svelteflow__node_connectable",tt),K((()=>{Q&&x?.unobserve(Q)}));return t.$$set=t=>{"node"in t&&n(0,c=t.node),"id"in t&&n(1,h=t.id),"data"in t&&n(2,p=t.data),"selected"in t&&n(3,f=t.selected),"draggable"in t&&n(4,g=t.draggable),"selectable"in t&&n(5,m=t.selectable),"connectable"in t&&n(6,y=t.connectable),"deletable"in t&&n(7,w=t.deletable),"hidden"in t&&n(8,$=t.hidden),"dragging"in t&&n(9,v=t.dragging),"resizeObserver"in t&&n(35,x=t.resizeObserver),"style"in t&&n(10,b=t.style),"type"in t&&n(36,k=t.type),"isParent"in t&&n(11,_=t.isParent),"positionX"in t&&n(12,S=t.positionX),"positionY"in t&&n(13,E=t.positionY),"sourcePosition"in t&&n(14,C=t.sourcePosition),"targetPosition"in t&&n(15,O=t.targetPosition),"zIndex"in t&&n(16,P=t.zIndex),"measuredWidth"in t&&n(37,M=t.measuredWidth),"measuredHeight"in t&&n(38,z=t.measuredHeight),"initialWidth"in t&&n(39,N=t.initialWidth),"initialHeight"in t&&n(40,L=t.initialHeight),"width"in t&&n(17,I=t.width),"height"in t&&n(18,D=t.height),"dragHandle"in t&&n(19,A=t.dragHandle),"initialized"in t&&n(20,T=t.initialized),"parentId"in t&&n(21,H=t.parentId),"nodeClickDistance"in t&&n(22,V=t.nodeClickDistance),"class"in t&&n(23,F=t.class)},t.$$.update=()=>{if(32&t.$$.dirty[1]&&n(25,o=k||"default"),33554432&t.$$.dirty[0]|32768&t.$$.dirty[1]&&n(45,i=!!a[o]),33554432&t.$$.dirty[0]|32768&t.$$.dirty[1]&&n(27,r=a[o]||qs),16416&t.$$.dirty[1]&&(i||console.warn("003",or(k))),393216&t.$$.dirty[0]|960&t.$$.dirty[1]&&n(26,s=function({width:t,height:e,initialWidth:n,initialHeight:o,measuredWidth:i,measuredHeight:r}){if(void 0===i&&void 0===r){const i=t??n,r=e??o;return{width:i?`width:${i}px;`:"",height:r?`height:${r}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}({width:I,height:D,initialWidth:N,initialHeight:L,measuredWidth:M,measuredHeight:z})),64&t.$$.dirty[0]&&tt.set(!!y),50380802&t.$$.dirty[0]|14336&t.$$.dirty[1]){(et&&o!==et||nt&&C!==nt||ot&&O!==ot)&&requestAnimationFrame((()=>B(new Map([[h,{id:h,nodeElement:q,force:!0}]])))),n(42,et=o),n(43,nt=C),n(44,ot=O)}17825792&t.$$.dirty[0]|1040&t.$$.dirty[1]&&(!x||q===Q&&T||(Q&&x.unobserve(Q),q&&x.observe(q),n(41,Q=q)))},[c,h,p,f,g,m,y,w,$,v,b,_,S,E,C,O,P,I,D,A,T,H,V,F,q,o,s,r,l,W,X,Z,U,tt,function(t){m&&(!d(R)||!g||d(Y)>0)&&Z(h),U("nodeclick",{node:c.internals.userNode,event:t})},x,k,M,z,N,L,Q,et,nt,ot,i,a,(t,e,n,o)=>{U("nodedrag",{event:t,targetNode:n,nodes:o})},(t,e,n,o)=>{U("nodedragstart",{event:t,targetNode:n,nodes:o})},(t,e,n,o)=>{U("nodedragstop",{event:t,targetNode:n,nodes:o})},function(t){J[t?"unshift":"push"]((()=>{q=t,n(24,q)}))},t=>U("nodemouseenter",{node:c,event:t}),t=>U("nodemouseleave",{node:c,event:t}),t=>U("nodemousemove",{node:c,event:t}),t=>U("nodecontextmenu",{node:c,event:t})]}var ol=class extends Ct{constructor(t){super(),Et(this,t,nl,el,l,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:35,style:10,type:36,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:37,measuredHeight:38,initialWidth:39,initialHeight:40,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}};const{Map:il}=b;function rl(t,e,n){const o=t.slice();return o[21]=e[n],o}function sl(t,e){let n,o,i;return o=new ol({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&void 0===e[21].draggable),selectable:!!(e[21].selectable||e[3]&&void 0===e[21].selectable),connectable:!!(e[21].connectable||e[4]&&void 0===e[21].connectable),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:qr(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),o.$on("nodeclick",e[12]),o.$on("nodemouseenter",e[13]),o.$on("nodemousemove",e[14]),o.$on("nodemouseleave",e[15]),o.$on("nodedrag",e[16]),o.$on("nodedragstart",e[17]),o.$on("nodedragstop",e[18]),o.$on("nodecontextmenu",e[19]),{key:t,first:null,c(){n=z(),kt(o.$$.fragment),this.first=n},m(t,e){_(t,n,e),_t(o,t,e),i=!0},p(t,n){e=t;const i={};2&n&&(i.node=e[21]),2&n&&(i.id=e[21].id),2&n&&(i.data=e[21].data),2&n&&(i.selected=!!e[21].selected),2&n&&(i.hidden=!!e[21].hidden),6&n&&(i.draggable=!!(e[21].draggable||e[2]&&void 0===e[21].draggable)),10&n&&(i.selectable=!!(e[21].selectable||e[3]&&void 0===e[21].selectable)),18&n&&(i.connectable=!!(e[21].connectable||e[4]&&void 0===e[21].connectable)),2&n&&(i.deletable=e[21].deletable??!0),2&n&&(i.positionX=e[21].internals.positionAbsolute.x),2&n&&(i.positionY=e[21].internals.positionAbsolute.y),34&n&&(i.isParent=e[5].has(e[21].id)),2&n&&(i.style=e[21].style),2&n&&(i.class=e[21].class),2&n&&(i.type=e[21].type??"default"),2&n&&(i.sourcePosition=e[21].sourcePosition),2&n&&(i.targetPosition=e[21].targetPosition),2&n&&(i.dragging=e[21].dragging),2&n&&(i.zIndex=e[21].internals.z??0),2&n&&(i.dragHandle=e[21].dragHandle),2&n&&(i.initialized=qr(e[21])),2&n&&(i.width=e[21].width),2&n&&(i.height=e[21].height),2&n&&(i.initialWidth=e[21].initialWidth),2&n&&(i.initialHeight=e[21].initialHeight),2&n&&(i.measuredWidth=e[21].measured.width),2&n&&(i.measuredHeight=e[21].measured.height),2&n&&(i.parentId=e[21].parentId),1&n&&(i.nodeClickDistance=e[0]),o.$set(i)},i(t){i||(gt(o.$$.fragment,t),i=!0)},o(t){mt(o.$$.fragment,t),i=!1},d(t){t&&S(n),St(o,t)}}}function al(t){let e,n,o=[],i=new il,r=yt(t[1]);const s=t=>t[21].id;for(let e=0;e<r.length;e+=1){let n=rl(t,r,e),a=s(n);i.set(a,o[e]=sl(a,n))}return{c(){e=C("div");for(let t=0;t<o.length;t+=1)o[t].c();L(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(t,i){_(t,e,i);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);n=!0},p(t,[n]){2111&n&&(r=yt(t[1]),pt(),o=$t(o,n,s,1,t,r,i,e,wt,sl,null,rl),ft())},i(t){if(!n){for(let t=0;t<r.length;t+=1)gt(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)mt(o[t]);n=!1},d(t){t&&S(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function ll(t,e,n){let o,i,r,s,a,{nodeClickDistance:l=0}=e;const{visibleNodes:c,nodesDraggable:d,nodesConnectable:h,elementsSelectable:p,updateNodeInternals:f,parentLookup:g}=Fa();u(t,c,(t=>n(1,o=t))),u(t,d,(t=>n(2,i=t))),u(t,h,(t=>n(4,s=t))),u(t,p,(t=>n(3,r=t))),u(t,g,(t=>n(5,a=t)));const m="undefined"==typeof ResizeObserver?null:new ResizeObserver((t=>{const e=new Map;t.forEach((t=>{const n=t.target.getAttribute("data-id");e.set(n,{id:n,nodeElement:t.target,force:!0})})),f(e)}));return K((()=>{m?.disconnect()})),t.$$set=t=>{"nodeClickDistance"in t&&n(0,l=t.nodeClickDistance)},[l,o,i,r,s,a,c,d,h,p,g,m,function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)}]}var cl=class extends Ct{constructor(t){super(),Et(this,t,ll,al,a,{nodeClickDistance:0})}};function dl(t){let e,n,o,i,s,a,l,c;var d=t[27];function u(t,e){return{props:{id:t[0],source:t[1],target:t[2],sourceX:t[14],sourceY:t[15],targetX:t[16],targetY:t[17],sourcePosition:t[18],targetPosition:t[19],animated:t[6],selected:t[7],label:t[10],labelStyle:t[11],data:t[3],style:t[4],interactionWidth:t[21],selectable:t[24],deletable:t[8]??!0,type:t[23],sourceHandleId:t[12],targetHandleId:t[13],markerStart:t[26],markerEnd:t[25]}}}return d&&(o=Y(d,u(t))),{c(){e=O("svg"),n=O("g"),o&&kt(o.$$.fragment),L(n,"class",i=ye(["svelte-flow__edge",t[22]])),L(n,"data-id",t[0]),L(n,"aria-label",s=null===t[20]?void 0:t[20]?t[20]:`Edge from ${t[1]} to ${t[2]}`),L(n,"role","img"),X(n,"animated",t[6]),X(n,"selected",t[7]),X(n,"selectable",t[24]),T(e,"z-index",t[5])},m(i,r){_(i,e,r),k(e,n),o&&_t(o,n,null),a=!0,l||(c=[N(n,"click",t[32]),N(n,"contextmenu",t[41]),N(n,"mouseenter",t[42]),N(n,"mouseleave",t[43])],l=!0)},p(t,r){if(134217728&r[0]&&d!==(d=t[27])){if(o){pt();const t=o;mt(t.$$.fragment,1,0,(()=>{St(t,1)})),ft()}d?(o=Y(d,u(t)),kt(o.$$.fragment),gt(o.$$.fragment,1),_t(o,n,null)):o=null}else if(d){const e={};1&r[0]&&(e.id=t[0]),2&r[0]&&(e.source=t[1]),4&r[0]&&(e.target=t[2]),16384&r[0]&&(e.sourceX=t[14]),32768&r[0]&&(e.sourceY=t[15]),65536&r[0]&&(e.targetX=t[16]),131072&r[0]&&(e.targetY=t[17]),262144&r[0]&&(e.sourcePosition=t[18]),524288&r[0]&&(e.targetPosition=t[19]),64&r[0]&&(e.animated=t[6]),128&r[0]&&(e.selected=t[7]),1024&r[0]&&(e.label=t[10]),2048&r[0]&&(e.labelStyle=t[11]),8&r[0]&&(e.data=t[3]),16&r[0]&&(e.style=t[4]),2097152&r[0]&&(e.interactionWidth=t[21]),16777216&r[0]&&(e.selectable=t[24]),256&r[0]&&(e.deletable=t[8]??!0),8388608&r[0]&&(e.type=t[23]),4096&r[0]&&(e.sourceHandleId=t[12]),8192&r[0]&&(e.targetHandleId=t[13]),67108864&r[0]&&(e.markerStart=t[26]),33554432&r[0]&&(e.markerEnd=t[25]),o.$set(e)}(!a||4194304&r[0]&&i!==(i=ye(["svelte-flow__edge",t[22]])))&&L(n,"class",i),(!a||1&r[0])&&L(n,"data-id",t[0]),(!a||1048582&r[0]&&s!==(s=null===t[20]?void 0:t[20]?t[20]:`Edge from ${t[1]} to ${t[2]}`))&&L(n,"aria-label",s),(!a||4194368&r[0])&&X(n,"animated",t[6]),(!a||4194432&r[0])&&X(n,"selected",t[7]),(!a||20971520&r[0])&&X(n,"selectable",t[24]),32&r[0]&&T(e,"z-index",t[5])},i(t){a||(o&&gt(o.$$.fragment,t),a=!0)},o(t){o&&mt(o.$$.fragment,t),a=!1},d(t){t&&S(e),o&&St(o),l=!1,r(c)}}}function ul(t){let e,n,o=!t[9]&&dl(t);return{c(){o&&o.c(),e=z()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,n){t[9]?o&&(pt(),mt(o,1,1,(()=>{o=null})),ft()):o?(o.p(t,n),512&n[0]&&gt(o,1)):(o=dl(t),o.c(),gt(o,1),o.m(e.parentNode,e))},i(t){n||(gt(o),n=!0)},o(t){mt(o),n=!1},d(t){t&&S(e),o&&o.d(t)}}}function hl(t,e,n){let o,i,r,s,a,l,c,d,h,{id:p}=e,{type:f="default"}=e,{source:g=""}=e,{target:m=""}=e,{data:y={}}=e,{style:w}=e,{zIndex:$}=e,{animated:v=!1}=e,{selected:x=!1}=e,{selectable:b}=e,{deletable:k}=e,{hidden:_=!1}=e,{label:S}=e,{labelStyle:E}=e,{markerStart:C}=e,{markerEnd:O}=e,{sourceHandle:P}=e,{targetHandle:M}=e,{sourceX:z}=e,{sourceY:N}=e,{targetX:L}=e,{targetY:I}=e,{sourcePosition:D}=e,{targetPosition:A}=e,{ariaLabel:T}=e,{interactionWidth:H}=e,{class:V=""}=e;j("svelteflow__edge_id",p);const{edgeLookup:F,edgeTypes:W,flowId:X,elementsSelectable:Y}=Fa();u(t,F,(t=>n(44,l=t))),u(t,W,(t=>n(40,h=t))),u(t,X,(t=>n(39,d=t))),u(t,Y,(t=>n(38,c=t)));const R=G(),Z=da();function B(t,e){const n=l.get(p);n&&R(e,{event:t,edge:n})}return t.$$set=t=>{"id"in t&&n(0,p=t.id),"type"in t&&n(34,f=t.type),"source"in t&&n(1,g=t.source),"target"in t&&n(2,m=t.target),"data"in t&&n(3,y=t.data),"style"in t&&n(4,w=t.style),"zIndex"in t&&n(5,$=t.zIndex),"animated"in t&&n(6,v=t.animated),"selected"in t&&n(7,x=t.selected),"selectable"in t&&n(35,b=t.selectable),"deletable"in t&&n(8,k=t.deletable),"hidden"in t&&n(9,_=t.hidden),"label"in t&&n(10,S=t.label),"labelStyle"in t&&n(11,E=t.labelStyle),"markerStart"in t&&n(36,C=t.markerStart),"markerEnd"in t&&n(37,O=t.markerEnd),"sourceHandle"in t&&n(12,P=t.sourceHandle),"targetHandle"in t&&n(13,M=t.targetHandle),"sourceX"in t&&n(14,z=t.sourceX),"sourceY"in t&&n(15,N=t.sourceY),"targetX"in t&&n(16,L=t.targetX),"targetY"in t&&n(17,I=t.targetY),"sourcePosition"in t&&n(18,D=t.sourcePosition),"targetPosition"in t&&n(19,A=t.targetPosition),"ariaLabel"in t&&n(20,T=t.ariaLabel),"interactionWidth"in t&&n(21,H=t.interactionWidth),"class"in t&&n(22,V=t.class)},t.$$.update=()=>{8&t.$$.dirty[1]&&n(23,o=f||"default"),8388608&t.$$.dirty[0]|512&t.$$.dirty[1]&&n(27,i=h[o]||ka),288&t.$$.dirty[1]&&n(26,r=C?`url('#${ws(C,d)}')`:void 0),320&t.$$.dirty[1]&&n(25,s=O?`url('#${ws(O,d)}')`:void 0),144&t.$$.dirty[1]&&n(24,a=b??c)},[p,g,m,y,w,$,v,x,k,_,S,E,P,M,z,N,L,I,D,A,T,H,V,o,a,s,r,i,F,W,X,Y,function(t){const e=l.get(p);e&&(Z(p),R("edgeclick",{event:t,edge:e}))},B,f,b,C,O,c,d,h,t=>{B(t,"edgecontextmenu")},t=>{B(t,"edgemouseenter")},t=>{B(t,"edgemouseleave")}]}var pl=class extends Ct{constructor(t){super(),Et(this,t,hl,ul,l,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}};function fl(t,e,n){let{onMount:o}=e,{onDestroy:i}=e;return B((()=>(o?.(),i))),t.$$set=t=>{"onMount"in t&&n(0,o=t.onMount),"onDestroy"in t&&n(1,i=t.onDestroy)},[o,i]}var gl=class extends Ct{constructor(t){super(),Et(this,t,fl,null,a,{onMount:0,onDestroy:1})}};function ml(t,e,n){const o=t.slice();return o[2]=e[n],o}function yl(t,e){let o,i,r;const s=[e[2]];let a={};for(let t=0;t<s.length;t+=1)a=n(a,s[t]);return i=new Sl({props:a}),{key:t,first:null,c(){o=z(),kt(i.$$.fragment),this.first=o},m(t,e){_(t,o,e),_t(i,t,e),r=!0},p(t,n){e=t;const o=1&n?vt(s,[xt(e[2])]):{};i.$set(o)},i(t){r||(gt(i.$$.fragment,t),r=!0)},o(t){mt(i.$$.fragment,t),r=!1},d(t){t&&S(o),St(i,t)}}}function wl(t){let e,n,o=[],i=new Map,r=yt(t[0]);const s=t=>t[2].id;for(let e=0;e<r.length;e+=1){let n=ml(t,r,e),a=s(n);i.set(a,o[e]=yl(a,n))}return{c(){e=O("defs");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,i){_(t,e,i);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);n=!0},p(t,[n]){1&n&&(r=yt(t[0]),pt(),o=$t(o,n,s,1,t,r,i,e,wt,yl,null,ml),ft())},i(t){if(!n){for(let t=0;t<r.length;t+=1)gt(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)mt(o[t]);n=!1},d(t){t&&S(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function $l(t,e,n){let o;const{markers:i}=Fa();return u(t,i,(t=>n(0,o=t))),[o,i]}var vl=class extends Ct{constructor(t){super(),Et(this,t,$l,wl,a,{})}};function xl(t){let e;return{c(){e=O("polyline"),L(e,"stroke",t[6]),L(e,"stroke-linecap","round"),L(e,"stroke-linejoin","round"),L(e,"stroke-width",t[7]),L(e,"fill",t[6]),L(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(t,n){_(t,e,n)},p(t,n){64&n&&L(e,"stroke",t[6]),128&n&&L(e,"stroke-width",t[7]),64&n&&L(e,"fill",t[6])},d(t){t&&S(e)}}}function bl(t){let e;return{c(){e=O("polyline"),L(e,"stroke",t[6]),L(e,"stroke-linecap","round"),L(e,"stroke-linejoin","round"),L(e,"stroke-width",t[7]),L(e,"fill","none"),L(e,"points","-5,-4 0,0 -5,4")},m(t,n){_(t,e,n)},p(t,n){64&n&&L(e,"stroke",t[6]),128&n&&L(e,"stroke-width",t[7])},d(t){t&&S(e)}}}function kl(t){let n,o,i;function r(t,e){return t[1]===pr.Arrow?bl:t[1]===pr.ArrowClosed?xl:void 0}let s=r(t),a=s&&s(t);return{c(){n=O("marker"),a&&a.c(),L(n,"class","svelte-flow__arrowhead"),L(n,"id",t[0]),L(n,"markerWidth",o=`${t[2]}`),L(n,"markerHeight",i=`${t[3]}`),L(n,"viewBox","-10 -10 20 20"),L(n,"markerUnits",t[4]),L(n,"orient",t[5]),L(n,"refX","0"),L(n,"refY","0")},m(t,e){_(t,n,e),a&&a.m(n,null)},p(t,[e]){s===(s=r(t))&&a?a.p(t,e):(a&&a.d(1),a=s&&s(t),a&&(a.c(),a.m(n,null))),1&e&&L(n,"id",t[0]),4&e&&o!==(o=`${t[2]}`)&&L(n,"markerWidth",o),8&e&&i!==(i=`${t[3]}`)&&L(n,"markerHeight",i),16&e&&L(n,"markerUnits",t[4]),32&e&&L(n,"orient",t[5])},i:e,o:e,d(t){t&&S(n),a&&a.d()}}}function _l(t,e,n){let{id:o}=e,{type:i}=e,{width:r=12.5}=e,{height:s=12.5}=e,{markerUnits:a="strokeWidth"}=e,{orient:l="auto-start-reverse"}=e,{color:c}=e,{strokeWidth:d}=e;return t.$$set=t=>{"id"in t&&n(0,o=t.id),"type"in t&&n(1,i=t.type),"width"in t&&n(2,r=t.width),"height"in t&&n(3,s=t.height),"markerUnits"in t&&n(4,a=t.markerUnits),"orient"in t&&n(5,l=t.orient),"color"in t&&n(6,c=t.color),"strokeWidth"in t&&n(7,d=t.strokeWidth)},[o,i,r,s,a,l,c,d]}var Sl=class extends Ct{constructor(t){super(),Et(this,t,_l,kl,a,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}};function El(t,e,n){const o=t.slice();return o[14]=e[n],o}function Cl(t,e){let n,o,i;return o=new pl({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),o.$on("edgeclick",e[7]),o.$on("edgecontextmenu",e[8]),o.$on("edgemouseenter",e[9]),o.$on("edgemouseleave",e[10]),{key:t,first:null,c(){n=z(),kt(o.$$.fragment),this.first=n},m(t,e){_(t,n,e),_t(o,t,e),i=!0},p(t,n){e=t;const i={};1&n&&(i.id=e[14].id),1&n&&(i.source=e[14].source),1&n&&(i.target=e[14].target),1&n&&(i.data=e[14].data),1&n&&(i.style=e[14].style),1&n&&(i.animated=e[14].animated),1&n&&(i.selected=e[14].selected),3&n&&(i.selectable=e[14].selectable??e[1]),1&n&&(i.deletable=e[14].deletable),1&n&&(i.hidden=e[14].hidden),1&n&&(i.label=e[14].label),1&n&&(i.labelStyle=e[14].labelStyle),1&n&&(i.markerStart=e[14].markerStart),1&n&&(i.markerEnd=e[14].markerEnd),1&n&&(i.sourceHandle=e[14].sourceHandle),1&n&&(i.targetHandle=e[14].targetHandle),1&n&&(i.sourceX=e[14].sourceX),1&n&&(i.sourceY=e[14].sourceY),1&n&&(i.targetX=e[14].targetX),1&n&&(i.targetY=e[14].targetY),1&n&&(i.sourcePosition=e[14].sourcePosition),1&n&&(i.targetPosition=e[14].targetPosition),1&n&&(i.ariaLabel=e[14].ariaLabel),1&n&&(i.interactionWidth=e[14].interactionWidth),1&n&&(i.class=e[14].class),1&n&&(i.type=e[14].type||"default"),1&n&&(i.zIndex=e[14].zIndex),o.$set(i)},i(t){i||(gt(o.$$.fragment,t),i=!0)},o(t){mt(o.$$.fragment,t),i=!1},d(t){t&&S(n),St(o,t)}}}function Ol(t){let e,n;return e=new gl({props:{onMount:t[11],onDestroy:t[12]}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};4&n&&(o.onMount=t[11]),4&n&&(o.onDestroy=t[12]),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Pl(t){let e,n,o,i,r,s,a=[],l=new Map;o=new vl({});let c=yt(t[0]);const d=t=>t[14].id;for(let e=0;e<c.length;e+=1){let n=El(t,c,e),o=d(n);l.set(o,a[e]=Cl(o,n))}let u=t[0].length>0&&Ol(t);return{c(){e=C("div"),n=O("svg"),kt(o.$$.fragment),i=M();for(let t=0;t<a.length;t+=1)a[t].c();r=M(),u&&u.c(),L(n,"class","svelte-flow__marker"),L(e,"class","svelte-flow__edges")},m(t,l){_(t,e,l),k(e,n),_t(o,n,null),k(e,i);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(e,null);k(e,r),u&&u.m(e,null),s=!0},p(t,[n]){3&n&&(c=yt(t[0]),pt(),a=$t(a,n,d,1,t,c,l,e,wt,Cl,r,El),ft()),t[0].length>0?u?(u.p(t,n),1&n&&gt(u,1)):(u=Ol(t),u.c(),gt(u,1),u.m(e,null)):u&&(pt(),mt(u,1,1,(()=>{u=null})),ft())},i(t){if(!s){gt(o.$$.fragment,t);for(let t=0;t<c.length;t+=1)gt(a[t]);gt(u),s=!0}},o(t){mt(o.$$.fragment,t);for(let t=0;t<a.length;t+=1)mt(a[t]);mt(u),s=!1},d(t){t&&S(e),St(o);for(let t=0;t<a.length;t+=1)a[t].d();u&&u.d()}}}function Ml(t,e,n){let o,i,r,{defaultEdgeOptions:s}=e;const{visibleEdges:a,edgesInitialized:l,edges:{setDefaultOptions:c},elementsSelectable:d}=Fa();u(t,a,(t=>n(0,o=t))),u(t,l,(t=>n(2,r=t))),u(t,d,(t=>n(1,i=t))),B((()=>{s&&c(s)}));return t.$$set=t=>{"defaultEdgeOptions"in t&&n(6,s=t.defaultEdgeOptions)},[o,i,r,a,l,d,s,function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},()=>{v(l,r=!0,r)},()=>{v(l,r=!1,r)}]}var zl=class extends Ct{constructor(t){super(),Et(this,t,Ml,Pl,a,{defaultEdgeOptions:6})}};function Nl(t){let e;return{c(){e=C("div"),L(e,"class","svelte-flow__selection svelte-1iugwpu"),T(e,"width","string"==typeof t[2]?t[2]:`${t[2]}px`),T(e,"height","string"==typeof t[3]?t[3]:`${t[3]}px`),T(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},m(t,n){_(t,e,n)},p(t,n){4&n&&T(e,"width","string"==typeof t[2]?t[2]:`${t[2]}px`),8&n&&T(e,"height","string"==typeof t[3]?t[3]:`${t[3]}px`),3&n&&T(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},d(t){t&&S(e)}}}function Ll(t){let n,o=t[4]&&Nl(t);return{c(){o&&o.c(),n=z()},m(t,e){o&&o.m(t,e),_(t,n,e)},p(t,[e]){t[4]?o?o.p(t,e):(o=Nl(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:e,o:e,d(t){t&&S(n),o&&o.d(t)}}}function Il(t,e,n){let{x:o=0}=e,{y:i=0}=e,{width:r=0}=e,{height:s=0}=e,{isVisible:a=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"width"in t&&n(2,r=t.width),"height"in t&&n(3,s=t.height),"isVisible"in t&&n(4,a=t.isVisible)},[o,i,r,s,a]}var Dl=class extends Ct{constructor(t){super(),Et(this,t,Il,Ll,a,{x:0,y:1,width:2,height:3,isVisible:4})}};function Al(t){let e,n;return e=new Dl({props:{isVisible:!(!t[0]||"user"!==t[1]),width:t[0]?.width,height:t[0]?.height,x:t[0]?.x,y:t[0]?.y}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,[n]){const o={};3&n&&(o.isVisible=!(!t[0]||"user"!==t[1])),1&n&&(o.width=t[0]?.width),1&n&&(o.height=t[0]?.height),1&n&&(o.x=t[0]?.x),1&n&&(o.y=t[0]?.y),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Tl(t,e,n){let o,i;const{selectionRect:r,selectionRectMode:s}=Fa();return u(t,r,(t=>n(0,o=t))),u(t,s,(t=>n(1,i=t))),[o,i,r,s]}var Hl=class extends Ct{constructor(t){super(),Et(this,t,Tl,Al,a,{})}};function Vl(t){let e,n,o,i,s;return n=new Dl({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=C("div"),kt(n.$$.fragment),L(e,"class","selection-wrapper nopan svelte-5pxri"),T(e,"width",t[1].width+"px"),T(e,"height",t[1].height+"px"),T(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)"),L(e,"role","button"),L(e,"tabindex","-1")},m(r,a){_(r,e,a),_t(n,e,null),o=!0,i||(s=[x(Ja.call(null,e,{disabled:!1,store:t[2],onDrag:t[11],onDragStart:t[12],onDragStop:t[13]})),N(e,"contextmenu",t[7]),N(e,"click",t[8]),N(e,"keyup",Wl)],i=!0)},p(t,n){(!o||2&n)&&T(e,"width",t[1].width+"px"),(!o||2&n)&&T(e,"height",t[1].height+"px"),(!o||2&n)&&T(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)")},i(t){o||(gt(n.$$.fragment,t),o=!0)},o(t){mt(n.$$.fragment,t),o=!1},d(t){t&&S(e),St(n),i=!1,r(s)}}}function Fl(t){let e,n,o="nodes"===t[0]&&t[1]&&Wr(t[1].x)&&Wr(t[1].y),i=o&&Vl(t);return{c(){i&&i.c(),e=z()},m(t,o){i&&i.m(t,o),_(t,e,o),n=!0},p(t,[n]){3&n&&(o="nodes"===t[0]&&t[1]&&Wr(t[1].x)&&Wr(t[1].y)),o?i?(i.p(t,n),3&n&&gt(i,1)):(i=Vl(t),i.c(),gt(i,1),i.m(e.parentNode,e)):i&&(pt(),mt(i,1,1,(()=>{i=null})),ft())},i(t){n||(gt(i),n=!0)},o(t){mt(i),n=!1},d(t){t&&S(e),i&&i.d(t)}}}const Wl=()=>{};function Xl(t,e,n){let o,i,r;const s=Fa(),{selectionRectMode:a,nodes:l,nodeLookup:c}=s;u(t,a,(t=>n(0,r=t))),u(t,l,(t=>n(9,o=t))),u(t,c,(t=>n(10,i=t)));const d=G();let h=null;return t.$$.update=()=>{1537&t.$$.dirty&&"nodes"===r&&n(1,h=xr(i,{filter:t=>!!t.selected}))},[r,h,s,a,l,c,d,function(t){const e=o.filter((t=>t.selected));d("selectioncontextmenu",{nodes:e,event:t})},function(t){const e=o.filter((t=>t.selected));d("selectionclick",{nodes:e,event:t})},o,i,(t,e,n,o)=>{d("nodedrag",{event:t,targetNode:null,nodes:o})},(t,e,n,o)=>{d("nodedragstart",{event:t,targetNode:null,nodes:o})},(t,e,n,o)=>{d("nodedragstop",{event:t,targetNode:null,nodes:o})}]}var Yl=class extends Ct{constructor(t){super(),Et(this,t,Xl,Fl,a,{})}};function Rl(t,e){let{enabled:n=!0,trigger:o,type:i="keydown"}=e;function r(e){const n=Array.isArray(o)?o:[o],i={alt:e.altKey,ctrl:e.ctrlKey,shift:e.shiftKey,meta:e.metaKey};for(const o of n){const n={modifier:[],preventDefault:!1,enabled:!0,...o},{modifier:r,key:s,callback:a,preventDefault:l,enabled:c}=n;if(c){if(r.length){if(!(Array.isArray(r)?r:[r]).map((t=>"string"==typeof t?[t]:t)).some((t=>t.every((t=>i[t])))))continue}if(e.key===s){l&&e.preventDefault();const o={node:t,trigger:n,originalEvent:e};t.dispatchEvent(new CustomEvent("shortcut",{detail:o})),a?.(o)}}}}return n&&t.addEventListener(i,r),{update:e=>{const{enabled:s=!0,type:a="keydown"}=e;!n||s&&i===a?!n&&s&&t.addEventListener(a,r):t.removeEventListener(i,r),n=s,i=a,o=e.trigger},destroy:()=>{t.removeEventListener(i,r)}}}function Zl(t){let n,o,i,a,l,c,d,u,h,p,f,g;return{c:e,m(e,r){f||(g=[x(n=Rl.call(null,window,{trigger:Gl(t[0],t[11]),type:"keydown"})),x(o=Rl.call(null,window,{trigger:Gl(t[0],t[12]),type:"keyup"})),x(i=Rl.call(null,window,{trigger:Gl(t[1],t[13]),type:"keydown"})),x(a=Rl.call(null,window,{trigger:Gl(t[1],t[14]),type:"keyup"})),x(l=Rl.call(null,window,{trigger:Gl(t[2],t[15]),type:"keydown"})),x(c=Rl.call(null,window,{trigger:Gl(t[2],t[16]),type:"keyup"})),x(d=Rl.call(null,window,{trigger:Gl(t[3],t[17]),type:"keydown"})),x(u=Rl.call(null,window,{trigger:Gl(t[3],t[18]),type:"keyup"})),x(h=Rl.call(null,window,{trigger:Gl(t[4],t[19]),type:"keydown"})),x(p=Rl.call(null,window,{trigger:Gl(t[4],t[20]),type:"keyup"})),N(window,"blur",t[10]),N(window,"contextmenu",t[10])],f=!0)},p(t,[e]){n&&s(n.update)&&1&e&&n.update.call(null,{trigger:Gl(t[0],t[11]),type:"keydown"}),o&&s(o.update)&&1&e&&o.update.call(null,{trigger:Gl(t[0],t[12]),type:"keyup"}),i&&s(i.update)&&2&e&&i.update.call(null,{trigger:Gl(t[1],t[13]),type:"keydown"}),a&&s(a.update)&&2&e&&a.update.call(null,{trigger:Gl(t[1],t[14]),type:"keyup"}),l&&s(l.update)&&4&e&&l.update.call(null,{trigger:Gl(t[2],t[15]),type:"keydown"}),c&&s(c.update)&&4&e&&c.update.call(null,{trigger:Gl(t[2],t[16]),type:"keyup"}),d&&s(d.update)&&8&e&&d.update.call(null,{trigger:Gl(t[3],t[17]),type:"keydown"}),u&&s(u.update)&&8&e&&u.update.call(null,{trigger:Gl(t[3],t[18]),type:"keyup"}),h&&s(h.update)&&16&e&&h.update.call(null,{trigger:Gl(t[4],t[19]),type:"keydown"}),p&&s(p.update)&&16&e&&p.update.call(null,{trigger:Gl(t[4],t[20]),type:"keyup"})},i:e,o:e,d(t){f=!1,r(g)}}}function Bl(t){return null!==t&&"object"==typeof t}function Kl(t){return Bl(t)&&t.modifier||[]}function Gl(t,e){return(Array.isArray(t)?t:[t]).map((t=>{const n=function(t){return null==t?"":Bl(t)?t.key:t}(t);return{key:n,modifier:Kl(t),enabled:null!==n,callback:e}}))}function jl(t,e,n){let{selectionKey:o="Shift"}=e,{multiSelectionKey:i=(Kr()?"Meta":"Control")}=e,{deleteKey:r="Backspace"}=e,{panActivationKey:s=" "}=e,{zoomActivationKey:a=(Kr()?"Meta":"Control")}=e;const{selectionKeyPressed:l,multiselectionKeyPressed:c,deleteKeyPressed:d,panActivationKeyPressed:u,zoomActivationKeyPressed:h,selectionRect:p}=Fa();return t.$$set=t=>{"selectionKey"in t&&n(0,o=t.selectionKey),"multiSelectionKey"in t&&n(1,i=t.multiSelectionKey),"deleteKey"in t&&n(2,r=t.deleteKey),"panActivationKey"in t&&n(3,s=t.panActivationKey),"zoomActivationKey"in t&&n(4,a=t.zoomActivationKey)},[o,i,r,s,a,l,c,d,u,h,function(){p.set(null),l.set(!1),c.set(!1),d.set(!1),u.set(!1),h.set(!1)},()=>l.set(!0),()=>l.set(!1),()=>c.set(!0),()=>c.set(!1),t=>{t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey||function(t){const e=t.composedPath?.()?.[0]||t.target;return Jr.includes(e?.nodeName)||e?.hasAttribute("contenteditable")||!!e?.closest(".nokey")}(t.originalEvent)||d.set(!0)},()=>d.set(!1),()=>u.set(!0),()=>u.set(!1),()=>h.set(!0),()=>h.set(!1)]}var ql=class extends Ct{constructor(t){super(),Et(this,t,jl,Zl,a,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}};const Ql=t=>({}),Ul=t=>({});function Jl(t){let e,n,o,i;const r=t[13].connectionLine,s=h(r,t,t[12],Ul);let a=!t[2]&&tc(t);return{c(){e=O("svg"),n=O("g"),s&&s.c(),a&&a.c(),L(n,"class",o=ye(["svelte-flow__connection",yr(t[3].isValid)])),L(e,"width",t[5]),L(e,"height",t[6]),L(e,"class","svelte-flow__connectionline"),L(e,"style",t[0])},m(t,o){_(t,e,o),k(e,n),s&&s.m(n,null),a&&a.m(n,null),i=!0},p(t,l){s&&s.p&&(!i||4096&l)&&g(s,r,t,t[12],i?f(r,t[12],l,Ql):m(t[12]),Ul),t[2]?a&&(a.d(1),a=null):a?a.p(t,l):(a=tc(t),a.c(),a.m(n,null)),(!i||8&l&&o!==(o=ye(["svelte-flow__connection",yr(t[3].isValid)])))&&L(n,"class",o),(!i||32&l)&&L(e,"width",t[5]),(!i||64&l)&&L(e,"height",t[6]),(!i||1&l)&&L(e,"style",t[0])},i(t){i||(gt(s,t),i=!0)},o(t){mt(s,t),i=!1},d(t){t&&S(e),s&&s.d(t),a&&a.d()}}}function tc(t){let e;return{c(){e=O("path"),L(e,"d",t[4]),L(e,"style",t[1]),L(e,"fill","none"),L(e,"class","svelte-flow__connection-path")},m(t,n){_(t,e,n)},p(t,n){16&n&&L(e,"d",t[4]),2&n&&L(e,"style",t[1])},d(t){t&&S(e)}}}function ec(t){let e,n,o=t[3].inProgress&&Jl(t);return{c(){o&&o.c(),e=z()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,[n]){t[3].inProgress?o?(o.p(t,n),8&n&&gt(o,1)):(o=Jl(t),o.c(),gt(o,1),o.m(e.parentNode,e)):o&&(pt(),mt(o,1,1,(()=>{o=null})),ft())},i(t){n||(gt(o),n=!0)},o(t){mt(o),n=!1},d(t){t&&S(e),o&&o.d(t)}}}function nc(t,e,n){let o,i,r,s,{$$slots:a={},$$scope:l}=e,{containerStyle:c=""}=e,{style:d=""}=e,{isCustomComponent:h=!1}=e;const{width:p,height:f,connection:g,connectionLineType:m}=Fa();u(t,p,(t=>n(5,r=t))),u(t,f,(t=>n(6,s=t))),u(t,g,(t=>n(3,i=t))),u(t,m,(t=>n(11,o=t)));let y=null;return t.$$set=t=>{"containerStyle"in t&&n(0,c=t.containerStyle),"style"in t&&n(1,d=t.style),"isCustomComponent"in t&&n(2,h=t.isCustomComponent),"$$scope"in t&&n(12,l=t.$$scope)},t.$$.update=()=>{if(2060&t.$$.dirty&&i.inProgress&&!h){const{from:t,to:e,fromPosition:r,toPosition:s}=i,a={sourceX:t.x,sourceY:t.y,sourcePosition:r,targetX:e.x,targetY:e.y,targetPosition:s};switch(o){case hr.Bezier:n(4,[y]=rs(a),y);break;case hr.Step:n(4,[y]=ps({...a,borderRadius:0}),y);break;case hr.SmoothStep:n(4,[y]=ps(a),y);break;default:n(4,[y]=cs(a),y)}}},[c,d,h,i,y,r,s,p,f,g,m,o,l,a]}var oc=class extends Ct{constructor(t){super(),Et(this,t,nc,ec,a,{containerStyle:0,style:1,isCustomComponent:2})}};function ic(t){let e,o,i;const r=t[8].default,s=h(r,t,t[7],null);let a=[{class:o=ye(["svelte-flow__panel",t[1],...t[2]])},{style:t[0]},t[5]],l={};for(let t=0;t<a.length;t+=1)l=n(l,a[t]);return{c(){e=C("div"),s&&s.c(),D(e,l),T(e,"pointer-events",t[3]?"none":"")},m(t,n){_(t,e,n),s&&s.m(e,null),i=!0},p(t,[n]){s&&s.p&&(!i||128&n)&&g(s,r,t,t[7],i?f(r,t[7],n,null):m(t[7]),null),D(e,l=vt(a,[(!i||6&n&&o!==(o=ye(["svelte-flow__panel",t[1],...t[2]])))&&{class:o},(!i||1&n)&&{style:t[0]},32&n&&t[5]])),T(e,"pointer-events",t[3]?"none":"")},i(t){i||(gt(s,t),i=!0)},o(t){mt(s,t),i=!1},d(t){t&&S(e),s&&s.d(t)}}}function rc(t,e,o){let i;const r=["position","style","class"];let s,a=w(e,r),{$$slots:l={},$$scope:c}=e,{position:d="top-right"}=e,{style:h}=e,{class:p}=e;const{selectionRectMode:f}=Fa();return u(t,f,(t=>o(3,s=t))),t.$$set=t=>{e=n(n({},e),y(t)),o(5,a=w(e,r)),"position"in t&&o(6,d=t.position),"style"in t&&o(0,h=t.style),"class"in t&&o(1,p=t.class),"$$scope"in t&&o(7,c=t.$$scope)},t.$$.update=()=>{64&t.$$.dirty&&o(2,i=`${d}`.split("-"))},[h,p,i,s,f,a,d,c,l]}var sc=class extends Ct{constructor(t){super(),Et(this,t,rc,ic,a,{position:6,style:0,class:1})}};function ac(t){let e,n;return e=new sc({props:{position:t[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[lc]},$$scope:{ctx:t}}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.position=t[1]),4&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function lc(t){let n;return{c(){n=C("a"),n.textContent="Svelte Flow",L(n,"href","https://svelteflow.dev"),L(n,"target","_blank"),L(n,"rel","noopener noreferrer"),L(n,"aria-label","Svelte Flow attribution")},m(t,e){_(t,n,e)},p:e,d(t){t&&S(n)}}}function cc(t){let e,n,o=!t[0]?.hideAttribution&&ac(t);return{c(){o&&o.c(),e=z()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,[n]){t[0]?.hideAttribution?o&&(pt(),mt(o,1,1,(()=>{o=null})),ft()):o?(o.p(t,n),1&n&&gt(o,1)):(o=ac(t),o.c(),gt(o,1),o.m(e.parentNode,e))},i(t){n||(gt(o),n=!0)},o(t){mt(o),n=!1},d(t){t&&S(e),o&&o.d(t)}}}function dc(t,e,n){let{proOptions:o}=e,{position:i="bottom-right"}=e;return t.$$set=t=>{"proOptions"in t&&n(0,o=t.proOptions),"position"in t&&n(1,i=t.position)},[o,i]}var uc=class extends Ct{constructor(t){super(),Et(this,t,dc,cc,a,{proOptions:0,position:1})}};function hc(t,{nodeTypes:e,edgeTypes:n,minZoom:o,maxZoom:i,translateExtent:r,paneClickDistance:s}){void 0!==e&&t.setNodeTypes(e),void 0!==n&&t.setEdgeTypes(n),void 0!==o&&t.setMinZoom(o),void 0!==i&&t.setMaxZoom(i),void 0!==r&&t.setTranslateExtent(r),void 0!==s&&t.setPaneClickDistance(s)}function pc(t,e){var n;(n=e,Object.keys(n)).forEach((n=>{const o=e[n];void 0!==o&&t[n].set(o)}))}function fc(t="light"){const e=fe("light",(e=>{if("system"!==t)return void e(t);const n="undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null,o=()=>e(n?.matches?"dark":"light");return e(n?.matches?"dark":"light"),n?.addEventListener("change",o),()=>{n?.removeEventListener("change",o)}}));return e}const gc=t=>({}),mc=t=>({slot:"connectionLine"});function yc(t){let e;const n=t[75].connectionLine,o=h(n,t,t[99],mc);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,i){o&&o.p&&(!e||64&i[3])&&g(o,n,t,t[99],e?f(n,t[99],i,gc):m(t[99]),mc)},i(t){e||(gt(o,t),e=!0)},o(t){mt(o,t),e=!1},d(t){o&&o.d(t)}}}function wc(t){let e,n,o,i,r,s,a,l,c,d,u,h;return e=new zl({props:{defaultEdgeOptions:t[21]}}),e.$on("edgeclick",t[78]),e.$on("edgecontextmenu",t[79]),e.$on("edgemouseenter",t[80]),e.$on("edgemouseleave",t[81]),o=new oc({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[34].connectionLine,$$slots:{connectionLine:[yc]},$$scope:{ctx:t}}}),c=new cl({props:{nodeClickDistance:t[23]}}),c.$on("nodeclick",t[82]),c.$on("nodemouseenter",t[83]),c.$on("nodemousemove",t[84]),c.$on("nodemouseleave",t[85]),c.$on("nodedragstart",t[86]),c.$on("nodedrag",t[87]),c.$on("nodedragstop",t[88]),c.$on("nodecontextmenu",t[89]),u=new Yl({}),u.$on("selectionclick",t[90]),u.$on("selectioncontextmenu",t[91]),u.$on("nodedragstart",t[92]),u.$on("nodedrag",t[93]),u.$on("nodedragstop",t[94]),{c(){kt(e.$$.fragment),n=M(),kt(o.$$.fragment),i=M(),r=C("div"),s=M(),a=C("div"),l=M(),kt(c.$$.fragment),d=M(),kt(u.$$.fragment),L(r,"class","svelte-flow__edgelabel-renderer"),L(a,"class","svelte-flow__viewport-portal")},m(t,p){_t(e,t,p),_(t,n,p),_t(o,t,p),_(t,i,p),_(t,r,p),_(t,s,p),_(t,a,p),_(t,l,p),_t(c,t,p),_(t,d,p),_t(u,t,p),h=!0},p(t,n){const i={};2097152&n[0]&&(i.defaultEdgeOptions=t[21]),e.$set(i);const r={};128&n[0]&&(r.containerStyle=t[7]),64&n[0]&&(r.style=t[6]),8&n[1]&&(r.isCustomComponent=t[34].connectionLine),64&n[3]&&(r.$$scope={dirty:n,ctx:t}),o.$set(r);const s={};8388608&n[0]&&(s.nodeClickDistance=t[23]),c.$set(s)},i(t){h||(gt(e.$$.fragment,t),gt(o.$$.fragment,t),gt(c.$$.fragment,t),gt(u.$$.fragment,t),h=!0)},o(t){mt(e.$$.fragment,t),mt(o.$$.fragment,t),mt(c.$$.fragment,t),mt(u.$$.fragment,t),h=!1},d(t){t&&(S(n),S(i),S(r),S(s),S(a),S(l),S(d)),St(e,t),St(o,t),St(c,t),St(u,t)}}}function $c(t){let e,n,o,i;return e=new Ua({props:{$$slots:{default:[wc]},$$scope:{ctx:t}}}),o=new Hl({}),{c(){kt(e.$$.fragment),n=M(),kt(o.$$.fragment)},m(t,r){_t(e,t,r),_(t,n,r),_t(o,t,r),i=!0},p(t,n){const o={};10485952&n[0]|8&n[1]|64&n[3]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){i||(gt(e.$$.fragment,t),gt(o.$$.fragment,t),i=!0)},o(t){mt(e.$$.fragment,t),mt(o.$$.fragment,t),i=!1},d(t){t&&S(n),St(e,t),St(o,t)}}}function vc(t){let e,n;return e=new ja({props:{panOnDrag:void 0===t[17]||t[17],selectionOnDrag:t[18],$$slots:{default:[$c]},$$scope:{ctx:t}}}),e.$on("paneclick",t[95]),e.$on("panecontextmenu",t[96]),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};131072&n[0]&&(o.panOnDrag=void 0===t[17]||t[17]),262144&n[0]&&(o.selectionOnDrag=t[18]),10485952&n[0]|8&n[1]|64&n[3]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function xc(t){let e,o,i,s,a,l,c,d,u,p,y,w;o=new ql({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),s=new Ra({props:{initialViewport:t[31],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:void 0===t[11]?cr.Free:t[11],preventScrolling:void 0===t[12]||t[12],zoomOnScroll:void 0===t[13]||t[13],zoomOnDoubleClick:void 0===t[14]||t[14],zoomOnPinch:void 0===t[15]||t[15],panOnScroll:void 0!==t[16]&&t[16],panOnDrag:void 0===t[17]||t[17],paneClickDistance:void 0===t[22]?0:t[22],$$slots:{default:[vc]},$$scope:{ctx:t}}}),l=new uc({props:{proOptions:t[20],position:t[19]}});const $=t[75].default,v=h($,t,t[99],null);let x=[{style:t[24]},{class:d=ye(["svelte-flow",t[25],t[30]])},{"data-testid":"svelte-flow__wrapper"},t[33],{role:"application"}],b={};for(let t=0;t<x.length;t+=1)b=n(b,x[t]);return{c(){e=C("div"),kt(o.$$.fragment),i=M(),kt(s.$$.fragment),a=M(),kt(l.$$.fragment),c=M(),v&&v.c(),D(e,b),rt((()=>t[98].call(e))),X(e,"svelte-12wlba6",!0)},m(n,r){_(n,e,r),_t(o,e,null),k(e,i),_t(s,e,null),k(e,a),_t(l,e,null),k(e,c),v&&v.m(e,null),t[97](e),u=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=C("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=W();let i;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=N(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=N(n.contentWindow,"resize",e),e()}),k(t,n),()=>{(o||i&&n.contentWindow)&&i(),S(n)}}(e,t[98].bind(e)),p=!0,y||(w=[N(e,"dragover",t[76]),N(e,"drop",t[77])],y=!0)},p(t,n){const i={};2&n[0]&&(i.selectionKey=t[1]),32&n[0]&&(i.deleteKey=t[5]),4&n[0]&&(i.panActivationKey=t[2]),8&n[0]&&(i.multiSelectionKey=t[3]),16&n[0]&&(i.zoomActivationKey=t[4]),o.$set(i);const r={};256&n[0]&&(r.onMoveStart=t[8]),512&n[0]&&(r.onMove=t[9]),1024&n[0]&&(r.onMoveEnd=t[10]),2048&n[0]&&(r.panOnScrollMode=void 0===t[11]?cr.Free:t[11]),4096&n[0]&&(r.preventScrolling=void 0===t[12]||t[12]),8192&n[0]&&(r.zoomOnScroll=void 0===t[13]||t[13]),16384&n[0]&&(r.zoomOnDoubleClick=void 0===t[14]||t[14]),32768&n[0]&&(r.zoomOnPinch=void 0===t[15]||t[15]),65536&n[0]&&(r.panOnScroll=void 0!==t[16]&&t[16]),131072&n[0]&&(r.panOnDrag=void 0===t[17]||t[17]),4194304&n[0]&&(r.paneClickDistance=void 0===t[22]?0:t[22]),10879168&n[0]|8&n[1]|64&n[3]&&(r.$$scope={dirty:n,ctx:t}),s.$set(r);const a={};1048576&n[0]&&(a.proOptions=t[20]),524288&n[0]&&(a.position=t[19]),l.$set(a),v&&v.p&&(!p||64&n[3])&&g(v,$,t,t[99],p?f($,t[99],n,null):m(t[99]),null),D(e,b=vt(x,[(!p||16777216&n[0])&&{style:t[24]},(!p||1107296256&n[0]&&d!==(d=ye(["svelte-flow",t[25],t[30]])))&&{class:d},{"data-testid":"svelte-flow__wrapper"},4&n[1]&&t[33],{role:"application"}])),X(e,"svelte-12wlba6",!0)},i(t){p||(gt(o.$$.fragment,t),gt(s.$$.fragment,t),gt(l.$$.fragment,t),gt(v,t),p=!0)},o(t){mt(o.$$.fragment,t),mt(s.$$.fragment,t),mt(l.$$.fragment,t),mt(v,t),p=!1},d(n){n&&S(e),St(o),St(s),St(l),v&&v.d(n),t[97](null),u(),y=!1,r(w)}}}function bc(t,o,i){let r;const s=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let a,l,h,p=w(o,s),f=e,g=()=>(f(),f=c(M,(t=>i(100,l=t))),M),m=e;t.$$.on_destroy.push((()=>f())),t.$$.on_destroy.push((()=>m()));let{$$slots:$={},$$scope:v}=o;const x=function(t){const e={};for(const n in t)e[n]=!0;return e}($);let{id:b="1"}=o,{nodes:k}=o,{edges:_}=o,{fitView:S}=o,{fitViewOptions:E}=o,{minZoom:C}=o,{maxZoom:O}=o,{initialViewport:P}=o,{viewport:M}=o;g();let z,N,L,{nodeTypes:I}=o,{edgeTypes:D}=o,{selectionKey:A}=o,{selectionMode:T}=o,{panActivationKey:H}=o,{multiSelectionKey:V}=o,{zoomActivationKey:F}=o,{nodesDraggable:W}=o,{nodesConnectable:X}=o,{nodeDragThreshold:Y}=o,{elementsSelectable:R}=o,{snapGrid:K}=o,{deleteKey:G}=o,{connectionRadius:q}=o,{connectionLineType:U}=o,{connectionMode:tt=lr.Strict}=o,{connectionLineStyle:et=""}=o,{connectionLineContainerStyle:nt=""}=o,{onMoveStart:ot}=o,{onMove:it}=o,{onMoveEnd:rt}=o,{isValidConnection:st}=o,{translateExtent:at}=o,{nodeExtent:lt}=o,{onlyRenderVisibleElements:ct}=o,{panOnScrollMode:dt=cr.Free}=o,{preventScrolling:ut=!0}=o,{zoomOnScroll:ht=!0}=o,{zoomOnDoubleClick:pt=!0}=o,{zoomOnPinch:ft=!0}=o,{panOnScroll:gt=!1}=o,{panOnDrag:mt=!0}=o,{selectionOnDrag:yt}=o,{autoPanOnConnect:wt=!0}=o,{autoPanOnNodeDrag:$t=!0}=o,{onerror:vt}=o,{ondelete:xt}=o,{onedgecreate:bt}=o,{attributionPosition:kt}=o,{proOptions:_t}=o,{defaultEdgeOptions:St}=o,{width:Et}=o,{height:Ct}=o,{colorMode:Ot="light"}=o,{onconnect:Pt}=o,{onconnectstart:Mt}=o,{onconnectend:zt}=o,{onbeforedelete:Nt}=o,{oninit:Lt}=o,{nodeOrigin:It}=o,{paneClickDistance:Dt=0}=o,{nodeClickDistance:At=0}=o,{defaultMarkerColor:Tt="#b1b1b7"}=o,{style:Ht}=o,{class:Vt}=o;const Ft=l||P,Wt=function(t){return Z().$$.context.has(t)}(Ha)?Fa():function({nodes:t,edges:e,width:n,height:o,fitView:i,nodeOrigin:r,nodeExtent:s}){const a=Va({nodes:t,edges:e,width:n,height:o,fitView:i,nodeOrigin:r,nodeExtent:s});return j(Ha,{getStore:()=>a}),a}({nodes:d(k),edges:d(_),width:Et,height:Ct,fitView:S,nodeOrigin:It,nodeExtent:lt});B((()=>(Wt.width.set(N),Wt.height.set(L),Wt.domNode.set(z),Wt.syncNodeStores(k),Wt.syncEdgeStores(_),Wt.syncViewport(M),void 0!==S&&Wt.fitViewOnInit.set(S),E&&Wt.fitViewOptions.set(E),hc(Wt,{nodeTypes:I,edgeTypes:D,minZoom:C,maxZoom:O,translateExtent:at,paneClickDistance:Dt}),()=>{Wt.reset()})));const{initialized:Xt}=Wt;u(t,Xt,(t=>i(74,a=t)));let Yt=!1;return t.$$set=t=>{o=n(n({},o),y(t)),i(33,p=w(o,s)),"id"in t&&i(35,b=t.id),"nodes"in t&&i(36,k=t.nodes),"edges"in t&&i(37,_=t.edges),"fitView"in t&&i(38,S=t.fitView),"fitViewOptions"in t&&i(39,E=t.fitViewOptions),"minZoom"in t&&i(40,C=t.minZoom),"maxZoom"in t&&i(41,O=t.maxZoom),"initialViewport"in t&&i(42,P=t.initialViewport),"viewport"in t&&g(i(0,M=t.viewport)),"nodeTypes"in t&&i(43,I=t.nodeTypes),"edgeTypes"in t&&i(44,D=t.edgeTypes),"selectionKey"in t&&i(1,A=t.selectionKey),"selectionMode"in t&&i(45,T=t.selectionMode),"panActivationKey"in t&&i(2,H=t.panActivationKey),"multiSelectionKey"in t&&i(3,V=t.multiSelectionKey),"zoomActivationKey"in t&&i(4,F=t.zoomActivationKey),"nodesDraggable"in t&&i(46,W=t.nodesDraggable),"nodesConnectable"in t&&i(47,X=t.nodesConnectable),"nodeDragThreshold"in t&&i(48,Y=t.nodeDragThreshold),"elementsSelectable"in t&&i(49,R=t.elementsSelectable),"snapGrid"in t&&i(50,K=t.snapGrid),"deleteKey"in t&&i(5,G=t.deleteKey),"connectionRadius"in t&&i(51,q=t.connectionRadius),"connectionLineType"in t&&i(52,U=t.connectionLineType),"connectionMode"in t&&i(53,tt=t.connectionMode),"connectionLineStyle"in t&&i(6,et=t.connectionLineStyle),"connectionLineContainerStyle"in t&&i(7,nt=t.connectionLineContainerStyle),"onMoveStart"in t&&i(8,ot=t.onMoveStart),"onMove"in t&&i(9,it=t.onMove),"onMoveEnd"in t&&i(10,rt=t.onMoveEnd),"isValidConnection"in t&&i(54,st=t.isValidConnection),"translateExtent"in t&&i(55,at=t.translateExtent),"nodeExtent"in t&&i(56,lt=t.nodeExtent),"onlyRenderVisibleElements"in t&&i(57,ct=t.onlyRenderVisibleElements),"panOnScrollMode"in t&&i(11,dt=t.panOnScrollMode),"preventScrolling"in t&&i(12,ut=t.preventScrolling),"zoomOnScroll"in t&&i(13,ht=t.zoomOnScroll),"zoomOnDoubleClick"in t&&i(14,pt=t.zoomOnDoubleClick),"zoomOnPinch"in t&&i(15,ft=t.zoomOnPinch),"panOnScroll"in t&&i(16,gt=t.panOnScroll),"panOnDrag"in t&&i(17,mt=t.panOnDrag),"selectionOnDrag"in t&&i(18,yt=t.selectionOnDrag),"autoPanOnConnect"in t&&i(58,wt=t.autoPanOnConnect),"autoPanOnNodeDrag"in t&&i(59,$t=t.autoPanOnNodeDrag),"onerror"in t&&i(60,vt=t.onerror),"ondelete"in t&&i(61,xt=t.ondelete),"onedgecreate"in t&&i(62,bt=t.onedgecreate),"attributionPosition"in t&&i(19,kt=t.attributionPosition),"proOptions"in t&&i(20,_t=t.proOptions),"defaultEdgeOptions"in t&&i(21,St=t.defaultEdgeOptions),"width"in t&&i(63,Et=t.width),"height"in t&&i(64,Ct=t.height),"colorMode"in t&&i(65,Ot=t.colorMode),"onconnect"in t&&i(66,Pt=t.onconnect),"onconnectstart"in t&&i(67,Mt=t.onconnectstart),"onconnectend"in t&&i(68,zt=t.onconnectend),"onbeforedelete"in t&&i(69,Nt=t.onbeforedelete),"oninit"in t&&i(70,Lt=t.oninit),"nodeOrigin"in t&&i(71,It=t.nodeOrigin),"paneClickDistance"in t&&i(22,Dt=t.paneClickDistance),"nodeClickDistance"in t&&i(23,At=t.nodeClickDistance),"defaultMarkerColor"in t&&i(72,Tt=t.defaultMarkerColor),"style"in t&&i(24,Ht=t.style),"class"in t&&i(25,Vt=t.class),"$$scope"in t&&i(99,v=t.$$scope)},t.$$.update=()=>{if(201326592&t.$$.dirty[0]&&void 0!==N&&void 0!==L&&(Wt.width.set(N),Wt.height.set(L)),6400&t.$$.dirty[2]&&!Yt&&a&&(Lt?.(),i(73,Yt=!0)),2097135632&t.$$.dirty[1]|1777&t.$$.dirty[2]){pc(Wt,{flowId:b,connectionLineType:U,connectionRadius:q,selectionMode:T,snapGrid:K,defaultMarkerColor:Tt,nodesDraggable:W,nodesConnectable:X,elementsSelectable:R,onlyRenderVisibleElements:ct,isValidConnection:st,autoPanOnConnect:wt,autoPanOnNodeDrag:$t,onerror:vt,ondelete:xt,onedgecreate:bt,connectionMode:tt,nodeDragThreshold:Y,onconnect:Pt,onconnectstart:Mt,onconnectend:zt,onbeforedelete:Nt,nodeOrigin:It})}4194304&t.$$.dirty[0]|16791040&t.$$.dirty[1]&&hc(Wt,{nodeTypes:I,edgeTypes:D,minZoom:C,maxZoom:O,translateExtent:at,paneClickDistance:Dt}),8&t.$$.dirty[2]&&(i(29,r=fc(Ot)),m(),m=c(r,(t=>i(30,h=t))))},[M,A,H,V,F,G,et,nt,ot,it,rt,dt,ut,ht,pt,ft,gt,mt,yt,kt,_t,St,Dt,At,Ht,Vt,N,L,z,r,h,Ft,Xt,p,x,b,k,_,S,E,C,O,P,I,D,T,W,X,Y,R,K,q,U,tt,st,at,lt,ct,wt,$t,vt,xt,bt,Et,Ct,Ot,Pt,Mt,zt,Nt,Lt,It,Tt,Yt,a,$,function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(e){Q.call(this,t,e)},function(t){J[t?"unshift":"push"]((()=>{z=t,i(28,z)}))},function(){N=this.clientWidth,L=this.clientHeight,i(26,N),i(27,L)},v]}var kc=class extends Ct{constructor(t){super(),Et(this,t,bc,xc,a,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}};function _c(t){let e;const n=t[7].default,o=h(n,t,t[6],null);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,[i]){o&&o.p&&(!e||64&i)&&g(o,n,t,t[6],e?f(n,t[6],i,null):m(t[6]),null)},i(t){e||(gt(o,t),e=!0)},o(t){mt(o,t),e=!1},d(t){o&&o.d(t)}}}function Sc(t,e,n){let{$$slots:o={},$$scope:i}=e,{initialNodes:r}=e,{initialEdges:s}=e,{initialWidth:a}=e,{initialHeight:l}=e,{fitView:c}=e,{nodeOrigin:d}=e;const u=Va({nodes:r,edges:s,width:a,height:l,nodeOrigin:d,fitView:c});return j(Ha,{getStore:()=>u}),K((()=>{u.reset()})),t.$$set=t=>{"initialNodes"in t&&n(0,r=t.initialNodes),"initialEdges"in t&&n(1,s=t.initialEdges),"initialWidth"in t&&n(2,a=t.initialWidth),"initialHeight"in t&&n(3,l=t.initialHeight),"fitView"in t&&n(4,c=t.fitView),"nodeOrigin"in t&&n(5,d=t.nodeOrigin),"$$scope"in t&&n(6,i=t.$$scope)},[r,s,a,l,c,d,i,o]}var Ec=class extends Ct{constructor(t){super(),Et(this,t,Sc,_c,a,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}};const Cc=t=>({}),Oc=t=>({class:"button-svg"});function Pc(t){let e,o,i,r,s;const a=t[8].default,l=h(a,t,t[7],Oc);let c=[{type:"button"},{class:o=ye(["svelte-flow__controls-button",t[0]])},t[6]],d={};for(let t=0;t<c.length;t+=1)d=n(d,c[t]);return{c(){e=C("button"),l&&l.c(),D(e,d),T(e,"--xy-controls-button-background-color-props",t[1]),T(e,"--xy-controls-button-background-color-hover-props",t[2]),T(e,"--xy-controls-button-color-props",t[3]),T(e,"--xy-controls-button-color-hover-props",t[4]),T(e,"--xy-controls-button-border-color-props",t[5])},m(n,o){_(n,e,o),l&&l.m(e,null),e.autofocus&&e.focus(),i=!0,r||(s=N(e,"click",t[9]),r=!0)},p(t,[n]){l&&l.p&&(!i||128&n)&&g(l,a,t,t[7],i?f(a,t[7],n,Cc):m(t[7]),Oc),D(e,d=vt(c,[{type:"button"},(!i||1&n&&o!==(o=ye(["svelte-flow__controls-button",t[0]])))&&{class:o},64&n&&t[6]])),T(e,"--xy-controls-button-background-color-props",t[1]),T(e,"--xy-controls-button-background-color-hover-props",t[2]),T(e,"--xy-controls-button-color-props",t[3]),T(e,"--xy-controls-button-color-hover-props",t[4]),T(e,"--xy-controls-button-border-color-props",t[5])},i(t){i||(gt(l,t),i=!0)},o(t){mt(l,t),i=!1},d(t){t&&S(e),l&&l.d(t),r=!1,s()}}}function Mc(t,e,o){const i=["class"];let r,s,a,l,c,d=w(e,i),{$$slots:u={},$$scope:h}=e,{class:p}=e;return t.$$set=t=>{e=n(n({},e),y(t)),o(6,d=w(e,i)),"class"in t&&o(0,p=t.class),"$$scope"in t&&o(7,h=t.$$scope)},[p,r,s,a,l,c,d,h,u,function(e){Q.call(this,t,e)}]}var zc=class extends Ct{constructor(t){super(),Et(this,t,Mc,Pc,a,{class:0})}};function Nc(t){let n,o;return{c(){n=O("svg"),o=O("path"),L(o,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),L(n,"xmlns","http://www.w3.org/2000/svg"),L(n,"viewBox","0 0 32 32")},m(t,e){_(t,n,e),k(n,o)},p:e,i:e,o:e,d(t){t&&S(n)}}}var Lc=class extends Ct{constructor(t){super(),Et(this,t,null,Nc,a,{})}};function Ic(t){let n,o;return{c(){n=O("svg"),o=O("path"),L(o,"d","M0 0h32v4.2H0z"),L(n,"xmlns","http://www.w3.org/2000/svg"),L(n,"viewBox","0 0 32 5")},m(t,e){_(t,n,e),k(n,o)},p:e,i:e,o:e,d(t){t&&S(n)}}}var Dc=class extends Ct{constructor(t){super(),Et(this,t,null,Ic,a,{})}};function Ac(t){let n,o;return{c(){n=O("svg"),o=O("path"),L(o,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),L(n,"xmlns","http://www.w3.org/2000/svg"),L(n,"viewBox","0 0 32 30")},m(t,e){_(t,n,e),k(n,o)},p:e,i:e,o:e,d(t){t&&S(n)}}}var Tc=class extends Ct{constructor(t){super(),Et(this,t,null,Ac,a,{})}};function Hc(t){let n,o;return{c(){n=O("svg"),o=O("path"),L(o,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),L(n,"xmlns","http://www.w3.org/2000/svg"),L(n,"viewBox","0 0 25 32")},m(t,e){_(t,n,e),k(n,o)},p:e,i:e,o:e,d(t){t&&S(n)}}}var Vc=class extends Ct{constructor(t){super(),Et(this,t,null,Hc,a,{})}};function Fc(t){let n,o;return{c(){n=O("svg"),o=O("path"),L(o,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),L(n,"xmlns","http://www.w3.org/2000/svg"),L(n,"viewBox","0 0 25 32")},m(t,e){_(t,n,e),k(n,o)},p:e,i:e,o:e,d(t){t&&S(n)}}}var Wc=class extends Ct{constructor(t){super(),Et(this,t,null,Fc,a,{})}};const Xc=t=>({}),Yc=t=>({}),Rc=t=>({}),Zc=t=>({});function Bc(t){let e,o,i,r;const s=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:t[9]},t[17]];let a={$$slots:{default:[Kc]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)a=n(a,s[t]);e=new zc({props:a}),e.$on("click",t[18]);const l=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:t[10]},t[17]];let c={$$slots:{default:[Gc]},$$scope:{ctx:t}};for(let t=0;t<l.length;t+=1)c=n(c,l[t]);return i=new zc({props:c}),i.$on("click",t[19]),{c(){kt(e.$$.fragment),o=M(),kt(i.$$.fragment)},m(t,n){_t(e,t,n),_(t,o,n),_t(i,t,n),r=!0},p(t,n){const o=131584&n[0]?vt(s,[s[0],s[1],s[2],512&n[0]&&{disabled:t[9]},131072&n[0]&&xt(t[17])]):{};32&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const r=132096&n[0]?vt(l,[l[0],l[1],l[2],1024&n[0]&&{disabled:t[10]},131072&n[0]&&xt(t[17])]):{};32&n[1]&&(r.$$scope={dirty:n,ctx:t}),i.$set(r)},i(t){r||(gt(e.$$.fragment,t),gt(i.$$.fragment,t),r=!0)},o(t){mt(e.$$.fragment,t),mt(i.$$.fragment,t),r=!1},d(t){t&&S(o),St(e,t),St(i,t)}}}function Kc(t){let e,n;return e=new Lc({}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Gc(t){let e,n;return e=new Dc({}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function jc(t){let e,o;const i=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},t[17]];let r={$$slots:{default:[qc]},$$scope:{ctx:t}};for(let t=0;t<i.length;t+=1)r=n(r,i[t]);return e=new zc({props:r}),e.$on("click",t[20]),{c(){kt(e.$$.fragment)},m(t,n){_t(e,t,n),o=!0},p(t,n){const o=131072&n[0]?vt(i,[i[0],i[1],i[2],xt(t[17])]):{};32&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){o||(gt(e.$$.fragment,t),o=!0)},o(t){mt(e.$$.fragment,t),o=!1},d(t){St(e,t)}}}function qc(t){let e,n;return e=new Tc({}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Qc(t){let e,o;const i=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},t[17]];let r={$$slots:{default:[td]},$$scope:{ctx:t}};for(let t=0;t<i.length;t+=1)r=n(r,i[t]);return e=new zc({props:r}),e.$on("click",t[21]),{c(){kt(e.$$.fragment)},m(t,n){_t(e,t,n),o=!0},p(t,n){const o=131072&n[0]?vt(i,[i[0],i[1],i[2],xt(t[17])]):{};256&n[0]|32&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){o||(gt(e.$$.fragment,t),o=!0)},o(t){mt(e.$$.fragment,t),o=!1},d(t){St(e,t)}}}function Uc(t){let e,n;return e=new Vc({}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Jc(t){let e,n;return e=new Wc({}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function td(t){let e,n,o,i;const r=[Jc,Uc],s=[];function a(t,e){return t[8]?0:1}return e=a(t),n=s[e]=r[e](t),{c(){n.c(),o=z()},m(t,n){s[e].m(t,n),_(t,o,n),i=!0},p(t,i){let l=e;e=a(t),e!==l&&(pt(),mt(s[l],1,1,(()=>{s[l]=null})),ft(),n=s[e],n||(n=s[e]=r[e](t),n.c()),gt(n,1),n.m(o.parentNode,o))},i(t){i||(gt(n),i=!0)},o(t){mt(n),i=!1},d(t){t&&S(o),s[e].d(t)}}}function ed(t){let e,n,o,i,r,s;const a=t[35].before,l=h(a,t,t[36],Zc);let c=t[1]&&Bc(t),d=t[2]&&jc(t),u=t[3]&&Qc(t);const p=t[35].default,y=h(p,t,t[36],null),w=t[35].after,$=h(w,t,t[36],Yc);return{c(){l&&l.c(),e=M(),c&&c.c(),n=M(),d&&d.c(),o=M(),u&&u.c(),i=M(),y&&y.c(),r=M(),$&&$.c()},m(t,a){l&&l.m(t,a),_(t,e,a),c&&c.m(t,a),_(t,n,a),d&&d.m(t,a),_(t,o,a),u&&u.m(t,a),_(t,i,a),y&&y.m(t,a),_(t,r,a),$&&$.m(t,a),s=!0},p(t,e){l&&l.p&&(!s||32&e[1])&&g(l,a,t,t[36],s?f(a,t[36],e,Rc):m(t[36]),Zc),t[1]?c?(c.p(t,e),2&e[0]&&gt(c,1)):(c=Bc(t),c.c(),gt(c,1),c.m(n.parentNode,n)):c&&(pt(),mt(c,1,1,(()=>{c=null})),ft()),t[2]?d?(d.p(t,e),4&e[0]&&gt(d,1)):(d=jc(t),d.c(),gt(d,1),d.m(o.parentNode,o)):d&&(pt(),mt(d,1,1,(()=>{d=null})),ft()),t[3]?u?(u.p(t,e),8&e[0]&&gt(u,1)):(u=Qc(t),u.c(),gt(u,1),u.m(i.parentNode,i)):u&&(pt(),mt(u,1,1,(()=>{u=null})),ft()),y&&y.p&&(!s||32&e[1])&&g(y,p,t,t[36],s?f(p,t[36],e,null):m(t[36]),null),$&&$.p&&(!s||32&e[1])&&g($,w,t,t[36],s?f(w,t[36],e,Xc):m(t[36]),Yc)},i(t){s||(gt(l,t),gt(c),gt(d),gt(u),gt(y,t),gt($,t),s=!0)},o(t){mt(l,t),mt(c),mt(d),mt(u),mt(y,t),mt($,t),s=!1},d(t){t&&(S(e),S(n),S(o),S(i),S(r)),l&&l.d(t),c&&c.d(t),d&&d.d(t),u&&u.d(t),y&&y.d(t),$&&$.d(t)}}}function nd(t){let e,n;return e=new sc({props:{class:ye(["svelte-flow__controls",t[7],t[6]]),position:t[0],"data-testid":"svelte-flow__controls","aria-label":t[4]??"Svelte Flow controls",style:t[5],$$slots:{default:[ed]},$$scope:{ctx:t}}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};192&n[0]&&(o.class=ye(["svelte-flow__controls",t[7],t[6]])),1&n[0]&&(o.position=t[0]),16&n[0]&&(o["aria-label"]=t[4]??"Svelte Flow controls"),32&n[0]&&(o.style=t[5]),1806&n[0]|32&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function od(t,e,n){let o,i,r,s,a,l,c,d,h,p,{$$slots:f={},$$scope:g}=e,{position:m="bottom-left"}=e,{showZoom:y=!0}=e,{showFitView:w=!0}=e,{showLock:$=!0}=e,{buttonBgColor:v}=e,{buttonBgColorHover:x}=e,{buttonColor:b}=e,{buttonColorHover:k}=e,{buttonBorderColor:_}=e,{ariaLabel:S}=e,{style:E}=e,{orientation:C="vertical"}=e,{fitViewOptions:O}=e,{class:P=""}=e;const{zoomIn:M,zoomOut:z,fitView:N,viewport:L,minZoom:I,maxZoom:D,nodesDraggable:A,nodesConnectable:T,elementsSelectable:H}=Fa();u(t,L,(t=>n(30,l=t))),u(t,I,(t=>n(31,c=t))),u(t,D,(t=>n(29,a=t))),u(t,A,(t=>n(34,p=t))),u(t,T,(t=>n(33,h=t))),u(t,H,(t=>n(32,d=t)));const V={bgColor:v,bgColorHover:x,color:b,colorHover:k,borderColor:_};return t.$$set=t=>{"position"in t&&n(0,m=t.position),"showZoom"in t&&n(1,y=t.showZoom),"showFitView"in t&&n(2,w=t.showFitView),"showLock"in t&&n(3,$=t.showLock),"buttonBgColor"in t&&n(22,v=t.buttonBgColor),"buttonBgColorHover"in t&&n(23,x=t.buttonBgColorHover),"buttonColor"in t&&n(24,b=t.buttonColor),"buttonColorHover"in t&&n(25,k=t.buttonColorHover),"buttonBorderColor"in t&&n(26,_=t.buttonBorderColor),"ariaLabel"in t&&n(4,S=t.ariaLabel),"style"in t&&n(5,E=t.style),"orientation"in t&&n(27,C=t.orientation),"fitViewOptions"in t&&n(28,O=t.fitViewOptions),"class"in t&&n(6,P=t.class),"$$scope"in t&&n(36,g=t.$$scope)},t.$$.update=()=>{14&t.$$.dirty[1]&&n(8,o=p||h||d),1073741824&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(10,i=l.zoom<=c),1610612736&t.$$.dirty[0]&&n(9,r=l.zoom>=a),134217728&t.$$.dirty[0]&&n(7,s="horizontal"===C?"horizontal":"vertical")},[m,y,w,$,S,E,P,s,o,r,i,L,I,D,A,T,H,V,()=>{M()},()=>{z()},()=>{N(O)},()=>{n(8,o=!o),A.set(o),T.set(o),H.set(o)},v,x,b,k,_,C,O,a,l,c,d,h,p,f,g]}var id,rd=class extends Ct{constructor(t){super(),Et(this,t,od,nd,a,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}};function sd(t){let n,o;return{c(){n=O("circle"),L(n,"cx",t[0]),L(n,"cy",t[0]),L(n,"r",t[0]),L(n,"class",o=ye(["svelte-flow__background-pattern","dots",t[1]]))},m(t,e){_(t,n,e)},p(t,[e]){1&e&&L(n,"cx",t[0]),1&e&&L(n,"cy",t[0]),1&e&&L(n,"r",t[0]),2&e&&o!==(o=ye(["svelte-flow__background-pattern","dots",t[1]]))&&L(n,"class",o)},i:e,o:e,d(t){t&&S(n)}}}function ad(t,e,n){let{radius:o=5}=e,{class:i=""}=e;return t.$$set=t=>{"radius"in t&&n(0,o=t.radius),"class"in t&&n(1,i=t.class)},[o,i]}!function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"}(id||(id={}));var ld=class extends Ct{constructor(t){super(),Et(this,t,ad,sd,a,{radius:0,class:1})}};function cd(t){let n,o,i;return{c(){n=O("path"),L(n,"stroke-width",t[0]),L(n,"d",o=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),L(n,"class",i=ye(["svelte-flow__background-pattern",t[2],t[3]]))},m(t,e){_(t,n,e)},p(t,[e]){1&e&&L(n,"stroke-width",t[0]),2&e&&o!==(o=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`)&&L(n,"d",o),12&e&&i!==(i=ye(["svelte-flow__background-pattern",t[2],t[3]]))&&L(n,"class",i)},i:e,o:e,d(t){t&&S(n)}}}function dd(t,e,n){let{lineWidth:o=1}=e,{dimensions:i}=e,{variant:r}=e,{class:s=""}=e;return t.$$set=t=>{"lineWidth"in t&&n(0,o=t.lineWidth),"dimensions"in t&&n(1,i=t.dimensions),"variant"in t&&n(2,r=t.variant),"class"in t&&n(3,s=t.class)},[o,i,r,s]}var ud=class extends Ct{constructor(t){super(),Et(this,t,dd,cd,a,{lineWidth:0,dimensions:1,variant:2,class:3})}};function hd(t){let e,n;return e=new ud({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};64&n&&(o.dimensions=t[6]),1&n&&(o.variant=t[0]),2&n&&(o.lineWidth=t[1]),16&n&&(o.class=t[4]),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function pd(t){let e,n;return e=new ld({props:{radius:t[7]/2,class:t[4]}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};128&n&&(o.radius=t[7]/2),16&n&&(o.class=t[4]),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function fd(t){let e,n,o,i,r,s,a,l,c,d,u,h,p;const f=[pd,hd],g=[];return o=function(t){return t[14]?0:1}(t),i=g[o]=f[o](t),{c(){e=O("svg"),n=O("pattern"),i.c(),d=O("rect"),L(n,"id",t[11]),L(n,"x",r=t[9].x%t[8][0]),L(n,"y",s=t[9].y%t[8][1]),L(n,"width",a=t[8][0]),L(n,"height",l=t[8][1]),L(n,"patternUnits","userSpaceOnUse"),L(n,"patternTransform",c=`translate(-${t[10][0]},-${t[10][1]})`),L(d,"x","0"),L(d,"y","0"),L(d,"width","100%"),L(d,"height","100%"),L(d,"fill",u=`url(#${t[11]})`),L(e,"class",h=$(ye(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"),L(e,"data-testid","svelte-flow__background"),T(e,"--xy-background-color-props",t[2]),T(e,"--xy-background-pattern-color-props",t[3])},m(t,i){_(t,e,i),k(e,n),g[o].m(n,null),k(e,d),p=!0},p(t,[o]){i.p(t,o),(!p||2048&o)&&L(n,"id",t[11]),(!p||768&o&&r!==(r=t[9].x%t[8][0]))&&L(n,"x",r),(!p||768&o&&s!==(s=t[9].y%t[8][1]))&&L(n,"y",s),(!p||256&o&&a!==(a=t[8][0]))&&L(n,"width",a),(!p||256&o&&l!==(l=t[8][1]))&&L(n,"height",l),(!p||1024&o&&c!==(c=`translate(-${t[10][0]},-${t[10][1]})`))&&L(n,"patternTransform",c),(!p||2048&o&&u!==(u=`url(#${t[11]})`))&&L(d,"fill",u),(!p||32&o&&h!==(h=$(ye(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"))&&L(e,"class",h),4&o&&T(e,"--xy-background-color-props",t[2]),8&o&&T(e,"--xy-background-pattern-color-props",t[3])},i(t){p||(gt(i),p=!0)},o(t){mt(i),p=!1},d(t){t&&S(e),g[o].d()}}}const gd={[id.Dots]:1,[id.Lines]:1,[id.Cross]:6};function md(t,e,n){let o,i,r,s,a,l,c,{id:d}=e,{variant:h=id.Dots}=e,{gap:p=20}=e,{size:f=1}=e,{lineWidth:g=1}=e,{bgColor:m}=e,{patternColor:y}=e,{patternClass:w}=e,{class:$=""}=e;const{viewport:v,flowId:x}=Fa();u(t,v,(t=>n(9,l=t))),u(t,x,(t=>n(18,c=t)));const b=f||gd[h],k=h===id.Dots,_=h===id.Cross,S=Array.isArray(p)?p:[p,p];return t.$$set=t=>{"id"in t&&n(15,d=t.id),"variant"in t&&n(0,h=t.variant),"gap"in t&&n(16,p=t.gap),"size"in t&&n(17,f=t.size),"lineWidth"in t&&n(1,g=t.lineWidth),"bgColor"in t&&n(2,m=t.bgColor),"patternColor"in t&&n(3,y=t.patternColor),"patternClass"in t&&n(4,w=t.patternClass),"class"in t&&n(5,$=t.class)},t.$$.update=()=>{294912&t.$$.dirty&&n(11,o=`background-pattern-${c}-${d||""}`),512&t.$$.dirty&&n(8,i=[S[0]*l.zoom||1,S[1]*l.zoom||1]),512&t.$$.dirty&&n(7,r=b*l.zoom),384&t.$$.dirty&&n(6,s=_?[r,r]:i),192&t.$$.dirty&&n(10,a=k?[r/2,r/2]:[s[0]/2,s[1]/2])},[h,g,m,y,w,$,s,r,i,l,a,o,v,x,k,d,p,f,c]}var yd=class extends Ct{constructor(t){super(),Et(this,t,md,fd,a,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}};function wd(t){let n,o,i;return{c(){n=O("rect"),L(n,"class",o=ye(["svelte-flow__minimap-node",t[10]])),L(n,"x",t[0]),L(n,"y",t[1]),L(n,"rx",t[4]),L(n,"ry",t[4]),L(n,"width",t[2]),L(n,"height",t[3]),L(n,"style",i=`${t[5]?`fill: ${t[5]};`:""}${t[7]?`stroke: ${t[7]};`:""}${t[8]?`stroke-width: ${t[8]};`:""}`),L(n,"shape-rendering",t[6]),X(n,"selected",t[9])},m(t,e){_(t,n,e)},p(t,[e]){1024&e&&o!==(o=ye(["svelte-flow__minimap-node",t[10]]))&&L(n,"class",o),1&e&&L(n,"x",t[0]),2&e&&L(n,"y",t[1]),16&e&&L(n,"rx",t[4]),16&e&&L(n,"ry",t[4]),4&e&&L(n,"width",t[2]),8&e&&L(n,"height",t[3]),416&e&&i!==(i=`${t[5]?`fill: ${t[5]};`:""}${t[7]?`stroke: ${t[7]};`:""}${t[8]?`stroke-width: ${t[8]};`:""}`)&&L(n,"style",i),64&e&&L(n,"shape-rendering",t[6]),1536&e&&X(n,"selected",t[9])},i:e,o:e,d(t){t&&S(n)}}}function $d(t,e,n){let{x:o}=e,{y:i}=e,{width:r=0}=e,{height:s=0}=e,{borderRadius:a=5}=e,{color:l}=e,{shapeRendering:c}=e,{strokeColor:d}=e,{strokeWidth:u=2}=e,{selected:h=!1}=e,{class:p=""}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,i=t.y),"width"in t&&n(2,r=t.width),"height"in t&&n(3,s=t.height),"borderRadius"in t&&n(4,a=t.borderRadius),"color"in t&&n(5,l=t.color),"shapeRendering"in t&&n(6,c=t.shapeRendering),"strokeColor"in t&&n(7,d=t.strokeColor),"strokeWidth"in t&&n(8,u=t.strokeWidth),"selected"in t&&n(9,h=t.selected),"class"in t&&n(10,p=t.class)},[o,i,r,s,a,l,c,d,u,h,p]}var vd=class extends Ct{constructor(t){super(),Et(this,t,$d,wd,a,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}};function xd(t,e){const n=function({domNode:t,panZoom:e,getTransform:n,getViewScale:o}){const i=An(t);return{update:function({translateExtent:t,width:r,height:s,zoomStep:a=10,pannable:l=!0,zoomable:c=!0,inversePan:d=!1}){let u=[0,0];const h=nr().on("start",(t=>{"mousedown"!==t.sourceEvent.type&&"touchstart"!==t.sourceEvent.type||(u=[t.sourceEvent.clientX??t.sourceEvent.touches[0].clientX,t.sourceEvent.clientY??t.sourceEvent.touches[0].clientY])})).on("zoom",l?i=>{const a=n();if("mousemove"!==i.sourceEvent.type&&"touchmove"!==i.sourceEvent.type||!e)return;const l=[i.sourceEvent.clientX??i.sourceEvent.touches[0].clientX,i.sourceEvent.clientY??i.sourceEvent.touches[0].clientY],c=[l[0]-u[0],l[1]-u[1]];u=l;const h=o()*Math.max(a[2],Math.log(a[2]))*(d?-1:1),p={x:a[0]-c[0]*h,y:a[1]-c[1]*h},f=[[0,0],[r,s]];e.setViewportConstrained({x:p.x,y:p.y,zoom:a[2]},f,t)}:null).on("zoom.wheel",c?t=>{const o=n();if("wheel"!==t.sourceEvent.type||!e)return;const i=-t.sourceEvent.deltaY*(1===t.sourceEvent.deltaMode?.05:t.sourceEvent.deltaMode?1:.002)*a,r=o[2]*Math.pow(2,i);e.scaleTo(r)}:null);i.call(h,{})},destroy:function(){i.on("zoom",null)},pointer:Tn}}({domNode:t,panZoom:e.panZoom,getTransform:()=>{const t=d(e.viewport);return[t.x,t.y,t.zoom]},getViewScale:e.getViewScale});return{update:function(t){n.update({translateExtent:t.translateExtent,width:t.width,height:t.height,inversePan:t.inversePan,zoomStep:t.zoomStep,pannable:t.pannable,zoomable:t.zoomable})},destroy(){n.destroy()}}}function bd(t,e,n){const o=t.slice();o[55]=e[n];const i=o[20].get(o[55].id);return o[56]=i,o}function kd(t){const e=t.slice(),n=jr(e[56]);return e[59]=n,e}function _d(t){let e,n,o,i,r,a,l,c,d,u=[],h=new Map,p=t[1]&&Sd(t),f=yt(t[19]);const g=t=>t[55].id;for(let e=0;e<f.length;e+=1){let n=bd(t,f,e),o=g(n);h.set(o,u[e]=Cd(o,n))}return{c(){e=O("svg"),p&&p.c(),n=z();for(let t=0;t<u.length;t+=1)u[t].c();o=O("path"),L(o,"class","svelte-flow__minimap-mask"),L(o,"d",i="M"+(t[26]-t[15])+","+(t[25]-t[15])+"h"+(t[24]+2*t[15])+"v"+(t[23]+2*t[15])+"h"+(-t[24]-2*t[15])+"z\n      M"+t[18].x+","+t[18].y+"h"+t[18].width+"v"+t[18].height+"h"+-t[18].width+"z"),L(o,"fill-rule","evenodd"),L(o,"pointer-events","none"),L(e,"width",t[17]),L(e,"height",t[16]),L(e,"viewBox",r=t[26]+" "+t[25]+" "+t[24]+" "+t[23]),L(e,"class","svelte-flow__minimap-svg"),L(e,"role","img"),L(e,"aria-labelledby",t[41]),T(e,"--xy-minimap-mask-background-color-props",t[5]),T(e,"--xy-minimap-mask-stroke-color-props",t[6]),T(e,"--xy-minimap-mask-stroke-width-props",t[7]?t[7]*t[14]:void 0)},m(i,r){_(i,e,r),p&&p.m(e,null),k(e,n);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(e,null);k(e,o),l=!0,c||(d=x(a=xd.call(null,e,{panZoom:t[27],viewport:t[31],getViewScale:t[42],translateExtent:t[28],width:t[22],height:t[21],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),c=!0)},p(t,c){t[1]?p?p.p(t,c):(p=Sd(t),p.c(),p.m(e,n)):p&&(p.d(1),p=null),1572876&c[0]|960&c[1]&&(f=yt(t[19]),pt(),u=$t(u,c,g,1,t,f,h,e,wt,Cd,o,bd),ft()),(!l||126124032&c[0]&&i!==(i="M"+(t[26]-t[15])+","+(t[25]-t[15])+"h"+(t[24]+2*t[15])+"v"+(t[23]+2*t[15])+"h"+(-t[24]-2*t[15])+"z\n      M"+t[18].x+","+t[18].y+"h"+t[18].width+"v"+t[18].height+"h"+-t[18].width+"z"))&&L(o,"d",i),(!l||131072&c[0])&&L(e,"width",t[17]),(!l||65536&c[0])&&L(e,"height",t[16]),(!l||125829120&c[0]&&r!==(r=t[26]+" "+t[25]+" "+t[24]+" "+t[23]))&&L(e,"viewBox",r),a&&s(a.update)&&408948480&c[0]&&a.update.call(null,{panZoom:t[27],viewport:t[31],getViewScale:t[42],translateExtent:t[28],width:t[22],height:t[21],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]}),32&c[0]&&T(e,"--xy-minimap-mask-background-color-props",t[5]),64&c[0]&&T(e,"--xy-minimap-mask-stroke-color-props",t[6]),16512&c[0]&&T(e,"--xy-minimap-mask-stroke-width-props",t[7]?t[7]*t[14]:void 0)},i(t){if(!l){for(let t=0;t<f.length;t+=1)gt(u[t]);l=!0}},o(t){for(let t=0;t<u.length;t+=1)mt(u[t]);l=!1},d(t){t&&S(e),p&&p.d();for(let t=0;t<u.length;t+=1)u[t].d();c=!1,d()}}}function Sd(t){let e,n;return{c(){e=O("title"),n=P(t[1]),L(e,"id",t[41])},m(t,o){_(t,e,o),k(e,n)},p(t,e){2&e[0]&&A(n,t[1])},d(t){t&&S(e)}}}function Ed(t){let e,o;const i=[{x:t[56].internals.positionAbsolute.x},{y:t[56].internals.positionAbsolute.y},t[59],{selected:t[56].selected},{color:t[37]?.(t[56])},{borderRadius:t[2]},{strokeColor:t[38](t[56])},{strokeWidth:t[3]},{shapeRendering:t[40]},{class:t[39](t[56])}];let r={};for(let t=0;t<i.length;t+=1)r=n(r,i[t]);return e=new vd({props:r}),{c(){kt(e.$$.fragment)},m(t,n){_t(e,t,n),o=!0},p(t,n){const o=1572876&n[0]|960&n[1]?vt(i,[1572864&n[0]&&{x:t[56].internals.positionAbsolute.x},1572864&n[0]&&{y:t[56].internals.positionAbsolute.y},1572864&n[0]&&xt(t[59]),1572864&n[0]&&{selected:t[56].selected},1572864&n[0]|64&n[1]&&{color:t[37]?.(t[56])},4&n[0]&&{borderRadius:t[2]},1572864&n[0]|128&n[1]&&{strokeColor:t[38](t[56])},8&n[0]&&{strokeWidth:t[3]},512&n[1]&&{shapeRendering:t[40]},1572864&n[0]|256&n[1]&&{class:t[39](t[56])}]):{};e.$set(o)},i(t){o||(gt(e.$$.fragment,t),o=!0)},o(t){mt(e.$$.fragment,t),o=!1},d(t){St(e,t)}}}function Cd(t,e){let n,o,i,r=e[56]&&qr(e[56]),s=r&&Ed(kd(e));return{key:t,first:null,c(){n=z(),s&&s.c(),o=z(),this.first=n},m(t,e){_(t,n,e),s&&s.m(t,e),_(t,o,e),i=!0},p(t,n){e=t,1572864&n[0]&&(r=e[56]&&qr(e[56])),r?s?(s.p(kd(e),n),1572864&n[0]&&gt(s,1)):(s=Ed(kd(e)),s.c(),gt(s,1),s.m(o.parentNode,o)):s&&(pt(),mt(s,1,1,(()=>{s=null})),ft())},i(t){i||(gt(s),i=!0)},o(t){mt(s),i=!1},d(t){t&&(S(n),S(o)),s&&s.d(t)}}}function Od(t){let e,n,o=t[27]&&_d(t);return{c(){o&&o.c(),e=z()},m(t,i){o&&o.m(t,i),_(t,e,i),n=!0},p(t,n){t[27]?o?(o.p(t,n),134217728&n[0]&&gt(o,1)):(o=_d(t),o.c(),gt(o,1),o.m(e.parentNode,e)):o&&(pt(),mt(o,1,1,(()=>{o=null})),ft())},i(t){n||(gt(o),n=!0)},o(t){mt(o),n=!1},d(t){t&&S(e),o&&o.d(t)}}}function Pd(t){let e,n;return e=new sc({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:""),class:ye(["svelte-flow__minimap",t[13]]),"data-testid":"svelte-flow__minimap",$$slots:{default:[Od]},$$scope:{ctx:t}}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.position=t[0]),4112&n[0]&&(o.style=t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:"")),8192&n[0]&&(o.class=ye(["svelte-flow__minimap",t[13]])),536858606&n[0]|536870912&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}const Md=t=>t instanceof Function?t:()=>t;function zd(t,e,n){let o,i,r,s,a,l,c,d,h,p,f,g,m,y,w,$,v,x,b,k,_,{position:S="bottom-right"}=e,{ariaLabel:E="Mini map"}=e,{nodeStrokeColor:C="transparent"}=e,{nodeColor:O}=e,{nodeClass:P=""}=e,{nodeBorderRadius:M=5}=e,{nodeStrokeWidth:z=2}=e,{bgColor:N}=e,{maskColor:L}=e,{maskStrokeColor:I}=e,{maskStrokeWidth:D}=e,{width:A}=e,{height:T}=e,{pannable:H=!0}=e,{zoomable:V=!0}=e,{inversePan:F}=e,{zoomStep:W}=e,{style:X=""}=e,{class:Y=""}=e;const{nodes:R,nodeLookup:Z,viewport:B,width:K,height:G,flowId:j,panZoom:q,translateExtent:Q}=Fa();u(t,R,(t=>n(19,y=t))),u(t,Z,(t=>n(20,w=t))),u(t,B,(t=>n(53,$=t))),u(t,K,(t=>n(22,x=t))),u(t,G,(t=>n(21,v=t))),u(t,j,(t=>n(54,b=t))),u(t,q,(t=>n(27,k=t))),u(t,Q,(t=>n(28,_=t)));const U=void 0===O?void 0:Md(O),J=Md(C),tt=Md(P),et="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision",nt=`svelte-flow__minimap-desc-${b}`;let ot=o;return t.$$set=t=>{"position"in t&&n(0,S=t.position),"ariaLabel"in t&&n(1,E=t.ariaLabel),"nodeStrokeColor"in t&&n(43,C=t.nodeStrokeColor),"nodeColor"in t&&n(44,O=t.nodeColor),"nodeClass"in t&&n(45,P=t.nodeClass),"nodeBorderRadius"in t&&n(2,M=t.nodeBorderRadius),"nodeStrokeWidth"in t&&n(3,z=t.nodeStrokeWidth),"bgColor"in t&&n(4,N=t.bgColor),"maskColor"in t&&n(5,L=t.maskColor),"maskStrokeColor"in t&&n(6,I=t.maskStrokeColor),"maskStrokeWidth"in t&&n(7,D=t.maskStrokeWidth),"width"in t&&n(46,A=t.width),"height"in t&&n(47,T=t.height),"pannable"in t&&n(8,H=t.pannable),"zoomable"in t&&n(9,V=t.zoomable),"inversePan"in t&&n(10,F=t.inversePan),"zoomStep"in t&&n(11,W=t.zoomStep),"style"in t&&n(12,X=t.style),"class"in t&&n(13,Y=t.class)},t.$$.update=()=>{6291456&t.$$.dirty[0]|4194304&t.$$.dirty[1]&&n(18,o={x:-$.x/$.zoom,y:-$.y/$.zoom,width:x/$.zoom,height:v/$.zoom}),1835008&t.$$.dirty[0]&&n(48,ot=w.size>0?Hr(xr(w),o):o),32768&t.$$.dirty[1]&&n(17,i=A??200),65536&t.$$.dirty[1]&&n(16,r=T??150),131072&t.$$.dirty[0]|131072&t.$$.dirty[1]&&n(52,s=ot.width/i),65536&t.$$.dirty[0]|131072&t.$$.dirty[1]&&n(51,a=ot.height/r),3145728&t.$$.dirty[1]&&n(14,l=Math.max(s,a)),147456&t.$$.dirty[0]&&n(50,c=l*i),81920&t.$$.dirty[0]&&n(49,d=l*r),16384&t.$$.dirty[0]&&n(15,h=5*l),32768&t.$$.dirty[0]|655360&t.$$.dirty[1]&&n(26,p=ot.x-(c-ot.width)/2-h),32768&t.$$.dirty[0]|393216&t.$$.dirty[1]&&n(25,f=ot.y-(d-ot.height)/2-h),32768&t.$$.dirty[0]|524288&t.$$.dirty[1]&&n(24,g=c+2*h),32768&t.$$.dirty[0]|262144&t.$$.dirty[1]&&n(23,m=d+2*h)},[S,E,M,z,N,L,I,D,H,V,F,W,X,Y,l,h,r,i,o,y,w,v,x,m,g,f,p,k,_,R,Z,B,K,G,j,q,Q,U,J,tt,et,nt,()=>l,C,O,P,A,T,ot,d,c,a,s,$]}var Nd=class extends Ct{constructor(t){super(),Et(this,t,zd,Pd,a,{position:0,ariaLabel:1,nodeStrokeColor:43,nodeColor:44,nodeClass:45,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:46,height:47,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}};const Ld=t=>(t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t))(t);function Id(t,e){const n=[];for(const o of e){const e=t.get(o);if(e){const t="internals"in e?e.internals?.userNode:e;n.push(t)}}return n}function Dd(t){let n,o,i,r;return{c(){n=O("svg"),o=O("path"),i=O("path"),r=O("path"),L(o,"d","M13 4H8.8C7.11984 4 6.27976 4 5.63803 4.32698C5.07354 4.6146 4.6146 5.07354 4.32698 5.63803C4 6.27976 4 7.11984 4 8.8V15.2C4 16.8802 4 17.7202 4.32698 18.362C4.6146 18.9265 5.07354 19.3854 5.63803 19.673C6.27976 20 7.11984 20 8.8 20H15.2C16.8802 20 17.7202 20 18.362 19.673C18.9265 19.3854 19.3854 18.9265 19.673 18.362C20 17.7202 20 16.8802 20 15.2V11"),L(o,"stroke","#000000"),L(o,"stroke-width","2"),L(o,"stroke-linecap","round"),L(o,"stroke-linejoin","round"),L(i,"d","M4 16L8.29289 11.7071C8.68342 11.3166 9.31658 11.3166 9.70711 11.7071L13 15M13 15L15.7929 12.2071C16.1834 11.8166 16.8166 11.8166 17.2071 12.2071L20 15M13 15L15.25 17.25"),L(i,"stroke","#000000"),L(i,"stroke-width","2"),L(i,"stroke-linecap","round"),L(i,"stroke-linejoin","round"),L(r,"d","M18 3V8M18 8L16 6M18 8L20 6"),L(r,"stroke","#000000"),L(r,"stroke-width","2"),L(r,"stroke-linecap","round"),L(r,"stroke-linejoin","round"),L(n,"fill","none"),L(n,"width",t[0]),L(n,"height",t[1]),L(n,"viewBox","0 0 24 24"),L(n,"xmlns","http://www.w3.org/2000/svg")},m(t,e){_(t,n,e),k(n,o),k(n,i),k(n,r)},p(t,[e]){1&e&&L(n,"width",t[0]),2&e&&L(n,"height",t[1])},i:e,o:e,d(t){t&&S(n)}}}function Ad(t,e,n){let{width:o="25px"}=e,{height:i="25px"}=e;return t.$$set=t=>{"width"in t&&n(0,o=t.width),"height"in t&&n(1,i=t.height)},[o,i]}class Td extends Ct{constructor(t){super(),Et(this,t,Ad,Dd,a,{width:0,height:1})}}function Hd(t){let e,o,i,r,s;o=new Td({});let a=[t[1],{alt:"save as image"},{placeholder:"save chart as image"}],l={};for(let t=0;t<a.length;t+=1)l=n(l,a[t]);return{c(){e=C("button"),kt(o.$$.fragment),D(e,l)},m(n,a){_(n,e,a),_t(o,e,null),e.autofocus&&e.focus(),i=!0,r||(s=N(e,"click",t[0]),r=!0)},p(t,[n]){D(e,l=vt(a,[2&n&&t[1],{alt:"save as image"},{placeholder:"save chart as image"}]))},i(t){i||(gt(o.$$.fragment,t),i=!0)},o(t){mt(o.$$.fragment,t),i=!1},d(t){t&&S(e),St(o),r=!1,s()}}}const Vd=1024;function Fd(t,e,o){const i=["nodes","fileName"];let r=w(e,i),{nodes:s=[]}=e,{fileName:a=""}=e;return t.$$set=t=>{e=n(n({},e),y(t)),o(1,r=w(e,i)),"nodes"in t&&o(2,s=t.nodes),"fileName"in t&&o(3,a=t.fileName)},[function(){if(!Array.isArray(s)||0===s.length)return void console.error("No nodes available to generate image.");const t=vr(s),e=Br(t,Vd,768,.5,2,.2),n=document.querySelector(".svelte-flow__viewport");e&&async function(t,e={}){return(await he(t,e)).toDataURL()}(n,{width:Vd,height:768,style:{width:"1024px",height:"768px",transform:`translate(${e.x}px, ${e.y}px) scale(${e.zoom})`}}).then((t=>{const e=document.createElement("a");e.download=`${a||""}_solothought-flowchart.png`,e.href=t,e.click()}))},r,s,a]}class Wd extends Ct{constructor(t){super(),Et(this,t,Fd,Hd,a,{nodes:2,fileName:3})}}function Xd(t){let n,o,i,r,s,a,l;return{c(){n=O("svg"),o=O("defs"),i=O("style"),r=P(".cls-1 {\n        fill: none;\n      }\n    "),s=O("title"),a=P("fork"),l=O("path"),L(l,"d","M26,18a3.9955,3.9955,0,0,0-3.858,3H18a3.0033,3.0033,0,0,1-3-3V14a4.9514,4.9514,0,0,0-1.0256-3H22.142a4,4,0,1,0,0-2H9.858a4,4,0,1,0,0,2H10a3.0033,3.0033,0,0,1,3,3v4a5.0059,5.0059,0,0,0,5,5h4.142A3.9935,3.9935,0,1,0,26,18ZM26,8a2,2,0,1,1-2,2A2.0023,2.0023,0,0,1,26,8ZM6,12a2,2,0,1,1,2-2A2.002,2.002,0,0,1,6,12ZM26,24a2,2,0,1,1,2-2A2.0027,2.0027,0,0,1,26,24Z"),L(n,"fill","#000000"),L(n,"width",t[0]),L(n,"height",t[1]),L(n,"viewBox","0 0 32 32"),L(n,"id","icon"),L(n,"xmlns","http://www.w3.org/2000/svg")},m(t,e){_(t,n,e),k(n,o),k(o,i),k(i,r),k(n,s),k(s,a),k(n,l)},p(t,[e]){1&e&&L(n,"width",t[0]),2&e&&L(n,"height",t[1])},i:e,o:e,d(t){t&&S(n)}}}function Yd(t,e,n){let{width:o="25px"}=e,{height:i="25px"}=e;return t.$$set=t=>{"width"in t&&n(0,o=t.width),"height"in t&&n(1,i=t.height)},[o,i]}class Rd extends Ct{constructor(t){super(),Et(this,t,Yd,Xd,a,{width:0,height:1})}}function Zd(t,e,n){const o=t.slice();return o[9]=e[n],o[11]=n,o}function Bd(t){let e,n=yt(t[0]),o=[];for(let e=0;e<n.length;e+=1)o[e]=Kd(Zd(t,n,e));return{c(){e=C("div");for(let t=0;t<o.length;t+=1)o[t].c();L(e,"class","paths-dropdown svelte-1ofxkkf")},m(t,n){_(t,e,n);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null)},p(t,i){if(19&i){let r;for(n=yt(t[0]),r=0;r<n.length;r+=1){const s=Zd(t,n,r);o[r]?o[r].p(s,i):(o[r]=Kd(s),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){t&&S(e),E(o,t)}}}function Kd(t){let e,n,o,i,s,a,l,c,d,u,h,p,f,g=t[11]+1+"",m=t[9].length+"",y=t[1][t[9][t[9].length-1]].id+"";function w(){return t[6](t[11])}function $(){return t[7](t[11])}return{c(){e=C("div"),n=C("span"),n.textContent="▶️",o=M(),i=C("span"),s=P("Path "),a=P(g),l=P(" ("),c=P(m),d=P(" steps) ends at Step "),u=P(y),h=M(),L(e,"class","path-item svelte-1ofxkkf")},m(t,r){_(t,e,r),k(e,n),k(e,o),k(e,i),k(i,s),k(i,a),k(i,l),k(i,c),k(i,d),k(i,u),k(e,h),p||(f=[N(n,"click",w),N(i,"click",$)],p=!0)},p(e,n){t=e,1&n&&m!==(m=t[9].length+"")&&A(c,m),3&n&&y!==(y=t[1][t[9][t[9].length-1]].id+"")&&A(u,y)},d(t){t&&S(e),p=!1,r(f)}}}function Gd(t){let e,n,o,i,r,s,a;o=new Rd({});let l=t[2]&&t[0].length>0&&Bd(t);return{c(){e=C("div"),n=C("button"),kt(o.$$.fragment),i=M(),l&&l.c(),L(e,"class","paths-dropdown-container svelte-1ofxkkf")},m(c,d){_(c,e,d),k(e,n),_t(o,n,null),k(e,i),l&&l.m(e,null),r=!0,s||(a=N(n,"click",t[3]),s=!0)},p(t,[n]){t[2]&&t[0].length>0?l?l.p(t,n):(l=Bd(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(t){r||(gt(o.$$.fragment,t),r=!0)},o(t){mt(o.$$.fragment,t),r=!1},d(t){t&&S(e),St(o),l&&l.d(),s=!1,a()}}}function jd(t,e,n){let{paths:o=[]}=e,{nodes:i=[]}=e,{selectedFlowIndex:r=0}=e,s=!1;const a=G();function l(t,e="select"){if(o&&o[t]){const n=o[t];a("pathSelected",{mode:e,flowIndex:r,nodeIndexes:n.filter((t=>-1!==t))})}n(2,s=!1)}return t.$$set=t=>{"paths"in t&&n(0,o=t.paths),"nodes"in t&&n(1,i=t.nodes),"selectedFlowIndex"in t&&n(5,r=t.selectedFlowIndex)},[o,i,s,function(){n(2,s=!s)},l,r,t=>l(t,"play"),t=>l(t)]}class qd extends Ct{constructor(t){super(),Et(this,t,jd,Gd,a,{paths:0,nodes:1,selectedFlowIndex:5})}}function Qd(t){let n,o,i;return{c(){n=O("svg"),o=O("g"),i=O("path"),L(i,"id","circle34669"),L(i,"d","M165.862,46.682c-0.688-0.009-1.376-0.009-2.064,0.002c-13.223,0.207-26.518,4.065-38.291,11.84\r\n\t\tc-5.703,3.645-0.079,12.159,5.512,8.344c27.088-17.889,63.28-11.773,82.986,14.023c19.706,25.797,16.09,62.324-8.293,83.754\r\n\t\tc-24.383,21.43-61.073,20.33-84.127-2.525c-4.735-4.798-11.88,2.408-7.041,7.102c23.295,23.094,58.803,27.024,86.25,11.193\r\n\t\tl53.785,61.211c1.906,2.169,5.248,2.278,7.291,0.236l26.666-26.666c2.016-2.016,1.941-5.306-0.164-7.229l-60.518-55.236\r\n\t\tc13.22-24.202,11.725-54.835-5.902-77.91C208.123,56.718,187.193,46.961,165.862,46.682z M162.426,75.754\r\n\t\tc-2.76,0.041-4.965,2.31-4.926,5.07v47.5h-7.5v-6.666c0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07v6.666\r\n\t\th-7.5V92.492c0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07v35.832h-7.5v-18.332\r\n\t\tc0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07v18.332h-7.5v-0.832c0.04-2.818-2.256-5.112-5.074-5.07\r\n\t\tc-2.76,0.041-4.965,2.31-4.926,5.07v0.832h-25v-24.166c0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07\r\n\t\tv24.166h-25V86.658c0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07v41.666h-7.5v-30\r\n\t\tc0.04-2.818-2.256-5.112-5.074-5.07c-2.76,0.041-4.965,2.31-4.926,5.07v35c0,2.761,2.239,5,5,5h30v12.5\r\n\t\tc-0.096,6.762,10.096,6.762,10,0v-12.5h25v12.5c-0.096,6.762,10.096,6.762,10,0v-12.5h100c2.761,0,5-2.239,5-5v-17.5\r\n\t\tc0.096-6.762-10.096-6.762-10,0v12.5h-7.5v-47.5C167.54,78.006,165.244,75.712,162.426,75.754z M215.223,115.789\r\n\t\tc-1.379,0.021-2.48,1.156-2.461,2.535c0,26.407-21.355,47.762-47.762,47.762c-3.381-0.048-3.381,5.048,0,5\r\n\t\tc29.109,0,52.762-23.652,52.762-52.762C217.782,116.915,216.633,115.767,215.223,115.789z M222.368,161.264l43.764,39.943\r\n\t\tl-18.584,17.27l-38.402-43.707c1.073-0.84,2.133-1.704,3.168-2.613C216.105,168.824,219.449,165.162,222.368,161.264z\r\n\t\t M269.838,204.59l7.926,7.234l-19.195,19.195l-7.719-8.785L269.838,204.59z"),L(n,"fill","#000000"),L(n,"height",t[1]),L(n,"width",t[0]),L(n,"version","1.1"),L(n,"id","Capa_1"),L(n,"xmlns","http://www.w3.org/2000/svg"),L(n,"xmlns:xlink","http://www.w3.org/1999/xlink"),L(n,"viewBox","0 0 290 290"),L(n,"xml:space","preserve")},m(t,e){_(t,n,e),k(n,o),k(o,i)},p(t,[e]){2&e&&L(n,"height",t[1]),1&e&&L(n,"width",t[0])},i:e,o:e,d(t){t&&S(n)}}}function Ud(t,e,n){let{width:o="45px"}=e,{height:i="35px"}=e;return t.$$set=t=>{"width"in t&&n(0,o=t.width),"height"in t&&n(1,i=t.height)},[o,i]}class Jd extends Ct{constructor(t){super(),Et(this,t,Ud,Qd,a,{width:0,height:1})}}function tu(t){let e,n,o,i,r,s,a,l,c,d,u,h,p,f,g,m,y,w,$,v,x,b,E,O,z,N,I,D,T,H,V,F,W,X,Y,R,Z,B,K,G,j,q,Q,U,J,tt,et,nt,ot,it=t[0].cyclomaticComplexity+"",rt=t[0].depth+"",st=t[0].decisionPoints+"",at=t[0].stepsCount+"",lt=t[0].nestingLoops.length+"",ct=t[1][0].length+"",dt=t[1][t[1].length-1].length+"";return{c(){e=C("div"),n=C("table"),o=C("tbody"),i=C("tr"),r=C("td"),r.textContent="Cyclomatic Complexity",s=M(),a=C("td"),l=P(it),c=M(),d=C("tr"),u=C("td"),u.textContent="Depth",h=M(),p=C("td"),f=P(rt),g=M(),m=C("tr"),y=C("td"),y.textContent="Decision Points",w=M(),$=C("td"),v=P(st),x=M(),b=C("tr"),E=C("td"),E.textContent="Number of Steps",O=M(),z=C("td"),N=P(at),I=M(),D=C("tr"),T=C("td"),T.textContent="Loop Complexity",H=M(),V=C("td"),F=P("O(n"),W=C("sup"),X=P(lt),Y=P(")"),R=M(),Z=C("tr"),B=C("td"),B.textContent="Shortest path has",K=M(),G=C("td"),j=P(ct),q=P(" Steps"),Q=M(),U=C("tr"),J=C("td"),J.textContent="Longest path has",tt=M(),et=C("td"),nt=P(dt),ot=P(" Steps"),L(n,"class","analysis-table svelte-12s5nu2"),L(e,"class","analysis-dropdown svelte-12s5nu2")},m(t,S){_(t,e,S),k(e,n),k(n,o),k(o,i),k(i,r),k(i,s),k(i,a),k(a,l),k(o,c),k(o,d),k(d,u),k(d,h),k(d,p),k(p,f),k(o,g),k(o,m),k(m,y),k(m,w),k(m,$),k($,v),k(o,x),k(o,b),k(b,E),k(b,O),k(b,z),k(z,N),k(o,I),k(o,D),k(D,T),k(D,H),k(D,V),k(V,F),k(V,W),k(W,X),k(V,Y),k(o,R),k(o,Z),k(Z,B),k(Z,K),k(Z,G),k(G,j),k(G,q),k(o,Q),k(o,U),k(U,J),k(U,tt),k(U,et),k(et,nt),k(et,ot)},p(t,e){1&e&&it!==(it=t[0].cyclomaticComplexity+"")&&A(l,it),1&e&&rt!==(rt=t[0].depth+"")&&A(f,rt),1&e&&st!==(st=t[0].decisionPoints+"")&&A(v,st),1&e&&at!==(at=t[0].stepsCount+"")&&A(N,at),1&e&&lt!==(lt=t[0].nestingLoops.length+"")&&A(X,lt),2&e&&ct!==(ct=t[1][0].length+"")&&A(j,ct),2&e&&dt!==(dt=t[1][t[1].length-1].length+"")&&A(nt,dt)},d(t){t&&S(e)}}}function eu(t){let e,n,o,i,r,s,a;o=new Jd({});let l=t[2]&&tu(t);return{c(){e=C("div"),n=C("button"),kt(o.$$.fragment),i=M(),l&&l.c(),L(e,"class","analysis-dropdown-container svelte-12s5nu2")},m(c,d){_(c,e,d),k(e,n),_t(o,n,null),k(e,i),l&&l.m(e,null),r=!0,s||(a=N(n,"click",t[3]),s=!0)},p(t,[n]){t[2]?l?l.p(t,n):(l=tu(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(t){r||(gt(o.$$.fragment,t),r=!0)},o(t){mt(o.$$.fragment,t),r=!1},d(t){t&&S(e),St(o),l&&l.d(),s=!1,a()}}}function nu(t,e,n){let{stats:o={}}=e,{paths:i=[]}=e,r=!1;return t.$$set=t=>{"stats"in t&&n(0,o=t.stats),"paths"in t&&n(1,i=t.paths)},[o,i,r,function(){n(2,r=!r)}]}class ou extends Ct{constructor(t){super(),Et(this,t,nu,eu,a,{stats:0,paths:1})}}function iu(t){let n,o,i;return{c(){n=C("div"),n.innerHTML='<div class="popup-box svelte-d7b5l7"><p><a href="https://github.com/NaturalIntelligence/text2obj" target="_blank">Algorithm Syntax</a></p> <div><h3>Hover a Node</h3> <table class="help-table svelte-d7b5l7"><tbody><tr><td class="svelte-d7b5l7">with <kbd>a</kbd></td> <td class="svelte-d7b5l7">Highlight all the paths passing through</td></tr> <tr><td class="svelte-d7b5l7">with <kbd>q</kbd></td> <td class="svelte-d7b5l7">Highlight all the steps after</td></tr> <tr><td class="svelte-d7b5l7">with <kbd>b</kbd></td> <td class="svelte-d7b5l7">Highlight all the steps before</td></tr> <tr><td class="svelte-d7b5l7">with <kbd>s</kbd></td> <td class="svelte-d7b5l7">Highlight shortest path passing through</td></tr></tbody></table></div> <small>Keep the key held and hover out from the node to remove the selection.</small> <div><h3>Click a Node</h3> <table class="help-table svelte-d7b5l7"><tbody><tr><td class="svelte-d7b5l7">No key</td> <td class="svelte-d7b5l7">Expand/Collapse child steps</td></tr> <tr><td class="svelte-d7b5l7">with <kbd>]</kbd></td> <td class="svelte-d7b5l7">Collapse all nested branches</td></tr> <tr><td class="svelte-d7b5l7">with <kbd>[</kbd></td> <td class="svelte-d7b5l7">Expand all nested branches</td></tr></tbody></table></div></div>',L(n,"class","popup-container svelte-d7b5l7")},m(e,r){_(e,n,r),o||(i=N(n,"click",t[2]),o=!0)},p:e,d(t){t&&S(n),o=!1,i()}}}function ru(t){let n,o,i,r,s,a=t[0]&&iu(t);return{c(){n=C("a"),n.textContent="Help",o=M(),a&&a.c(),i=z(),L(n,"class","help-link svelte-d7b5l7")},m(e,l){_(e,n,l),_(e,o,l),a&&a.m(e,l),_(e,i,l),r||(s=N(n,"click",t[1]),r=!0)},p(t,[e]){t[0]?a?a.p(t,e):(a=iu(t),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i:e,o:e,d(t){t&&(S(n),S(o),S(i)),a&&a.d(t),r=!1,s()}}}function su(t,e,n){let o=!1;return[o,function(){n(0,o=!o)},function(t){t.target===t.currentTarget&&n(0,o=!1)}]}class au extends Ct{constructor(t){super(),Et(this,t,su,ru,a,{})}}function lu(t){let n,o,i,r,s,a,l,c,d,u,h,p,f,g,m,y,w,$,v,x,b,E,C,M,z,N,I,D,A,H,V,F;return{c(){n=O("svg"),o=O("defs"),i=O("style"),r=P("@import url(https://fonts.googleapis.com/css2?family=Architects+Daughter:wght@400;500);&#xa;\n    "),s=O("rect"),a=O("g"),l=O("g"),c=O("g"),d=O("g"),u=O("g"),h=O("g"),p=O("g"),f=O("g"),g=O("g"),m=O("g"),y=O("g"),w=O("rect"),$=O("g"),v=O("g"),x=O("path"),b=O("g"),E=O("g"),C=O("path"),M=O("g"),z=O("g"),N=O("path"),I=O("g"),D=O("g"),A=O("path"),H=O("g"),V=O("g"),F=O("g"),L(i,"type","text/css"),L(s,"fill","#ffffff"),L(s,"width","100%"),L(s,"height","100%"),L(s,"x","0"),L(s,"y","0"),T(s,"fill","light-dark(#ffffff, var(--ge-dark-color, #121212))"),L(d,"data-cell-id","9eGFOFwpmL9Wt3psQl19-1"),L(u,"data-cell-id","9eGFOFwpmL9Wt3psQl19-2"),L(h,"data-cell-id","9eGFOFwpmL9Wt3psQl19-3"),L(p,"data-cell-id","9eGFOFwpmL9Wt3psQl19-4"),L(f,"data-cell-id","9eGFOFwpmL9Wt3psQl19-5"),L(g,"data-cell-id","9eGFOFwpmL9Wt3psQl19-6"),L(w,"x","2"),L(w,"y","2"),L(w,"width","100"),L(w,"height","100"),L(w,"rx","13"),L(w,"ry","13"),L(w,"fill","none"),L(w,"stroke","#000000"),L(w,"stroke-width","4"),L(w,"pointer-events","all"),T(w,"stroke","light-dark(rgb(0, 0, 0), rgb(255, 255, 255))"),L(m,"data-cell-id","9eGFOFwpmL9Wt3psQl19-7"),L(x,"d","M 18 28 L 88 28"),L(x,"fill","none"),L(x,"stroke","#000000"),L(x,"stroke-width","4"),L(x,"stroke-miterlimit","10"),L(x,"pointer-events","stroke"),T(x,"stroke","light-dark(rgb(0, 0, 0), rgb(255, 255, 255))"),L($,"data-cell-id","9eGFOFwpmL9Wt3psQl19-10"),L(C,"d","M 18 44 L 88 44"),L(C,"fill","none"),L(C,"stroke","#000000"),L(C,"stroke-width","4"),L(C,"stroke-miterlimit","10"),L(C,"pointer-events","stroke"),T(C,"stroke","light-dark(rgb(0, 0, 0), rgb(255, 255, 255))"),L(b,"data-cell-id","9eGFOFwpmL9Wt3psQl19-14"),L(N,"d","M 18 60 L 88 60"),L(N,"fill","none"),L(N,"stroke","#000000"),L(N,"stroke-width","4"),L(N,"stroke-miterlimit","10"),L(N,"pointer-events","stroke"),T(N,"stroke","light-dark(rgb(0, 0, 0), rgb(255, 255, 255))"),L(M,"data-cell-id","9eGFOFwpmL9Wt3psQl19-27"),L(A,"d","M 18 76 L 88 76"),L(A,"fill","none"),L(A,"stroke","#000000"),L(A,"stroke-width","4"),L(A,"stroke-miterlimit","10"),L(A,"pointer-events","stroke"),T(A,"stroke","light-dark(rgb(0, 0, 0), rgb(255, 255, 255))"),L(I,"data-cell-id","9eGFOFwpmL9Wt3psQl19-28"),L(H,"data-cell-id","9eGFOFwpmL9Wt3psQl19-30"),L(V,"data-cell-id","9eGFOFwpmL9Wt3psQl19-31"),L(F,"data-cell-id","9eGFOFwpmL9Wt3psQl19-32"),L(c,"data-cell-id","1"),L(l,"data-cell-id","0"),L(n,"xmlns","http://www.w3.org/2000/svg"),L(n,"width",t[0]),L(n,"height",t[1]),L(n,"viewBox","-0.5 -0.5 104 104")},m(t,e){_(t,n,e),k(n,o),k(o,i),k(i,r),k(n,s),k(n,a),k(a,l),k(l,c),k(c,d),k(c,u),k(c,h),k(c,p),k(c,f),k(c,g),k(c,m),k(m,y),k(y,w),k(c,$),k($,v),k(v,x),k(c,b),k(b,E),k(E,C),k(c,M),k(M,z),k(z,N),k(c,I),k(I,D),k(D,A),k(c,H),k(c,V),k(c,F)},p(t,[e]){1&e&&L(n,"width",t[0]),2&e&&L(n,"height",t[1])},i:e,o:e,d(t){t&&S(n)}}}function cu(t,e,n){let{width:o="25px"}=e,{height:i="25px"}=e;return t.$$set=t=>{"width"in t&&n(0,o=t.width),"height"in t&&n(1,i=t.height)},[o,i]}class du extends Ct{constructor(t){super(),Et(this,t,cu,lu,a,{width:0,height:1})}}function uu(t){let n,o,i,r,s,a,l,c,d,u,h,p,f,g,m,y,w,$,v,x,b,E,C,M,z,N,I,D;return{c(){n=O("svg"),o=O("defs"),i=O("style"),r=P("@import url(https://fonts.googleapis.com/css2?family=Architects+Daughter:wght@400;500);&#xa;\n    "),s=O("rect"),a=O("g"),l=O("g"),c=O("g"),d=O("g"),u=O("g"),h=O("g"),p=O("g"),f=O("g"),g=O("g"),m=O("g"),y=O("g"),w=O("g"),$=O("g"),v=O("g"),x=O("g"),b=O("g"),E=O("rect"),C=O("g"),M=O("g"),z=O("path"),N=O("g"),I=O("g"),D=O("path"),L(i,"type","text/css"),L(s,"fill","#ffffff"),L(s,"width","100%"),L(s,"height","100%"),L(s,"x","0"),L(s,"y","0"),T(s,"fill","light-dark(#ffffff, var(--ge-dark-color, #121212))"),L(d,"data-cell-id","9eGFOFwpmL9Wt3psQl19-1"),L(u,"data-cell-id","9eGFOFwpmL9Wt3psQl19-2"),L(h,"data-cell-id","9eGFOFwpmL9Wt3psQl19-3"),L(p,"data-cell-id","9eGFOFwpmL9Wt3psQl19-4"),L(f,"data-cell-id","9eGFOFwpmL9Wt3psQl19-5"),L(g,"data-cell-id","9eGFOFwpmL9Wt3psQl19-6"),L(m,"data-cell-id","9eGFOFwpmL9Wt3psQl19-7"),L(y,"data-cell-id","9eGFOFwpmL9Wt3psQl19-10"),L(w,"data-cell-id","9eGFOFwpmL9Wt3psQl19-14"),L($,"data-cell-id","9eGFOFwpmL9Wt3psQl19-27"),L(v,"data-cell-id","9eGFOFwpmL9Wt3psQl19-28"),L(E,"x","2"),L(E,"y","2"),L(E,"width","100"),L(E,"height","100"),L(E,"rx","13"),L(E,"ry","13"),L(E,"fill","none"),L(E,"stroke","#000000"),L(E,"stroke-width","4"),L(E,"pointer-events","all"),T(E,"stroke","light-dark(rgb(0, 0, 0), rgb(255, 255, 255))"),L(x,"data-cell-id","9eGFOFwpmL9Wt3psQl19-30"),L(z,"d","M 18 31 L 88 31"),L(z,"fill","none"),L(z,"stroke","#000000"),L(z,"stroke-width","4"),L(z,"stroke-miterlimit","10"),L(z,"pointer-events","stroke"),T(z,"stroke","light-dark(rgb(0, 0, 0), rgb(255, 255, 255))"),L(C,"data-cell-id","9eGFOFwpmL9Wt3psQl19-31"),L(D,"d","M 18 47 L 88 47"),L(D,"fill","none"),L(D,"stroke","#000000"),L(D,"stroke-width","4"),L(D,"stroke-miterlimit","10"),L(D,"pointer-events","stroke"),T(D,"stroke","light-dark(rgb(0, 0, 0), rgb(255, 255, 255))"),L(N,"data-cell-id","9eGFOFwpmL9Wt3psQl19-32"),L(c,"data-cell-id","1"),L(l,"data-cell-id","0"),L(n,"xmlns","http://www.w3.org/2000/svg"),L(n,"width",t[0]),L(n,"height",t[1]),L(n,"viewBox","-0.5 -0.5 104 104")},m(t,e){_(t,n,e),k(n,o),k(o,i),k(i,r),k(n,s),k(n,a),k(a,l),k(l,c),k(c,d),k(c,u),k(c,h),k(c,p),k(c,f),k(c,g),k(c,m),k(c,y),k(c,w),k(c,$),k(c,v),k(c,x),k(x,b),k(b,E),k(c,C),k(C,M),k(M,z),k(c,N),k(N,I),k(I,D)},p(t,[e]){1&e&&L(n,"width",t[0]),2&e&&L(n,"height",t[1])},i:e,o:e,d(t){t&&S(n)}}}function hu(t,e,n){let{width:o="25px"}=e,{height:i="25px"}=e;return t.$$set=t=>{"width"in t&&n(0,o=t.width),"height"in t&&n(1,i=t.height)},[o,i]}class pu extends Ct{constructor(t){super(),Et(this,t,hu,uu,a,{width:0,height:1})}}function fu(t){let n,o,i,r,s,a,l,c,d,u;return{c(){n=O("svg"),o=O("title"),i=P("focus_point_round [#844]"),r=O("desc"),s=P("Created with Sketch."),a=O("defs"),l=O("g"),c=O("g"),d=O("g"),u=O("path"),L(u,"d","M264,4281 L264,4286 C264,4286.552 263.552,4287 263,4287 C262.448,4287 262,4286.552 262,4286 L262,4282 C262,4281.448 261.552,4281 261,4281 L257,4281 C256.448,4281 256,4280.552 256,4280 C256,4279.448 256.448,4279 257,4279 L262,4279 C263.105,4279 264,4279.895 264,4281 L264,4281 Z M262,4299 L257,4299 C256.448,4299 256,4298.552 256,4298 C256,4297.448 256.448,4297 257,4297 L261,4297 C261.552,4297 262,4296.552 262,4296 L262,4292 C262,4291.448 262.448,4291 263,4291 C263.552,4291 264,4291.448 264,4292 L264,4297 C264,4298.105 263.105,4299 262,4299 L262,4299 Z M244,4297 L244,4292 C244,4291.448 244.448,4291 245,4291 C245.552,4291 246,4291.448 246,4292 L246,4296 C246,4296.552 246.448,4297 247,4297 L251,4297 C251.552,4297 252,4297.448 252,4298 C252,4298.552 251.552,4299 251,4299 L246,4299 C244.895,4299 244,4298.105 244,4297 L244,4297 Z M244,4286 L244,4281 C244,4279.895 244.895,4279 246,4279 L251,4279 C251.552,4279 252,4279.448 252,4280 C252,4280.552 251.552,4281 251,4281 L247,4281 C246.448,4281 246,4281.448 246,4282 L246,4286 C246,4286.552 245.552,4287 245,4287 C244.448,4287 244,4286.552 244,4286 L244,4286 Z M244.01,4289 L244,4289.01 L244,4288.99 L244.01,4289 Z M254,4291 C252.897,4291 252,4290.103 252,4289 C252,4287.897 252.897,4287 254,4287 C255.103,4287 256,4287.897 256,4289 C256,4290.103 255.103,4291 254,4291 L254,4291 Z M257.859,4290 L259,4290 C259.552,4290 260,4289.552 260,4289 C260,4288.448 259.552,4288 259,4288 L257.859,4288 C257.496,4286.599 256.401,4285.504 255,4285.141 L255,4284 C255,4283.448 254.552,4283 254,4283 C253.448,4283 253,4283.448 253,4284 L253,4285.141 C251.599,4285.504 250.504,4286.599 250.141,4288 L249,4288 C248.448,4288 248,4288.448 248,4289 C248,4289.552 248.448,4290 249,4290 L250.141,4290 C250.504,4291.401 251.599,4292.496 253,4292.859 L253,4294 C253,4294.552 253.448,4295 254,4295 C254.552,4295 255,4294.552 255,4294 L255,4292.859 C256.401,4292.496 257.496,4291.401 257.859,4290 L257.859,4290 Z"),L(u,"id","focus_point_round-[#844]"),L(d,"id","icons"),L(d,"transform","translate(56.000000, 160.000000)"),L(c,"id","Dribbble-Light-Preview"),L(c,"transform","translate(-300.000000, -4439.000000)"),L(c,"fill","#000000"),L(l,"id","Page-1"),L(l,"stroke","none"),L(l,"stroke-width","1"),L(l,"fill","none"),L(l,"fill-rule","evenodd"),L(n,"width",t[0]),L(n,"height",t[1]),L(n,"viewBox","0 0 20 20"),L(n,"version","1.1"),L(n,"xmlns","http://www.w3.org/2000/svg"),L(n,"xmlns:xlink","http://www.w3.org/1999/xlink")},m(t,e){_(t,n,e),k(n,o),k(o,i),k(n,r),k(r,s),k(n,a),k(n,l),k(l,c),k(c,d),k(d,u)},p(t,[e]){1&e&&L(n,"width",t[0]),2&e&&L(n,"height",t[1])},i:e,o:e,d(t){t&&S(n)}}}function gu(t,e,n){let{width:o="24px"}=e,{height:i="24px"}=e;return t.$$set=t=>{"width"in t&&n(0,o=t.width),"height"in t&&n(1,i=t.height)},[o,i]}class mu extends Ct{constructor(t){super(),Et(this,t,gu,fu,a,{width:0,height:1})}}function yu(t,e,n){const o=t.slice();return o[12]=e[n],o[14]=n,o}function wu(t){let e,n,o=t[12].flowName+"";return{c(){var i,r;e=C("option"),n=P(o),e.__value=t[14],i=e,r=e.__value,i.value=null==r?"":r},m(t,o){_(t,e,o),k(e,n)},p(t,e){4&e&&o!==(o=t[12].flowName+"")&&A(n,o)},d(t){t&&S(e)}}}function $u(t){let e,n;return e=new du({props:{height:"24px"}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function vu(t){let e,n;return e=new pu({props:{height:"24px"}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function xu(t){let e,n;return e=new qd({props:{nodes:t[5],paths:t[2][t[0]].paths,selectedFlowIndex:t[0]}}),e.$on("pathSelected",t[8]),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};32&n&&(o.nodes=t[5]),5&n&&(o.paths=t[2][t[0]].paths),1&n&&(o.selectedFlowIndex=t[0]),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function bu(t){let e,n;return e=new ou({props:{stats:t[2][t[0]].stats,paths:t[2][t[0]].paths}}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},p(t,n){const o={};5&n&&(o.stats=t[2][t[0]].stats),5&n&&(o.paths=t[2][t[0]].paths),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function ku(t){let e,n,o,i,a,l,c,d,u,h,p,f,g,m,y,w,v,x,b=yt(t[2]),O=[];for(let e=0;e<b.length;e+=1)O[e]=wu(yu(t,b,e));let P=!t[4]&&$u(),z=t[4]&&vu();c=new Wd({props:{nodes:t[5],fileName:t[3]}});let I=t[2][t[0]]&&t[2][t[0]].paths&&xu(t),D=t[2][t[0]]&&t[2][t[0]].stats&&bu(t);return f=new mu({}),y=new au({}),{c(){e=C("div"),n=C("select");for(let t=0;t<O.length;t+=1)O[t].c();o=M(),i=C("button"),P&&P.c(),a=M(),z&&z.c(),l=M(),kt(c.$$.fragment),d=M(),I&&I.c(),u=M(),D&&D.c(),h=M(),p=C("button"),kt(f.$$.fragment),m=M(),kt(y.$$.fragment),L(n,"class","st-flow-chart-tool svelte-19rdvv3"),void 0===t[0]&&rt((()=>t[10].call(n))),L(i,"class","svelte-19rdvv3"),L(p,"class",g=$(t[1]?"":"passive")+" svelte-19rdvv3"),L(e,"class","st-toolbox svelte-19rdvv3")},m(r,g){_(r,e,g),k(e,n);for(let t=0;t<O.length;t+=1)O[t]&&O[t].m(n,null);H(n,t[0],!0),k(e,o),k(e,i),P&&P.m(i,null),k(i,a),z&&z.m(i,null),k(e,l),_t(c,e,null),k(e,d),I&&I.m(e,null),k(e,u),D&&D.m(e,null),k(e,h),k(e,p),_t(f,p,null),k(e,m),_t(y,e,null),w=!0,v||(x=[N(n,"change",(function(){s(t[6])&&t[6].apply(this,arguments)})),N(n,"change",t[10]),N(i,"click",(function(){s(t[7])&&t[7].apply(this,arguments)})),N(p,"click",t[9])],v=!0)},p(o,[r]){if(t=o,4&r){let e;for(b=yt(t[2]),e=0;e<b.length;e+=1){const o=yu(t,b,e);O[e]?O[e].p(o,r):(O[e]=wu(o),O[e].c(),O[e].m(n,null))}for(;e<O.length;e+=1)O[e].d(1);O.length=b.length}1&r&&H(n,t[0]),t[4]?P&&(pt(),mt(P,1,1,(()=>{P=null})),ft()):P?16&r&&gt(P,1):(P=$u(),P.c(),gt(P,1),P.m(i,a)),t[4]?z?16&r&&gt(z,1):(z=vu(),z.c(),gt(z,1),z.m(i,null)):z&&(pt(),mt(z,1,1,(()=>{z=null})),ft());const s={};32&r&&(s.nodes=t[5]),8&r&&(s.fileName=t[3]),c.$set(s),t[2][t[0]]&&t[2][t[0]].paths?I?(I.p(t,r),5&r&&gt(I,1)):(I=xu(t),I.c(),gt(I,1),I.m(e,u)):I&&(pt(),mt(I,1,1,(()=>{I=null})),ft()),t[2][t[0]]&&t[2][t[0]].stats?D?(D.p(t,r),5&r&&gt(D,1)):(D=bu(t),D.c(),gt(D,1),D.m(e,h)):D&&(pt(),mt(D,1,1,(()=>{D=null})),ft()),(!w||2&r&&g!==(g=$(t[1]?"":"passive")+" svelte-19rdvv3"))&&L(p,"class",g)},i(t){w||(gt(P),gt(z),gt(c.$$.fragment,t),gt(I),gt(D),gt(f.$$.fragment,t),gt(y.$$.fragment,t),w=!0)},o(t){mt(P),mt(z),mt(c.$$.fragment,t),mt(I),mt(D),mt(f.$$.fragment,t),mt(y.$$.fragment,t),w=!1},d(t){t&&S(e),E(O,t),P&&P.d(),z&&z.d(),St(c),I&&I.d(),D&&D.d(),St(f),St(y),v=!1,r(x)}}}function _u(t,e,n){let{flowsData:o=[]}=e,{selectedFlowIndex:i}=e,{flowName:r=""}=e,{hideMsgDetail:s=!0}=e,{nodes:a=[]}=e,{handleFlowChange:l}=e,{hideStepMsgDetail:c}=e,{focusOn:d=!0}=e;const u=G();return t.$$set=t=>{"flowsData"in t&&n(2,o=t.flowsData),"selectedFlowIndex"in t&&n(0,i=t.selectedFlowIndex),"flowName"in t&&n(3,r=t.flowName),"hideMsgDetail"in t&&n(4,s=t.hideMsgDetail),"nodes"in t&&n(5,a=t.nodes),"handleFlowChange"in t&&n(6,l=t.handleFlowChange),"hideStepMsgDetail"in t&&n(7,c=t.hideStepMsgDetail),"focusOn"in t&&n(1,d=t.focusOn)},[i,d,o,r,s,a,l,c,function(t){u("pathSelected",t.detail)},function(){n(1,d=!d)},function(){i=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),n(0,i)}]}class Su extends Ct{constructor(t){super(),Et(this,t,_u,ku,a,{flowsData:2,selectedFlowIndex:0,flowName:3,hideMsgDetail:4,nodes:5,handleFlowChange:6,hideStepMsgDetail:7,focusOn:1})}}function Eu(t,e,n){let o,{selection:i}=e,{nodes:r}=e,{focusOn:s=!0}=e;return t.$$set=t=>{"selection"in t&&n(0,i=t.selection),"nodes"in t&&n(1,r=t.nodes),"focusOn"in t&&n(2,s=t.focusOn)},t.$$.update=()=>{7&t.$$.dirty&&i&&i.nodeIds&&s&&function(t,e){if(t.length>0){const n=e.filter((e=>t.includes(e.id)));o.fitView({nodes:n,maxZoom:1,duration:200})}}(i.nodeIds,r)},o=function(){const{zoomIn:t,zoomOut:e,fitView:n,onbeforedelete:o,snapGrid:i,viewport:r,width:s,height:a,minZoom:l,maxZoom:c,panZoom:u,nodes:h,edges:p,domNode:f,nodeLookup:g,nodeOrigin:m,edgeLookup:y,connectionLookup:w}=Fa(),$=t=>{const e=d(g),n=Ld(t)?t:e.get(t.id),o=n.parentId?function(t,e={width:0,height:0},n,o,i){let r=n;const s={...t};for(;r;){const t=o.get(r);if(r=t?.parentId,t){const n=t.origin||i;s.x+=t.internals.positionAbsolute.x-(e.width??0)*n[0],s.y+=t.internals.positionAbsolute.y-(e.height??0)*n[1]}}return s}(n.position,n.measured,n.parentId,e,d(m)):n.position,i={id:n.id,position:o,width:n.measured?.width??n.width,height:n.measured?.height??n.height,data:n.data};return Ar(i)},v=t=>d(g).get(t);return{zoomIn:t,zoomOut:e,getInternalNode:v,getNode:t=>v(t)?.internals.userNode,getNodes:t=>void 0===t?d(h):Id(d(g),t),getEdge:t=>d(y).get(t),getEdges:t=>void 0===t?d(p):Id(d(y),t),setZoom:(t,e)=>{const n=d(u);return n?n.scaleTo(t,{duration:e?.duration}):Promise.resolve(!1)},getZoom:()=>d(r).zoom,setViewport:async(t,e)=>{const n=d(r),o=d(u);return o?(await o.setViewport({x:t.x??n.x,y:t.y??n.y,zoom:t.zoom??n.zoom},{duration:e?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>d(r),setCenter:async(t,e,n)=>{const o=void 0!==n?.zoom?n.zoom:d(c),i=d(u);return i?(await i.setViewport({x:d(s)/2-t*o,y:d(a)/2-e*o,zoom:o},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(t,e)=>{const n=d(u);if(!n)return Promise.resolve(!1);const o=Br(t,d(s),d(a),d(l),d(c),e?.padding??.1);return await n.setViewport(o,{duration:e?.duration}),Promise.resolve(!0)},getIntersectingNodes:(t,e=!0,n)=>{const o=Fr(t),i=o?t:$(t);return i?(n||d(h)).filter((n=>{const r=d(g).get(n.id);if(!r||!o&&n.id===t.id)return!1;const s=Ar(r),a=Vr(s,i);return e&&a>0||a>=i.width*i.height})):[]},isNodeIntersecting:(t,e,n=!0)=>{const o=Fr(t)?t:$(t);if(!o)return!1;const i=Vr(o,e);return n&&i>0||i>=o.width*o.height},deleteElements:async({nodes:t=[],edges:e=[]})=>{const{nodes:n,edges:i}=await Cr({nodesToRemove:t,edgesToRemove:e,nodes:d(h),edges:d(p),onBeforeDelete:d(o)});return n&&h.update((t=>t.filter((t=>!n.some((({id:e})=>e===t.id)))))),i&&p.update((t=>t.filter((t=>!i.some((({id:e})=>e===t.id)))))),{deletedNodes:n,deletedEdges:i}},screenToFlowPosition:(t,e={snapToGrid:!0})=>{const n=d(f);if(!n)return t;const o=!!e.snapToGrid&&d(i),{x:s,y:a,zoom:l}=d(r),{x:c,y:u}=n.getBoundingClientRect(),h={x:t.x-c,y:t.y-u};return Rr(h,[s,a,l],null!==o,o||[1,1])},flowToScreenPosition:t=>{const e=d(f);if(!e)return t;const{x:n,y:o,zoom:i}=d(r),{x:s,y:a}=e.getBoundingClientRect(),l=Zr(t,[n,o,i]);return{x:l.x+s,y:l.y+a}},toObject:()=>({nodes:d(h).map((t=>({...t,position:{...t.position},data:{...t.data}}))),edges:d(p).map((t=>({...t}))),viewport:{...d(r)}}),updateNode:(t,e,n={replace:!1})=>{const o=d(g).get(t)?.internals.userNode;if(!o)return;const i="function"==typeof e?e(o):e;n.replace?h.update((e=>e.map((e=>e.id===t?Ld(i)?i:{...e,...i}:e)))):(Object.assign(o,i),h.update((t=>t)))},updateNodeData:(t,e,n)=>{const o=d(g).get(t)?.internals.userNode;if(!o)return;const i="function"==typeof e?e(o):e;o.data=n?.replace?i:{...o.data,...i},h.update((t=>t))},getNodesBounds:t=>{const e=d(g),n=d(m);return vr(t,{nodeLookup:e,nodeOrigin:n})},getHandleConnections:({type:t,id:e,nodeId:n})=>Array.from(d(w).get(`${n}-${t}-${e??null}`)?.values()??[]),viewport:r}}(),[i,r,s]}class Cu extends Ct{constructor(t){super(),Et(this,t,Eu,null,a,{selection:0,nodes:1,focusOn:2})}}let Ou=180,Pu=72;function Mu(t){let n,o;return{c(){n=O("svg"),o=O("path"),L(o,"d","M4.70710678,18 L6.85355339,20.1464466 C7.04881554,20.3417088 7.04881554,20.6582912 6.85355339,20.8535534 C6.65829124,21.0488155 6.34170876,21.0488155 6.14644661,20.8535534 L3.14644661,17.8535534 C2.95118446,17.6582912 2.95118446,17.3417088 3.14644661,17.1464466 L6.14644661,14.1464466 C6.34170876,13.9511845 6.65829124,13.9511845 6.85355339,14.1464466 C7.04881554,14.3417088 7.04881554,14.6582912 6.85355339,14.8535534 L4.70710678,17 L18.5,17 C19.3284271,17 20,16.3284271 20,15.5 L20,12.5 C20,12.2238576 20.2238576,12 20.5,12 C20.7761424,12 21,12.2238576 21,12.5 L21,15.5 C21,16.8807119 19.8807119,18 18.5,18 L4.70710678,18 Z M19.2928932,7 L17.1464466,4.85355339 C16.9511845,4.65829124 16.9511845,4.34170876 17.1464466,4.14644661 C17.3417088,3.95118446 17.6582912,3.95118446 17.8535534,4.14644661 L20.8535534,7.14644661 C21.0488155,7.34170876 21.0488155,7.65829124 20.8535534,7.85355339 L17.8535534,10.8535534 C17.6582912,11.0488155 17.3417088,11.0488155 17.1464466,10.8535534 C16.9511845,10.6582912 16.9511845,10.3417088 17.1464466,10.1464466 L19.2928932,8 L5.5,8 C4.67157288,8 4,8.67157288 4,9.5 L4,12.5 C4,12.7761424 3.77614237,13 3.5,13 C3.22385763,13 3,12.7761424 3,12.5 L3,9.5 C3,8.11928813 4.11928813,7 5.5,7 L19.2928932,7 Z"),L(n,"fill","#000000"),L(n,"width",t[0]),L(n,"height",t[1]),L(n,"viewBox","0 0 24 24"),L(n,"xmlns","http://www.w3.org/2000/svg")},m(t,e){_(t,n,e),k(n,o)},p(t,[e]){1&e&&L(n,"width",t[0]),2&e&&L(n,"height",t[1])},i:e,o:e,d(t){t&&S(n)}}}function zu(t,e,n){let{width:o="25px"}=e,{height:i="25px"}=e;return t.$$set=t=>{"width"in t&&n(0,o=t.width),"height"in t&&n(1,i=t.height)},[o,i]}class Nu extends Ct{constructor(t){super(),Et(this,t,zu,Mu,a,{width:0,height:1})}}function Lu(t){let n,o,i,r;return{c(){n=O("svg"),o=O("circle"),i=O("polyline"),r=O("polyline"),T(o,"fill","#D75A4A"),L(o,"cx",t[0]),L(o,"cy",t[0]),L(o,"r",t[0]),T(i,"fill","none"),T(i,"stroke","#FFFFFF"),T(i,"stroke-width","2"),T(i,"stroke-linecap","round"),T(i,"stroke-miterlimit","10"),L(i,"points","16,34 25,25 34,16 \n\t"),T(r,"fill","none"),T(r,"stroke","#FFFFFF"),T(r,"stroke-width","2"),T(r,"stroke-linecap","round"),T(r,"stroke-miterlimit","10"),L(r,"points","16,16 25,25 34,34 \n\t"),L(n,"version","1.1"),L(n,"id","Capa_1"),L(n,"xmlns","http://www.w3.org/2000/svg"),L(n,"xmlns:xlink","http://www.w3.org/1999/xlink"),L(n,"viewBox","0 0 50 50"),L(n,"xml:space","preserve")},m(t,e){_(t,n,e),k(n,o),k(n,i),k(n,r)},p(t,[e]){1&e&&L(o,"cx",t[0]),1&e&&L(o,"cy",t[0]),1&e&&L(o,"r",t[0])},i:e,o:e,d(t){t&&S(n)}}}function Iu(t,e,n){let{size:o="25"}=e;return t.$$set=t=>{"size"in t&&n(0,o=t.size)},[o]}class Du extends Ct{constructor(t){super(),Et(this,t,Iu,Lu,a,{size:0})}}function Au(t){let n,o;return{c(){n=O("svg"),o=O("path"),L(o,"d","M21 9.00001L21 3.00001M21 3.00001H15M21 3.00001L12 12M10 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V14"),L(o,"stroke","#000000"),L(o,"stroke-width","2"),L(o,"stroke-linecap","round"),L(o,"stroke-linejoin","round"),L(n,"width",t[0]),L(n,"height",t[1]),L(n,"viewBox","0 0 24 24"),L(n,"fill","none"),L(n,"xmlns","http://www.w3.org/2000/svg")},m(t,e){_(t,n,e),k(n,o)},p(t,[e]){1&e&&L(n,"width",t[0]),2&e&&L(n,"height",t[1])},i:e,o:e,d(t){t&&S(n)}}}function Tu(t,e,n){let{width:o="25px"}=e,{height:i="25px"}=e;return t.$$set=t=>{"width"in t&&n(0,o=t.width),"height"in t&&n(1,i=t.height)},[o,i]}class Hu extends Ct{constructor(t){super(),Et(this,t,Tu,Au,a,{width:0,height:1})}}function Vu(t){let e,n,o;return n=new Nu({}),{c(){e=C("div"),kt(n.$$.fragment),L(e,"class","step-icon svelte-kj30v6")},m(t,i){_(t,e,i),_t(n,e,null),o=!0},i(t){o||(gt(n.$$.fragment,t),o=!0)},o(t){mt(n.$$.fragment,t),o=!1},d(t){t&&S(e),St(n)}}}function Fu(t){let e,n,o;return n=new Rd({}),{c(){e=C("div"),kt(n.$$.fragment),L(e,"class","step-icon svelte-kj30v6")},m(t,i){_(t,e,i),_t(n,e,null),o=!0},i(t){o||(gt(n.$$.fragment,t),o=!0)},o(t){mt(n.$$.fragment,t),o=!1},d(t){t&&S(e),St(n)}}}function Wu(t){let e,n,o;return n=new Du({}),{c(){e=C("div"),kt(n.$$.fragment),L(e,"class","step-icon svelte-kj30v6")},m(t,i){_(t,e,i),_t(n,e,null),o=!0},i(t){o||(gt(n.$$.fragment,t),o=!0)},o(t){mt(n.$$.fragment,t),o=!1},d(t){t&&S(e),St(n)}}}function Xu(t){let e,n,o;return n=new Hu({}),{c(){e=C("div"),kt(n.$$.fragment),L(e,"class","step-icon svelte-kj30v6")},m(t,i){_(t,e,i),_t(n,e,null),o=!0},i(t){o||(gt(n.$$.fragment,t),o=!0)},o(t){mt(n.$$.fragment,t),o=!1},d(t){t&&S(e),St(n)}}}function Yu(t){let e,n,o,i=t[0].collapsable?"-":"+";return{c(){e=C("div"),n=C("span"),o=P(i),L(n,"class","expand svelte-kj30v6")},m(t,i){_(t,e,i),k(e,n),k(n,o)},p(t,e){1&e&&i!==(i=t[0].collapsable?"-":"+")&&A(o,i)},d(t){t&&S(e)}}}function Ru(t){let e,n,o,i,r,s,a,l,c,d,u,h,p,f,g,m,y,w,$,v,x,b,E,O,z,N,I,D=(t[0].hideMsgDetail?t[0].msg:t[0].rawMsg)+"",H="LOOP"===t[0].type&&Vu(),V=("IF"===t[0].type||"ELSE_IF"===t[0].type)&&Fu(),F="ERR"===t[0].type&&Wu(),W="FOLLOW"===t[0].type&&Xu();a=new Ks({props:{class:"hndl",id:"t",type:"target",position:fr.Top}}),f=new Ks({props:{class:"hndl",id:"b",type:"source",position:fr.Bottom}}),m=new Ks({props:{class:"hndl",id:"bt",type:"target",position:fr.Bottom}}),w=new Ks({props:{class:"hndl",id:"l",type:"source",position:fr.Left}}),v=new Ks({props:{class:"hndl",id:"lt",type:"target",position:fr.Left}}),b=new Ks({props:{class:"hndl",id:"r",type:"source",position:fr.Right}}),O=new Ks({props:{class:"hndl",id:"rt",type:"target",position:fr.Right}});let X=("IF"===t[0].type||"ELSE_IF"===t[0].type||"LOOP"===t[0].type)&&Yu(t);return{c(){e=C("div"),H&&H.c(),n=M(),V&&V.c(),o=M(),F&&F.c(),i=M(),W&&W.c(),r=M(),s=C("div"),kt(a.$$.fragment),l=M(),c=C("div"),d=C("div"),u=C("p"),h=P(D),p=M(),kt(f.$$.fragment),g=M(),kt(m.$$.fragment),y=M(),kt(w.$$.fragment),$=M(),kt(v.$$.fragment),x=M(),kt(b.$$.fragment),E=M(),kt(O.$$.fragment),z=M(),X&&X.c(),T(e,"position","absolute"),L(d,"class","msgWrapper svelte-kj30v6"),L(c,"class","step-container svelte-kj30v6"),T(c,"width",Ou+"px"),T(c,"height",Pu+"px"),L(s,"class",N=(t[0].highlight?"hovered":"")+" "+(t[0].isEnd?"endStep":"step")+" "+("FOLLOW"===t[0].type?"clickable":"")+" svelte-kj30v6")},m(S,C){_(S,e,C),H&&H.m(e,null),k(e,n),V&&V.m(e,null),k(e,o),F&&F.m(e,null),k(e,i),W&&W.m(e,null),_(S,r,C),_(S,s,C),_t(a,s,null),k(s,l),k(s,c),k(c,d),k(d,u),k(u,h),t[7](u),t[8](c),k(s,p),_t(f,s,null),k(s,g),_t(m,s,null),k(s,y),_t(w,s,null),k(s,$),_t(v,s,null),k(s,x),_t(b,s,null),k(s,E),_t(O,s,null),k(s,z),X&&X.m(s,null),I=!0},p(t,[r]){"LOOP"===t[0].type?H?1&r&&gt(H,1):(H=Vu(),H.c(),gt(H,1),H.m(e,n)):H&&(pt(),mt(H,1,1,(()=>{H=null})),ft()),"IF"===t[0].type||"ELSE_IF"===t[0].type?V?1&r&&gt(V,1):(V=Fu(),V.c(),gt(V,1),V.m(e,o)):V&&(pt(),mt(V,1,1,(()=>{V=null})),ft()),"ERR"===t[0].type?F?1&r&&gt(F,1):(F=Wu(),F.c(),gt(F,1),F.m(e,i)):F&&(pt(),mt(F,1,1,(()=>{F=null})),ft()),"FOLLOW"===t[0].type?W?1&r&&gt(W,1):(W=Xu(),W.c(),gt(W,1),W.m(e,null)):W&&(pt(),mt(W,1,1,(()=>{W=null})),ft()),(!I||1&r)&&D!==(D=(t[0].hideMsgDetail?t[0].msg:t[0].rawMsg)+"")&&A(h,D),"IF"===t[0].type||"ELSE_IF"===t[0].type||"LOOP"===t[0].type?X?X.p(t,r):(X=Yu(t),X.c(),X.m(s,null)):X&&(X.d(1),X=null),(!I||1&r&&N!==(N=(t[0].highlight?"hovered":"")+" "+(t[0].isEnd?"endStep":"step")+" "+("FOLLOW"===t[0].type?"clickable":"")+" svelte-kj30v6"))&&L(s,"class",N)},i(t){I||(gt(H),gt(V),gt(F),gt(W),gt(a.$$.fragment,t),gt(f.$$.fragment,t),gt(m.$$.fragment,t),gt(w.$$.fragment,t),gt(v.$$.fragment,t),gt(b.$$.fragment,t),gt(O.$$.fragment,t),I=!0)},o(t){mt(H),mt(V),mt(F),mt(W),mt(a.$$.fragment,t),mt(f.$$.fragment,t),mt(m.$$.fragment,t),mt(w.$$.fragment,t),mt(v.$$.fragment,t),mt(b.$$.fragment,t),mt(O.$$.fragment,t),I=!1},d(n){n&&(S(e),S(r),S(s)),H&&H.d(),V&&V.d(),F&&F.d(),W&&W.d(),St(a),t[7](null),t[8](null),St(f),St(m),St(w),St(v),St(b),St(O),X&&X.d()}}}function Zu(t,e,n){const o={desire:15,min:10,max:80};let i,r;async function s(){i&&r&&(await(it(),nt),function(t,e){let n=o.min,i=o.max,r=n;for(;n<=i;)r=Math.floor((n+i)/2),t.style.fontSize=`${r}px`,(s=e).scrollWidth>s.clientWidth||s.scrollHeight>s.clientHeight?i=--r:n=++r;var s;t.style.fontSize=`${i}px`}(r,i))}var a;B((async()=>{await s()})),a=()=>{s()},Z().$$.after_update.push(a);let{data:l}=e,{position:c}=e,{id:d}=e,{hidden:u=!1}=e;return t.$$set=t=>{"data"in t&&n(0,l=t.data),"position"in t&&n(4,c=t.position),"id"in t&&n(5,d=t.id),"hidden"in t&&n(6,u=t.hidden)},[l,i,r,o,c,d,u,function(t){J[t?"unshift":"push"]((()=>{r=t,n(2,r)}))},function(t){J[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class Bu extends Ct{constructor(t){super(),Et(this,t,Zu,Ru,a,{fontSize:3,data:0,position:4,id:5,hidden:6})}get fontSize(){return this.$$.ctx[3]}}function Ku(t,e,n={},o=null){return o?t.forEach((t=>{o.has(t.id)&&(t.data={...t.data,...e,...n})})):t.forEach((t=>{t.data={...t.data,...e,...n}})),t}const Gu="stroke-width: 2px; stroke: #cac2c2;",ju={type:pr.ArrowClosed,width:20,height:20,color:"#cac2c2"},qu={type:pr.ArrowClosed,width:20,height:20,color:"#FF4000"},Qu={type:"smoothstep",markerEnd:ju,style:Gu};class Uu{constructor(t,e,n){this.nodes=t,this.edges=e,this.nodeState=n,this.selectedNodes=new Set,this.selectedEdges=new Set}update(t,e){this.nodes=t,this.edges=e}selectPath(t,e,n={}){this.selectNodes(t),e&&this.selectEdges(e,eh)}selectNodes(t){Ku(this.nodes,this.nodeState,{highlight:!0},t),this.selectedNodes=t}selectNodesByIndexes(t){!function(t,e,n={},o=[]){o.forEach((o=>{t[o].data={...t[o].data,...e,...n}}))}(this.nodes,this.nodeState,{highlight:!0},t)}selectEdges(t){Ju(this.edges,t,eh),this.selectedEdges=t}unselectPath(){this.unselectNodes(),this.selectedEdges.size>0&&this.unselectEdges(eh)}unselectNodes(){Ku(this.nodes,this.nodeState,{highlight:!1},this.selectedNodes),this.selectedNodes.clear()}unselectAllNodes(){Ku(this.nodes,this.nodeState,{highlight:!1}),this.selectedNodes.clear()}unselectEdges(){Ju(this.edges,this.selectedEdges,th),this.selectedEdges.clear()}unselectAllEdges(){Ju(this.edges,null,th),this.selectedEdges.clear()}toggleEdge(t){this.selectedEdges.has(t)?(this.selectedEdges.delete(t),Ju(this.edges,new Set([t]),th)):(this.selectedEdges.add(t),Ju(this.edges,new Set([t]),eh))}}function Ju(t,e,n){e?t.forEach((t=>{e.has(t.id)&&n(t)})):t.forEach((t=>{n(t)}))}function th(t){t.style=Gu,t.markerEnd=ju,t.labelStyle="font-size: 10px; font-weight: inherit; color: inherit;"}function eh(t){t.style="stroke-width: 2px; stroke: #FF4000",t.markerEnd=qu,t.labelStyle="font-size: 16px; font-weight: bold; color: #ff6347;"}function nh(t,e,n,o){ih(t,e,n.data.collapsable,function(t,e){const n=[],o=e.data.indent;for(let i=e.data.index+1;i<t.length;i++){const e=t[i];if(e.data.indent<=o)break;!1===e.data.collapsable&&(i=oh(t,i)),n.push(e.id)}return n}(t,n),n,o),n.data={...n.data,collapsable:!n.data.collapsable}}function oh(t,e){const n=t[e].data.indent;for(let o=e+1;o<t.length;o++){if(n>=t[o].data.indent)return--o}}function ih(t,e,n,o,i,r){for(let e=0;e<t.length;e++){const i=t[e];o.includes(i.id)&&(i.hidden=n)}n?function(t,e,n,o){e.forEach((e=>{(t[o[e.target]].hidden||t[o[e.source]].hidden||e.source===n.id)&&(e.hidden=!0)}))}(t,e,i,r):function(t,e,n,o){e.forEach((e=>{t[o[e.target]].hidden||t[o[e.source]].hidden?e.source===n.id&&(e.hidden=!1):e.hidden=!1}))}(t,e,i,r)}function rh(t){let e,n;return e=new Nd({}),{c(){kt(e.$$.fragment)},m(t,o){_t(e,t,o),n=!0},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){mt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function sh(t){let e,n,o,i,r,s;e=new rd({}),o=new yd({});let a=t[5]&&rh();return{c(){kt(e.$$.fragment),n=M(),kt(o.$$.fragment),i=M(),a&&a.c(),r=z()},m(t,l){_t(e,t,l),_(t,n,l),_t(o,t,l),_(t,i,l),a&&a.m(t,l),_(t,r,l),s=!0},p(t,e){t[5]?a?32&e&&gt(a,1):(a=rh(),a.c(),gt(a,1),a.m(r.parentNode,r)):a&&(pt(),mt(a,1,1,(()=>{a=null})),ft())},i(t){s||(gt(e.$$.fragment,t),gt(o.$$.fragment,t),gt(a),s=!0)},o(t){mt(e.$$.fragment,t),mt(o.$$.fragment,t),mt(a),s=!1},d(t){t&&(S(n),S(i),S(r)),St(e,t),St(o,t),a&&a.d(t)}}}function ah(t){let e,n,o,i,r,s;function a(e){t[22](e)}function l(e){t[23](e)}e=new Cu({props:{selection:t[0],nodes:t[1],focusOn:t[4]}});let c={nodeTypes:t[8],fitView:!0,defaultEdgeOptions:Qu,$$slots:{default:[sh]},$$scope:{ctx:t}};return void 0!==t[6]&&(c.nodes=t[6]),void 0!==t[7]&&(c.edges=t[7]),o=new kc({props:c}),J.push((()=>bt(o,"nodes",a))),J.push((()=>bt(o,"edges",l))),o.$on("nodemouseenter",t[9]),o.$on("nodemouseleave",t[10]),o.$on("nodeclick",t[14]),o.$on("edgeclick",t[11]),{c(){kt(e.$$.fragment),n=M(),kt(o.$$.fragment)},m(t,i){_t(e,t,i),_(t,n,i),_t(o,t,i),s=!0},p(t,n){const s={};1&n&&(s.selection=t[0]),2&n&&(s.nodes=t[1]),16&n&&(s.focusOn=t[4]),e.$set(s);const a={};67108896&n&&(a.$$scope={dirty:n,ctx:t}),!i&&64&n&&(i=!0,a.nodes=t[6],st((()=>i=!1))),!r&&128&n&&(r=!0,a.edges=t[7],st((()=>r=!1))),o.$set(a)},i(t){s||(gt(e.$$.fragment,t),gt(o.$$.fragment,t),s=!0)},o(t){mt(e.$$.fragment,t),mt(o.$$.fragment,t),s=!1},d(t){t&&S(n),St(e,t),St(o,t)}}}function lh(t){let e,n,o,i,s;return n=new Ec({props:{$$slots:{default:[ah]},$$scope:{ctx:t}}}),{c(){e=C("div"),kt(n.$$.fragment),L(e,"style",t[2]),L(e,"class",t[3])},m(r,a){_(r,e,a),_t(n,e,null),o=!0,i||(s=[N(window,"keyup",t[13]),N(window,"keydown",t[12])],i=!0)},p(t,[i]){const r={};67109107&i&&(r.$$scope={dirty:i,ctx:t}),n.$set(r),(!o||4&i)&&L(e,"style",t[2]),(!o||8&i)&&L(e,"class",t[3])},i(t){o||(gt(n.$$.fragment,t),o=!0)},o(t){mt(n.$$.fragment,t),o=!1},d(t){t&&S(e),St(n),i=!1,r(s)}}}function ch(t,e,n){const o=G(),i={step:Bu};let{nodes:r=[]}=e,{edges:s=[]}=e,{nodeState:a={}}=e,{paths:l=[]}=e,{nodesIndex:c={}}=e,{style:d=""}=e,{clazz:u=""}=e,{selection:h={}}=e,{focusOn:p=!0}=e,{minimap:f=!0}=e,{selectedFlowIndex:g=-1}=e,m=new Uu(r,s,a),y=ge(r),w=ge(s),$=-1;function v(t,e){m.update(t,e),y.set(t),w.set(e)}return K((()=>{v([],[])})),t.$$set=t=>{"nodes"in t&&n(1,r=t.nodes),"edges"in t&&n(15,s=t.edges),"nodeState"in t&&n(16,a=t.nodeState),"paths"in t&&n(17,l=t.paths),"nodesIndex"in t&&n(18,c=t.nodesIndex),"style"in t&&n(2,d=t.style),"clazz"in t&&n(3,u=t.clazz),"selection"in t&&n(0,h=t.selection),"focusOn"in t&&n(4,p=t.focusOn),"minimap"in t&&n(5,f=t.minimap),"selectedFlowIndex"in t&&n(19,g=t.selectedFlowIndex)},t.$$.update=()=>{65536&t.$$.dirty&&n(21,m.nodeState=a,m),2097219&t.$$.dirty&&(h&&h.nodeIds&&h.nodeIds.length>0?(m.unselectAllNodes(),m.selectNodes(new Set(h.nodeIds)),y.set(r)):h&&h.nodeIndexes&&h.nodeIndexes.length>0&&(m.unselectAllNodes(),m.selectNodesByIndexes(new Set(h.nodeIndexes)),y.set(r)))},[h,r,d,u,p,f,y,w,i,function(t){const e=t.detail.node;let o=null;if(-1!==$){switch($){case"a":o=function(t,e){return t.filter((t=>t.includes(String(e)))).flat()}(l,e.data.index);break;case"q":o=function(t,e){return t.filter((t=>t.includes(String(e)))).flatMap((t=>{let n=t.indexOf(String(e));return-1!==n&&n<t.length-1?t.slice(n+1):[]}))}(l,e.data.index);break;case"b":o=function(t,e){return t.filter((t=>t.includes(String(e)))).flatMap((t=>{let n=t.indexOf(String(e));return n>0?t.slice(0,n):[]}))}(l,e.data.index);break;case"l":o=function(t,e){let n=t.filter((t=>t.includes(String(e))));return 0===n.length?[]:n.reduce(((t,e)=>e.length>t.length?e:t))}(l,e.data.index);break;case"s":o=function(t,e){let n=t.filter((t=>t.includes(String(e))));return 0===n.length?[]:n.reduce(((t,e)=>e.length<t.length?e:t))}(l,e.data.index)}m.unselectAllNodes(),m.selectNodesByIndexes(new Set(o)),y.set(r),n(0,h={flowIndex:g,nodeIndexes:o})}},function(){-1!==$&&(m.unselectAllNodes(),y.set(r),n(0,h={flowIndex:g,nodeIndexes:[]}))},function(t){m.toggleEdge(t.detail.edge.id),w.set(s)},function(t){$=t.key},function(t){$=-1},function(t){const e=t.detail.node;"FOLLOW"===e.data.type?o("flowChange",{flowName:e.data.msg}):"IF"!==e.data.type&&"ELSE_IF"!==e.data.type&&"LOOP"!==e.data.type||("]"===$?function(t,e,n,o){const i=[],r=n.data.indent;for(let e=n.data.index+1;e<t.length;e++){const n=t[e];if(n.data.indent<=r)break;!1!==n.data.collapsable&&!0!==n.data.collapsable||(n.data={...n.data,collapsable:!1}),i.push(n.id)}ih(t,e,!0,i,n,o),n.data={...n.data,collapsable:!1}}(r,s,e,c):"["===$?function(t,e,n,o){const i=[],r=n.data.indent;for(let e=n.data.index+1;e<t.length;e++){const n=t[e];if(n.data.indent<=r)break;!1!==n.data.collapsable&&!0!==n.data.collapsable||(n.data={...n.data,collapsable:!0}),i.push(n.id)}ih(t,e,!1,i,n,o),n.data={...n.data,collapsable:!0}}(r,s,e,c):nh(r,s,e,c),v(r,s))},s,a,l,c,g,v,m,function(t){y=t,n(6,y)},function(t){w=t,n(7,w)}]}class dh extends Ct{constructor(t){super(),Et(this,t,ch,lh,a,{nodes:1,edges:15,nodeState:16,paths:17,nodesIndex:18,style:2,clazz:3,selection:0,focusOn:4,minimap:5,selectedFlowIndex:19,updateStore:20})}get updateStore(){return this.$$.ctx[20]}}function uh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hh,ph,fh,gh;var mh=function(){if(gh)return fh;gh=1;const t=function(){if(ph)return hh;ph=1;const t=["IF","ELSE_IF","ELSE","LOOP"],e=["GOTO","SKIP","STOP","END"];function n(e){return t.includes(e.type)}function o(t){return e.includes(t.type)}function i(t,e,n,o){let r=-2;if(void 0!==n){const o=t[n],i=t[e].indent;for(let s=e+1;s<t.length;s++){const e=t[s].indent;if(e===i){r=s;break}if(e<i){r=e>o.indent?s:n;break}}-2===r&&(r=n)}else{for(let n=e+1;n<t.length;n++)if(t[n].indent<=t[e].indent){r=n;break}-2===r&&(r=-1)}return r>-1&&t[r].type.startsWith("ELSE")&&(o||t[e].indent!==t[r].indent||"IF"!==t[e].type&&"ELSE_IF"!==t[e].type)&&(r=i(t,r,n,!0)),r}function r(t,e,n,o){const r=i(t,e,h(o));n[e].push(r)}function s(t,e){const n=t[e].indent;for(let o=e-1;o>-1;o--)if(n===t[o].indent)return o;throw new Error("Unable to find last step of same indent level")}function a(t,e,n,o,r){if("ELSE"===t.type)return void delete n[o];const s=t.indent;e[o+1]&&e[o+1].indent>s?n[o].push(o+1):n[o].push(void 0);let a=i(e,o,h(r));-1!==a&&"ELSE"===e[a].type&&a++,n[o].push(a),"LOOP"===t.type&&r.push(o)}function l(t,e){if(0===e)throw new Error(`${t[e].type} can't be first step of the flow`)}function c(t,e,n,o,i){if(l(t,i),void 0===n[e.msg])throw new Error(`GOTO is pointing to ${e.msg} that doesn't specified with any step`);u(t,o,i,n[e.msg])}function d(t,e,n,o){l(t,e);const r=t[e];if("SKIP"===r.type){if(o.length<1)throw new Error("SKIP must be inside LOOP");u(t,n,e,o[o.length-1])}else if("STOP"===r.type){if(o.length<1)throw new Error("STOP must be inside LOOP");u(t,n,e,i(t,h(o)))}else"END"===r.type&&u(t,n,e,-1)}function u(t,e,n,o){for(let i=0;i<n;i++){let r=e[i];if(void 0!==r){const e=r.indexOf(n);-1!==e&&("ELSE"===t[i].type&&(r=s(t,r)),r[e]=o)}}delete e[n]}function h(t){return t[t.length-1]}return hh=function(t,e,i){const s=[];for(let l=0;l<t.length;l++){const u=t[l],h=u.indent;if(s.length>0)for(let e=s.length-1;e>-1;e--)h<=t[s[e]].indent&&s.pop();"GOTO"===u.type?c(t,u,e,i,l):n(u)?a(u,t,i,l,s):o(u)?d(t,l,i,s):r(t,l,i,s)}}}(),e=["IF","ELSE_IF","LOOP","ELSE"],n=["GOTO","SKIP","STOP","END"],o=["AND","THEN","BUT","FOLLOW","ERR"];class i{constructor(t){this.name=t,this.headers={},this.steps=[],this.links={},this.leveledSteps=[[]]}}function r(t){return-1!==n.indexOf(t)||-1!==e.indexOf(t)||-1!==o.indexOf(t)}return fh=function(e){const n=e.split("\n"),o=[];let s={},a=[],l=0,c=-1,d=null,u=!1;return n.forEach(((e,n)=>{const h=e.trim();if(!h||"#"===h[0])return;if(h.startsWith("FLOW:"))return d&&t(d.steps,s,d.links),s={},a=[],l=0,c=-1,d=new i(h.substring(6)),o.push(d),void(u=!0);if(u&&h.match(/^[a-z]{1,70}:/)){const[t,n]=e.split(":");return void(d.headers[t.trim()]=n.trim())}u=!1,c++;const p=e.search(/\S/);let f;if(void 0!==a[l]?f=a[l]:(f=p,a[l]=p),f===p)d.leveledSteps[l].push(c);else if(f<p)a[++l]=p,d.leveledSteps[l]?d.leveledSteps[l].push(c):d.leveledSteps.push([c]);else{for(;l>-1;l--){if(a[l]===p)break}if(-1===l)throw new Error(`Indentation issue with line |${e}|`);d.leveledSteps[l].push(c)}let g=function(t){const e={msg:"",rawMsg:"",type:""};if("["===t[0]){const n=t.indexOf("]");e.index=t.substring(1,n).trim(),t=t.substring(n+1).trimStart()}const n=t.indexOf(" ");if(n<1)r(t)?e.type=t:e.msg=e.rawMsg=t;else{const o=t.substring(0,n),i=t.substring(n+1);r(o)&&(e.type=o,t=i),e.rawMsg=t.replace(/\s+/g," "),e.msg=function(t){let e=0,n="";for(let o=0;o<t.length;o++){const i=t[o];if("("===i)e++;else if(")"===i)e--;else{if(e>0)continue;n+=i}}return n.trim()}(t).replace(/\s+/g," ")}return e}(e.trim());g.indent=l,g.index&&(s[g.index]=c),d.steps.push(g),d.links[c]=[]})),t(d.steps,s,d.links),o},fh}(),yh=uh(mh);const wh=Ou+1.1*Ou,$h=Pu+1.5*Pu;function vh(t,e,n){return{id:t+"",type:"step",data:e,position:n}}function xh(t,e,n,o="",i){let r=!1,s="",a="",l="";return _h(o)&&0==n&&(s="r",a="lt"),t>e&&(s="l",r=!0),"IF"===o||"ELSE_IF"===o?0===n?l="True":1===n&&(l="False"):"LOOP"===o&&1===n&&(l="Exit"),{id:`${t}-${e}`,source:t+"",target:e+"",data:{},sourceHandle:s,targetHandle:a,animated:r,label:l}}function bh(t){const e=[],n=[];let o;const i=[];let r=0,s=-1;const a={};let l=0;for(;r<t.steps.length;r++){const c=t.steps[r];if(t.links[r]){let d;if(s++,o){const e=t.steps[o.id];if(e.indent===c.indent)d={x:o.position.x,y:o.position.y+$h};else if(e.indent<c.indent)s--,d={x:o.position.x+wh,y:o.position.y};else{let t,n=e.indent-c.indent;for(;n-- >0;)t=i.pop();d={x:t.position.x,y:s*$h}}"ELSE"===t.steps[r-1].type&&(d={x:d.x-wh,y:d.y})}else d={x:0,y:0};const u=vh(r,{msg:c.msg,rawMsg:c.rawMsg,type:c.type,indent:c.indent},d);_h(c.type)?(l++,u.data.collapsable=!0):"GOTO"===c.type&&l++,e.push(u),u.data.index=e.length-1,a[r]=e.length-1,o=u,_h(c.type)&&i.push(u);for(let e=0;e<t.links[r].length;e++){const o=t.links[r][e];if(-1===o)u.data.isEnd=!0;else{if(!t.links[o])throw new Error(`Link for Step ${o} is not present`);const i=xh(r,o,e,c.type,t.steps[o].type);n.push(i)}}}}e[0].data.isStart=!0;let c=function(t,e){const n=[];function o(i,r,s){const a=e[i];if(r.push(String(a)),-1===i)n.push([...r.slice(0,-1)]);else for(const e of t[i]||[])void 0===s[e]&&(s[e]=0),(s[e]<2||-1===e)&&(s[e]++,o(e,r,{...s}),s[e]--);r.pop()}return o(0,[],{0:1}),n}(t.links,a);c=c.sort(((t,e)=>t.length-e.length));const d={};return d.cyclomaticComplexity=l+1,d.depth=t.leveledSteps.length,d.stepsCount=t.steps.length,d.decisionPoints=l,d.nestingLoops=function(t){const e=[];let n=0;return t.forEach(((t,o)=>{"LOOP"===t.type?(n++,e[n-1]||(e[n-1]=[]),e[n-1].push(o)):"END"===t.type&&n--})),e}(t.steps),{flowName:t.name,nodes:e,edges:n,paths:c,nodesIndex:a,stats:d}}const kh=["IF","ELSE_IF","LOOP"];function _h(t){return-1!==kh.indexOf(t)}function Sh(t){let e,n,o,i,r;function s(e){t[22](e)}function a(e){t[23](e)}function l(e){t[24](e)}let c={flowsData:t[1],flowName:t[13],nodes:t[9],handleFlowChange:t[16],hideStepMsgDetail:t[18]};return void 0!==t[7]&&(c.selectedFlowIndex=t[7]),void 0!==t[14].hideMsgDetail&&(c.hideMsgDetail=t[14].hideMsgDetail),void 0!==t[2]&&(c.focusOn=t[2]),e=new Su({props:c}),J.push((()=>bt(e,"selectedFlowIndex",s))),J.push((()=>bt(e,"hideMsgDetail",a))),J.push((()=>bt(e,"focusOn",l))),e.$on("pathSelected",t[19]),{c(){kt(e.$$.fragment)},m(t,n){_t(e,t,n),r=!0},p(t,r){const s={};2&r&&(s.flowsData=t[1]),8192&r&&(s.flowName=t[13]),512&r&&(s.nodes=t[9]),!n&&128&r&&(n=!0,s.selectedFlowIndex=t[7],st((()=>n=!1))),!o&&16384&r&&(o=!0,s.hideMsgDetail=t[14].hideMsgDetail,st((()=>o=!1))),!i&&4&r&&(i=!0,s.focusOn=t[2],st((()=>i=!1))),e.$set(s)},i(t){r||(gt(e.$$.fragment,t),r=!0)},o(t){mt(e.$$.fragment,t),r=!1},d(t){St(e,t)}}}function Eh(t){let e,o,i,r,s,a=t[6]&&Sh(t);const l=[{nodes:t[9]},{edges:t[10]},{nodeState:t[14]},{paths:t[11]},{nodesIndex:t[12]},{selectedFlowIndex:t[7]},t[20],{focusOn:t[2]},{minimap:t[5]},{style:"width: "+t[3]+"; height: "+t[8]+";"}];function c(e){t[26](e)}let d={};for(let t=0;t<l.length;t+=1)d=n(d,l[t]);return void 0!==t[0]&&(d.selection=t[0]),i=new dh({props:d}),t[25](i),J.push((()=>bt(i,"selection",c))),i.$on("flowChange",t[17]),{c(){e=C("div"),a&&a.c(),o=M(),kt(i.$$.fragment),L(e,"class","solothought_text2chart_flow"),T(e,"width",t[3]),T(e,"height",t[4])},m(t,n){_(t,e,n),a&&a.m(e,null),k(e,o),_t(i,e,null),s=!0},p(t,[n]){t[6]?a?(a.p(t,n),64&n&&gt(a,1)):(a=Sh(t),a.c(),gt(a,1),a.m(e,o)):a&&(pt(),mt(a,1,1,(()=>{a=null})),ft());const c=1073068&n?vt(l,[512&n&&{nodes:t[9]},1024&n&&{edges:t[10]},16384&n&&{nodeState:t[14]},2048&n&&{paths:t[11]},4096&n&&{nodesIndex:t[12]},128&n&&{selectedFlowIndex:t[7]},1048576&n&&xt(t[20]),4&n&&{focusOn:t[2]},32&n&&{minimap:t[5]},264&n&&{style:"width: "+t[3]+"; height: "+t[8]+";"}]):{};!r&&1&n&&(r=!0,c.selection=t[0],st((()=>r=!1))),i.$set(c),(!s||8&n)&&T(e,"width",t[3]),(!s||16&n)&&T(e,"height",t[4])},i(t){s||(gt(a),gt(i.$$.fragment,t),s=!0)},o(t){mt(a),mt(i.$$.fragment,t),s=!1},d(n){n&&S(e),a&&a.d(),t[25](null),St(i)}}}function Ch(t,e,o){const i=["text","selection","focusOn","width","height","flowsData","minimap","toolbar"];let r=w(e,i),{text:s=""}=e,{selection:a={}}=e,{focusOn:l=!0}=e,{width:c="100%"}=e,{height:d="100%"}=e,{flowsData:u=[]}=e,{minimap:h=!0}=e,{toolbar:p=!0}=e,f="";f=p?`calc(${d} - 50px)`:d;let g,m=0,$=[],v=[],x=[],b={},k="",_={hideMsgDetail:!1,standardShape:!1};function S(t){if(o(7,m=t),u[m]){const e=u[m];o(9,$=e.nodes),o(10,v=e.edges),o(11,x=e.paths),o(12,b=e.nodesIndex),o(13,k=e.flowName),o(0,a={flowIndex:t,nodesIndex:b}),Ku($,_),g&&"function"==typeof g.updateStore&&g.updateStore($,v)}}return t.$$set=t=>{e=n(n({},e),y(t)),o(20,r=w(e,i)),"text"in t&&o(21,s=t.text),"selection"in t&&o(0,a=t.selection),"focusOn"in t&&o(2,l=t.focusOn),"width"in t&&o(3,c=t.width),"height"in t&&o(4,d=t.height),"flowsData"in t&&o(1,u=t.flowsData),"minimap"in t&&o(5,h=t.minimap),"toolbar"in t&&o(6,p=t.toolbar)},t.$$.update=()=>{2097280&t.$$.dirty&&s.length>0&&(o(1,u=function(t){const e=[];try{const n=yh(t);for(let t=0;t<n.length;t++){const o=n[t];if(o.steps.length>0){const t=bh(o);e.push(t)}}}catch(t){console.error(t)}return e}(s)),S(m)),130&t.$$.dirty&&u.length>0&&S(m),129&t.$$.dirty&&a&&a.nodeIds&&a.nodeIds.length&&a.flowIndex!==m&&S(a.flowIndex)},[a,u,l,c,d,h,p,m,f,$,v,x,b,k,_,g,function(t){S(parseInt(t.target.value))},function(t){if(t.detail.flowName){const e=t.detail.flowName;u.forEach(((t,n)=>{t.flowName===e&&S(n)}))}},function(){o(14,_.hideMsgDetail=!_.hideMsgDetail,_),Ku($,{hideMsgDetail:_.hideMsgDetail}),g.updateStore($,v)},function(t){"play"===t.detail.mode?function(t){const e=t.detail.flowIndex,n=t.detail.nodeIndexes;function i(t){if(t<n.length){const r=n[t];o(0,a={flowIndex:e,nodeIndexes:[r]}),setTimeout((()=>{i(t+1)}),400)}else o(0,a={flowIndex:-1,nodeIndexes:[]})}i(0)}(t):o(0,a={flowIndex:t.detail.flowIndex,nodeIndexes:t.detail.nodeIndexes})},r,s,function(t){m=t,o(7,m)},function(e){t.$$.not_equal(_.hideMsgDetail,e)&&(_.hideMsgDetail=e,o(14,_))},function(t){l=t,o(2,l)},function(t){J[t?"unshift":"push"]((()=>{g=t,o(15,g)}))},function(t){a=t,o(0,a)}]}return t.FlowChart=class extends Ct{constructor(t){super(),Et(this,t,Ch,Eh,a,{text:21,selection:0,focusOn:2,width:3,height:4,flowsData:1,minimap:5,toolbar:6})}},Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=text2chart.min.js.map
